{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/_parts/footer/footer.component.ts","webpack:///src/app/_parts/footer/footer.component.html","webpack:///src/app/_parts/header/header.component.html","webpack:///src/app/_parts/header/header.component.ts","webpack:///src/app/_parts/scheme/scheme.component.ts","webpack:///src/app/_parts/scheme/scheme.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/auth/login/login.component.ts","webpack:///src/app/auth/login/login.component.html","webpack:///src/app/auth/pass-reset/pass-reset.component.ts","webpack:///src/app/auth/pass-reset/pass-reset.component.html","webpack:///src/app/auth/profile-update/profile-update.component.ts","webpack:///src/app/auth/profile-update/profile-update.component.html","webpack:///src/app/auth/registration/registration.component.ts","webpack:///src/app/auth/registration/registration.component.html","webpack:///src/app/auth/user-requests/user-requests.component.ts","webpack:///src/app/auth/user-requests/user-requests.component.html","webpack:///src/app/case/case.component.html","webpack:///src/app/case/case.component.ts","webpack:///src/app/classes/admin.guard.ts","webpack:///src/app/classes/program.guard.ts","webpack:///src/app/classes/ref.directive.ts","webpack:///src/app/index/index.component.html","webpack:///src/app/index/index.component.ts","webpack:///src/app/library/library.component.ts","webpack:///src/app/library/library.component.html","webpack:///src/app/models/mflimpacts.ts","webpack:///src/app/models/mflmidoutcomes.ts","webpack:///src/app/models/mfloutputs.ts","webpack:///src/app/models/mflshortoutcomes.ts","webpack:///src/app/models/mplimpacts.ts","webpack:///src/app/models/mplmidoutcomes.ts","webpack:///src/app/models/mploutputs.ts","webpack:///src/app/models/mplshortoutcomes.ts","webpack:///src/app/models/program.ts","webpack:///src/app/program-list/profile-card/profile-card.component.ts","webpack:///src/app/program-list/profile-card/profile-card.component.html","webpack:///src/app/program-list/program-card/program-card.component.ts","webpack:///src/app/program-list/program-card/program-card.component.html","webpack:///src/app/program-list/program-list.component.ts","webpack:///src/app/program-list/program-list.component.html","webpack:///src/app/program/program.component.ts","webpack:///src/app/program/program.component.html","webpack:///src/app/program/thead-form/thead-form.component.ts","webpack:///src/app/program/thead-form/thead-form.component.html","webpack:///src/app/program/thead-plan/thead-plan.component.ts","webpack:///src/app/program/thead-plan/thead-plan.component.html","webpack:///src/app/programs-monitor/programs-monitor.component.ts","webpack:///src/app/programs-monitor/programs-monitor.component.html","webpack:///src/app/report/report.component.html","webpack:///src/app/report/report.component.ts","webpack:///src/app/result/result.component.ts","webpack:///src/app/result/result.component.html","webpack:///src/app/select-library/select-library.component.ts","webpack:///src/app/select-library/select-library.component.html","webpack:///src/app/services/transport.service.ts","webpack:///src/app/show-modal/show-modal.component.ts","webpack:///src/app/show-modal/show-modal.component.html","webpack:///src/app/test/test.component.ts","webpack:///src/app/test/test.component.html","webpack:///src/app/tools/tools.component.ts","webpack:///src/app/tools/tools.component.html","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","FooterComponent","now","Date","selector","templateUrl","styleUrls","HeaderComponent","transport","router","baseUrl","toLoad","displayLibrarySelect","displayAdminSelect","uSub","newUser","subscribe","user","findUser","displayHeader","get","usersData","users","results","current_user","currentUser","first_name","username","console","log","library","navigate","success","confirm","accessToken","refreshToken","unsubscribe","providedIn","SchemeComponent","self","canvas","document","getElementById","translatePos","x","width","y","height","scale","scaleMultiplier","startDragOffset","mouseDown","addEventListener","draw","evt","clientX","clientY","cwidth","cheight","ltpx","ltpy","targetFill","targetBorder","activityFill","activityBorder","outputFill","outputBorder","shortOutcomeFill","shortOutcomeBorder","midOutcomeFill","midOutcomeBorder","impactFill","impactBorder","context","getContext","clearRect","save","translate","strokeStyle","strokeRect","i","impactY","midOutcomeY","shortOutcomeY","outputY","activityY","targetY","fillStyle","restore","ctx","radius","fill","stroke","tl","tr","br","bl","defaultRadius","side","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","routes","path","component","canActivate","children","redirectTo","pathMatch","AppRoutingModule","forRoot","imports","AppComponent","isCollapsed","AppModule","declarations","providers","bootstrap","LoginComponent","fb","header","loginForm","group","email","required","password","sendToHeader","getToken","controls","value","data","alert","input","target","getAttribute","classList","add","remove","setAttribute","onSubmit","show_hide_password","PassResetComponent","error","ProfileUpdateComponent","profileUpdateForm","lastname","firstname","middlename","region","organization","website","position","userRequestsData","userRequests","userRequest","currentUserRequest","setValue","valid","Number","put","res","err","RegistrationComponent","registrationForm","post","UserRequestsComponent","activateRoute","userrequests","userrequest","$event","CaseComponent","status","displayMyLibrary","formPage","myVerified","verified","filterForm","targetFilters","practiceFilters","meFilters","oaFilters","tgFilters","myFilterForm","filterRoot","practice","me","oa","tg","myFilterRoot","undefined","authenticated","queryParamMap","queryParams","model","openDetails","targetsData","targets","filter","m","parent_ref","reverse","child_index","indexOf","find","splice","parent_index","has_children","practicesData","practices","casesData","cases","allCases","sortCases","thematicGroupsData","thematicGroups","monitoringElementsData","monitoringElements","organizationActivitiesData","organizationActivities","analysisMethods","evaluationTypes","representationMethods","methods","outcomes","evaluationReports","my","reset","caseItem","currentCase","displayDetails","filePath","link","createElement","download","href","click","addToLibraryResult","c","current_user_library","closeAddPersonal","displayAddPersonal","displayRemovePersonal","event","preventDefault","tFormControls","arr","push","oaFormControls","meFormControls","createCaseForm","name","practice_ref","target_refs","thematic_group_ref","verification_info","verification_level_regularity","verification_level_validity","verification_level_outcome_accessibility","verification_level_outcome_validity","organization_activity_refs","monitoring_element_refs","url","isNew","el","valArr","addReportForm","method_refs","length","trim","toLocaleLowerCase","otherMethod","newParentRef","patchValue","other_method","representation_method_refs","otherRepMethod","other_representation_method","analysis_method_refs","otherAnMethod","other_analysis_method","evaluation_type_ref","otherEvType","other_evaluation_type","allMyCases","item","myCases","evRep","values","boolToObjT","resNum","boolToObjOA","boolToObjME","update","addToLibrary","file","fd","FormData","append","patch","resFile","addReport","saveArr","field","includes","message","result","index","String","closeForm","mFormControls","rmFormControls","amFormControls","oFormControls","o","type","key_questions","other_results","outcome_refs","next","newMethod","newAnMethod","newRepMethod","newEvType","reportSubmit","boolToObjM","boolToObjAM","boolToObjRM","boolToObjO","case_ref","add_public_confirm","add_public_will","report","repFile","files","file_rep","nativeElement","file_input","reviewCases","reviewMyCases","checkList","formArray","checked","parent","forEach","ctrl","removeAt","indexes","child","siblings","checkedMy","targetFiltersArray","practiceFiltersArray","oaFiltersArray","tgFiltersArray","meFiltersArray","some","trg","filterName","filterValue","clear","selectMyLibrary","AdminGuard","route","state","is_superuser","ProgramGuard","snapshot","params","program","RefDirective","containerRef","IndexComponent","groupedOutcomes","fromProgram","form","selectedOutcome","outcome_names","groupBy","array","key","reduce","currentValue","programId","programBackReferenceId","programResultLevel","outcomesData","allOutcomes","sortOutcomes","current_outcomes","outcome","practice_refs","selectForm","level","programsData","programs","selectedProgram","p","Array","from","t_r_generator","p_r_generator","t_g_generator","mpl","result_ref","mplInd","indicator","mplMeth","tool","i_r_generator","m_r_generator","editForm","thematic_group_refs","indicators","disable","boolToObjP","boolToObjTG","boolToObjI","boolToObjOM","tool_type","boolToObjTM","tools","postMethods","newId","dataInd","outcome_ref","resInd","tool_url","split","dataName","resName","enable","selected","outcomeId","backReferenceId","navigateByUrl","reviewOutcomes","prc","newResultAdd","splitted","program_output_many_refs","program_short_outcome_many_refs","program_mid_outcome_many_refs","program_ref","LibraryComponent","datePipe","outcomeFilters","logicalModels","allLogicalModels","sortModels","allMyLogicalModels","logicalModel","myLogicalModels","formSelectProgram","selectProgram","pFormControls","formEditModel","period","currentModel","tag","model_file","result_tree_file","dir","modelFileRef","resultTreeFileRef","reviewMyLogicalModels","reviewLogicalModels","outcomeFiltersArray","ocm","MflImpacts","MflMidOutcomes","MflOutputs","MflShortOutcomes","MplImpacts","MplMidOutcomes","MplOutputs","displayResultRef","displayName","displayIndicator","displayMethod","displayTool","displayFrequency","displayReporting","MplShortOutcomes","Program","ProfileCardComponent","ProgramCardComponent","idToDownload","window","open","openProgram","ProgramListComponent","myPrograms","newProgram","ProgramComponent","resolver","programForm","description","user_ref","programEdit","contexts","assumptions","assumptionAddForm","text","contextAddForm","targetDescriptionAddForm","info","target_ref","activityAddForm","programOutputAddForm","activity_ref","programShortOutcomeAddForm","program_output_ref","programMidOutcomeAddForm","program_short_outcome_ref","programImpactAddForm","program_mid_outcome_ref","activities","programOutputs","programShortOutcomes","programMidOutcomes","programImpacts","mplOutputs","mplShortOutcomes","mplMidOutcomes","mplImpacts","mflOutputs","mflShortOutcomes","mflMidOutcomes","mflImpacts","showAssumptionAdd","showContextAdd","showTargetDescription","showActivityAdd","showProgramOutputAdd","showShortProgramOutcomeAdd","showMidProgramOutcomeAdd","showProgramImpactAdd","displayDownloader","displayProgramDetails","displayChain","displayInnerChain","displayPlanForm","displayPlan","displayPlanOutput","displayPlanShortOutcome","displayPlanMidOutcome","displayPlanImpact","displayForm","displayFormOutput","displayFormShortOutcome","displayFormMidOutcome","displayFormImpact","displayProgressLine","itemNum1Active","itemNum2Active","itemNum3Active","itemNum4Active","itemNum5Active","itemNum6Active","itemNum7Active","getExact","programData","fillFormArrayWithId","targetDescriptionsData","targetDescription","contextsData","lenght","context_name","context_edit","assumptionsData","assumption_name","assumption_edit","activitiesData","programOutputData","programShortOutcomeData","programMidOutcomeData","programImpactData","mplOutputsData","mplShortOutcomesData","mplMidOutcomesData","mplImpactsData","mflOutputsData","mflShortOutcomesData","mflMidOutcomesData","mflImpactsData","methodsData","openNotification","help_block","helpItem1","helpItem2","newValue","at","assumption","formArrayName","dataList","element","programOutput","editingShortProgramOutcome","programShortOutcome","editingMidProgramOutcome","programMidOutcome","editingProgramImpact","editingObject","editingAssumption","editingContext","editingTargetDescriptionSubject","editingTargetDescription","editingActivity","editingProgramOutput","closeAssumptionAdd","closeContextAdd","assumption_fg","context_fg","closeTargetDescription","activity","closeActivityAdd","closeProgramOutputAdd","targetDescriptionToDelete","outputToDelete","outcomeToDelete","closeShortProgramOutcomeAdd","closeMidProgramOutcomeAdd","closeProgramImpactAdd","programMidOutcomesData","programImpact","backReferenceIds","refsneeded","refNeeded","sort_index","createMplOutput","createMplShortOutcome","createMplMidOutcome","createMplImpact","createMflOutput","createMflShortOutcome","createMflMidOutcome","createMflImpact","mplOutput","output","mplResult","newMflOutput","found","mpl_ref","newMfl","line","mflResult","createUpdateFunction","method","frequency","reporting","resultName","plan","period1","fact1","period2","fact2","period3","fact3","period4","fact4","shouldBeHighlighted","shortOutcome","midOutcome","impact","shortoutcome","midoutcome","mplShortOutcome","mplMidOutcome","mplImpact","mflOutput","mflShortOutcome","mflMidOutcome","mflImpact","mplOutputDelete","mplShortOutcomeDelete","mplMidOutcomeDelete","mplImpactDelete","lineHeight","fitWidth","fillText","idx","str","substr","measureText","printAt","setTimeout","anyX","anyHeight","lineWidth","rectX","rectY","rectHeight","rectWidth","roundRect","textAlign","textBaseline","font","textToFill","elSelectNative","getElementsByClassName","elSelectCustom","elSelectCustomBox","elSelectCustomOpts","customOptsList","optionChecked","optionHoveredIndex","isClosed","contains","openSelectCustom","closeSelectCustom","optionCheckedIndex","findIndex","updateCustomSelectHovered","watchClickOutside","removeEventListener","newIndex","prevOption","option","updateCustomSelectChecked","prevValue","elPrevOption","querySelector","elOption","textContent","didClickedOutside","elRespectiveCustomOption","dispatchEvent","Event","unselect","cloneNode","elements","querySelectorAll","isError","modalFactory","resolveComponentFactory","refDir","createComponent","instance","close","ans","hideHelpItem","showShadow","hideShadow","hideHelpBlock","TheadFormComponent","TheadPlanComponent","ProgramsMonitorComponent","ReportComponent","load","am","current","re","evaluation_file","rm","editReportForm","request","udpate","evalution_report_ref","ResultComponent","outcomeResult","outcomeNames","targetsResult","practicesResult","indicatorsResult","outcomeIndicators","methodsResult","outcomeMethods","toolsResult","reportsResult","reports","toolForm","allTools","indicatorForm","t","SelectLibraryComponent","br1Height","br2Height","auth","br1","clientHeight","br2","goLibrary","TransportService","http","cookieValue","cookie","cookies","substring","decodeURIComponent","emit","login","formData","headers","btoa","reject","responseData","access_token","refresh_token","anonymous","updateToken","secondaryResult","localStorage","getItem","removeItem","setItem","ShowModalComponent","interval","closeModal","clearTimeout","TestComponent","getOld","ToolsComponent","olFilters","methodFilters","ol","method_ref","toolTags","outcomeLevelsData","outcomeLevels","toolsData","sortTools","allMyTools","myTools","currentTool","ttFormControls","createToolForm","tool_tag_refs","method_new","outcome_level_ref","method_id","isArray","add_public","boolToObjTT","toolWithFile","reviewTools","reviewMyTools","methodFiltersArray","olFiltersArray","environment","production","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss']\n})\nexport class FooterComponent implements OnInit {\n\n  now: Date\n  constructor() { }\n\n  ngOnInit(): void {\n    this.now = new Date()\n  }\n\n}\n","<footer>\n    <div>\n        <div class=\"row\">\n            <div class=\"col-2\">\n                <img src=\"/newpion/static/pionfront/assets/img/logo_footer.png\">\n            </div>\n            <div class=\"col-9\">\n                <ul class=\"top_menu white\">\n                    <li><a href=\"\">Главная</a></li>\n                    <!-- <li><a href=\"\">Руководство пользователя</a></li>\n                    <li><a href=\"\">Обзор сервиса</a></li>\n                    <li><a href=\"\">ДЕМО</a></li>\n                    <li><a href=\"\">О нас</a></li> -->\n                </ul>\n            </div>\n            <div class=\"col-1 arrow_totop\">\n                <img onclick=\"window.scrollTo({ top: 0, left: 0, behavior: 'smooth' });\" src=\"/newpion/static/pionfront/assets/img/arrow_totop.png\">\n            </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-5 logo_footer\">\n                <img src=\"/newpion/static/pionfront/assets/img/footer_logo1.png\">\n                <img src=\"/newpion/static/pionfront/assets/img/footer_logo2.png\">\n                <img src=\"/newpion/static/pionfront/assets/img/footer_logo3.png\">\n            </div>\n            <div class=\"col-6 polit\">\n                <p>\n                    <!-- <a href=\"\">Пользовательское соглашение</a>\n                    <a href=\"\">Политика конфиденциальности</a> -->\n                </p>\n            </div>\n            <div class=\"col-1 media_block\">\n                <!-- <img src=\"/newpion/static/pionfront/assets/img/vk.png\">\n                <img src=\"/newpion/static/pionfront/assets/img/fb.png\"> -->\n            </div>\n        </div>\n\n        <p class=\"underline\">© АНО «Эволюция и Филантропия», {{now | date:\"yyyy\"}}. Все права защищены</p>\n    </div>\n</footer>","<header>\n    <div *ngIf=\"toLoad <= 0\">\n        <div class=\"row\">\n            <div class=\"col-2\">\n                <a [href]=\"baseUrl\"><img src=\"/newpion/static/pionfront/assets/img/logo.png\"></a>\n            </div>\n            <div class=\"col-6\">\t\t    \t  \n                <ul class=\"top_menu\">\n                    <li><a routerLink=\"/index\">МОИ ПРОГРАММЫ</a></li>\n                    <li><a href=\"{{baseUrl+'manual/'}}\" target=\"_blank\">руководство пользователя</a></li>\n                    <!-- <li><a href=\"\">вернуться на степик</a></li>  -->\n                </ul>\n            </div>\n            <div class=\"col-1\">\n                <div class=\"hamburger\" style=\"display: flex; flex-direction: column; align-items: center; justify-content: center;\">\n                    <div style=\"display: flex;\">\n                        <a (click)=\"displayAdminSelect=true\" *ngIf=\"currentUser && currentUser.is_superuser\"><img src=\"/newpion/static/pionfront/assets/img/crown.png\"></a>\n                    </div>\n                    <div style=\"display: flex;\">\n                        <a (click)=\"displayLibrarySelect=true\"><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></a>\n                    </div>\n                </div>\n            </div>\n            <div *ngIf=\"currentUser\" (click)=\"exit()\" class=\"col-3 login_block\">\n                <img src=\"/newpion/static/pionfront/assets/img/user_img.png\">\n                <p><strong>Мой профиль</strong></p>\n                <p>Здравствуйте, {{currentUser.first_name}}</p>\n            </div>\n            <div *ngIf=\"!currentUser\" class=\"col-3 login_block\">\n                <button (click)=\"goLogin()\" class=\"add_button\">Вход</button>\n                <button (click)=\"goRegister()\" class=\"add_button\">Регистрация</button>\n           </div>\n        </div>\n    </div>\n</header>\n\n<div class=\"popap_download dark_block blue_head\" *ngIf=\"displayLibrarySelect\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"displayLibrarySelect=false\" class=\"close_btn\"><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Перейти в библиотеку</p>\n        </div>\n        <div (click)=\"goLibrary('library')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img1.png\"> -->\n            <p>Библиотека логических моделей и деревьев результатов</p>\n        </div>\n        <div (click)=\"goLibrary('outcomes')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img2.png\"> -->\n            <p>Библиотека социальных результатов</p>\n        </div>\n        <div (click)=\"goLibrary('tools')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img2.png\"> -->\n            <p>Библиотека инструментов</p>\n        </div>\n        <div (click)=\"goLibrary('cases')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img2.png\"> -->\n            <p>Библиотека кейсов</p>\n        </div>\n        <div (click)=\"goLibrary('select-library')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img2.png\"> -->\n            <p>О библиотеках</p>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_download dark_block blue_head\" *ngIf=\"displayAdminSelect\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"displayAdminSelect=false\" class=\"close_btn\"><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Страницы администратора</p>\n        </div>\n        <div (click)=\"goLibrary('admin/user-requests')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img1.png\"> -->\n            <p>Пользователи</p>\n        </div>\n        <div (click)=\"goLibrary('admin/programs-monitor')\" class=\"text_block cursor_pointer\">\n            <!-- <img src=\"/newpion/static/pionfront/assets/img/ower_img1.png\"> -->\n            <p>Мониторинг программ</p>\n        </div>\n    </div>\n</div>","import { Component, Injectable, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TransportService } from 'src/app/services/transport.service';\nimport { User } from 'src/app/models/user';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.scss']\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n\n  baseUrl = environment.baseUrl\n  uSub: any\n  users: User[];\n  currentUser: User;\n  toLoad: number = 1;\n  displayLibrarySelect: boolean = false;\n  displayAdminSelect: boolean = false;\n\n  constructor(private transport: TransportService,\n    private router: Router) {\n      this.uSub = this.transport.newUser.subscribe(user => {if (user) this.findUser()})\n    }\n\n  ngOnInit(): void {    \n    this.findUser()\n  }\n\n  async findUser() {\n    try {\n      if (this.displayHeader()) {\n        let usersData = await this.transport.get(\"users/\")       \n        this.users = usersData.results;\n        for (var user in this.users) {\n          if (this.users[user].current_user) {\n            this.currentUser = this.users[user];\n            if (!this.currentUser.first_name)\n              this.currentUser.first_name = this.currentUser.username;\n            break;\n          }\n        }\n      } else this.currentUser = null\n      this.transport.user = this.currentUser\n    } catch (e) {\n      this.currentUser = null\n      console.log(e)\n    }\n    \n    this.toLoad -= 1;\n  }\n\n  goLibrary(library: string) {\n    this.router.navigate(['/'+library]);\n    this.displayLibrarySelect = false;\n    this.displayAdminSelect = false;\n  }\n\n  exit() {\n    var success = confirm(\"Выйти?\");\n    if (success) {\n      this.transport.accessToken = null;\n      this.transport.refreshToken = null;\n      this.currentUser = null\n      this.router.navigate(['/auth/login']);\n    }\n  }\n\n  displayHeader(): boolean {\n    if (!this.transport.accessToken)\n      return false;\n    return true;\n  }\n  \n  goLogin() {\n    this.router.navigate(['/auth/login'])\n  }\n\n  goRegister() {\n    this.router.navigate(['/auth/registration'])\n  }\n\n  ngOnDestroy(): void {\n    this.uSub.unsubscribe()\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Outcome } from 'src/app/models/outcome';\n\n@Component({\n  selector: 'app-scheme',\n  templateUrl: './scheme.component.html',\n  styleUrls: ['./scheme.component.scss']\n})\nexport class SchemeComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n    var self = this;\n\n    var canvas: any = document.getElementById(\"np-canvas\");\n\n    var translatePos = {\n        x: canvas.width / 2,\n        y: canvas.height / 2\n    };\n\n    var scale = 1.0;\n    var scaleMultiplier = 0.8;\n    var startDragOffset: any = {};\n    var mouseDown = false;\n\n    // add button event listeners\n    document.getElementById(\"plus\").addEventListener(\"click\", function(){\n        scale /= scaleMultiplier;\n        self.draw(scale, translatePos);\n    }, false);\n\n    document.getElementById(\"minus\").addEventListener(\"click\", function(){\n        scale *= scaleMultiplier;\n        self.draw(scale, translatePos);\n    }, false);\n\n    // add event listeners to handle screen drag\n    canvas.addEventListener(\"mousedown\", function(evt){\n        mouseDown = true;\n        startDragOffset.x = evt.clientX - translatePos.x;\n        startDragOffset.y = evt.clientY - translatePos.y;\n    });\n\n    canvas.addEventListener(\"mouseup\", function(evt){\n        mouseDown = false;\n    });\n\n    canvas.addEventListener(\"mouseover\", function(evt){\n        mouseDown = false;\n    });\n\n    canvas.addEventListener(\"mouseout\", function(evt){\n        mouseDown = false;\n    });\n\n    canvas.addEventListener(\"mousemove\", function(evt){\n        if (mouseDown) {\n            translatePos.x = evt.clientX - startDragOffset.x;\n            translatePos.y = evt.clientY - startDragOffset.y;\n            self.draw(scale, translatePos);\n        }\n    });\n\n    self.draw(scale, translatePos);\n  }\n\n  draw(scale, translatePos) {\n    // canvas sizes\n    var cwidth = 851;\n    var cheight = 500;\n\n    var ltpx = -(cwidth/2.0);\n    var ltpy = -(cheight/2.0);\n\n    // colors\n    \n    // Целевая группа \n    var targetFill = \"#9ee8f4\"; \n    var targetBorder = \"#45c6db\";\n    \n    // Активность\n    var activityFill = \"#adfbdd\"; \n    var activityBorder = \"#2ca978\";\n    \n    // Непосредственный результат\n    var outputFill = \"#fee6b1\"; \n    var outputBorder = \"#ee860b\";\n    \n    // Краткосрочный социальный результат\n    var shortOutcomeFill = \"#f3c9ee\"; \n    var shortOutcomeBorder = \"#bf44af\";\n    \n    // Среднесрочный социальный результат\n    var midOutcomeFill = \"#c1b9f4\"; \n    var midOutcomeBorder = \"#6a5faf\";\n    \n    // Социальный эффект\n    var impactFill = \"#f4c2b9\"; \n    var impactBorder = \"#ff330b\";\n\n    var canvas:any = document.getElementById(\"np-canvas\");\n    var context = canvas.getContext(\"2d\");\n\n    // clear canvas\n    // work with zooming, do not touch\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    context.save();\n    context.translate(translatePos.x, translatePos.y);\n    context.scale(scale, scale);\n    //  end of work with zooming, do not touch\n\n    // border of initiating canvas. for debug only\n    context.strokeStyle = \"#000000\";\n    context.strokeRect(ltpx-1, ltpy-1, cwidth+2, cheight+2);\n\n    var i = 0;\n    context.strokeStyle = impactBorder;\n    context.strokeRect(ltpx, ltpy + (cheight/6.0)*i, cwidth, cheight/6.0);\n    context.strokeRect(ltpx + (cheight/18.0), ltpy + (cheight/6.0)*i + (cheight/18.0), cwidth - (cheight/9.0), cheight/18.0);\n    var impactY = ltpy + (cheight/6.0)*i + (cheight/18.0);\n\n    i += 1;\n    context.strokeStyle = midOutcomeBorder;\n    context.strokeRect(ltpx, ltpy + (cheight/6.0)*i, cwidth, cheight/6.0);\n    context.strokeRect(ltpx + (cheight/18.0), ltpy + (cheight/6.0)*i + (cheight/18.0), cwidth - (cheight/9.0), cheight/18.0);\n    var midOutcomeY = ltpy + (cheight/6.0)*i + (cheight/18.0);\n\n    i += 1;\n    context.strokeStyle = shortOutcomeBorder;\n    context.strokeRect(ltpx, ltpy + (cheight/6.0)*i, cwidth, cheight/6.0);\n    context.strokeRect(ltpx + (cheight/18.0), ltpy + (cheight/6.0)*i + (cheight/18.0), cwidth - (cheight/9.0), cheight/18.0);\n    var shortOutcomeY = ltpy + (cheight/6.0)*i + (cheight/18.0);\n\n    i += 1;\n    context.strokeStyle = outputBorder;\n    context.strokeRect(ltpx, ltpy + (cheight/6.0)*i, cwidth, cheight/6.0);\n    context.strokeRect(ltpx + (cheight/18.0), ltpy + (cheight/6.0)*i + (cheight/18.0), cwidth - (cheight/9.0), cheight/18.0);\n    var outputY = ltpy + (cheight/6.0)*i + (cheight/18.0);\n\n    i += 1;\n    context.strokeStyle = activityBorder;\n    context.strokeRect(ltpx, ltpy + (cheight/6.0)*i, cwidth, cheight/6.0);\n    context.strokeRect(ltpx + (cheight/18.0), ltpy + (cheight/6.0)*i + (cheight/18.0), cwidth - (cheight/9.0), cheight/18.0);\n    var activityY = ltpy + (cheight/6.0)*i + (cheight/18.0);\n\n    i += 1;\n    context.strokeStyle = targetBorder;\n    context.strokeRect(ltpx, ltpy + (cheight/6.0)*i, cwidth, cheight/6.0);\n    context.strokeRect(ltpx + (cheight/18.0), ltpy + (cheight/6.0)*i + (cheight/18.0), cwidth - (cheight/9.0), cheight/18.0);\n    var targetY = ltpy + (cheight/6.0)*i + (cheight/18.0);\n    // end of border of initiating canvas. for debug only\n\n    // data\n\n    // var outcomes:Outcome[] = [\n    //   new Outcome() {name: 'Улучшение эмоционального состояния ребенка'},\n    //   {name: 'Повышен уровень социально-бытовой адаптации'},\n    //   {name: 'Улучшение внутрисемейных отношений, включая детско-родительские отношения'},\n    // ];\n    \n    // end of data\n    \n        context.strokeStyle = impactBorder;\n        context.fillStyle = impactFill;\n\n\n    // context.strokeStyle = \"#0000ff\";\n    // context.fillStyle = \"#aaaaee\";\n\n    // this.roundRect(context, -10, -10, 20, 20, 1, true, true);\n\n    // context.fill();\n\n    // context.lineWidth = 5;\n    // context.strokeStyle = \"#0000ff\";\n    // context.stroke();\n    context.restore();\n  }\n\n  roundRect(ctx, x, y, width, height, radius, fill, stroke) {\n    if (typeof stroke === 'undefined') {\n      stroke = true;\n    }\n    if (typeof radius === 'undefined') {\n      radius = 5;\n    }\n    if (typeof radius === 'number') {\n      radius = {tl: radius, tr: radius, br: radius, bl: radius};\n    } else {\n      var defaultRadius = {tl: 0, tr: 0, br: 0, bl: 0};\n      for (var side in defaultRadius) {\n        radius[side] = radius[side] || defaultRadius[side];\n      }\n    }\n    ctx.beginPath();\n    ctx.moveTo(x + radius.tl, y);\n    ctx.lineTo(x + width - radius.tr, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);\n    ctx.lineTo(x + width, y + height - radius.br);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);\n    ctx.lineTo(x + radius.bl, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);\n    ctx.lineTo(x, y + radius.tl);\n    ctx.quadraticCurveTo(x, y, x + radius.tl, y);\n    ctx.closePath();\n    if (fill) {\n      ctx.fill();\n    }\n    if (stroke) {\n      ctx.stroke();\n    }\n  \n  }\n\n}\n","<p>\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n</p>\n<div id=\"np-scheme-wrapper\">\n    <canvas id=\"np-canvas\" width=\"851\" height=\"500\">\n    </canvas>\n    <div id=\"np-button-wrapper\">\n        <input class='np-button' type=\"button\" id=\"plus\" value=\"+\"><input class='np-button' type=\"button\" id=\"minus\" value=\"-\">\n    </div>\n</div>\n<p>\n    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n</p>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IndexComponent } from './index/index.component';\nimport { LibraryComponent } from './library/library.component';\nimport { ProgramComponent } from './program/program.component';\nimport { ProgramListComponent } from './program-list/program-list.component';\nimport { RegistrationComponent } from './auth/registration/registration.component';\nimport { ResultComponent } from './result/result.component';\nimport { LoginComponent } from './auth/login/login.component';\nimport { UserRequestsComponent } from './auth/user-requests/user-requests.component';\nimport { SelectLibraryComponent } from './select-library/select-library.component';\nimport { ProgramsMonitorComponent } from './programs-monitor/programs-monitor.component';\nimport { AdminGuard } from './classes/admin.guard';\nimport { ProgramGuard } from './classes/program.guard';\nimport { ToolsComponent } from './tools/tools.component';\nimport { CaseComponent } from './case/case.component';\nimport { ReportComponent } from './report/report.component';\nimport { PassResetComponent } from './auth/pass-reset/pass-reset.component';\nimport { ProfileUpdateComponent } from './auth/profile-update/profile-update.component';\n\nconst routes: Routes = [\n  { path: 'index', component: ProgramListComponent },\n  { path: 'outcomes', component: IndexComponent }, // done\n  { path: 'library', component: LibraryComponent },\n  { path: 'select-library', component: SelectLibraryComponent },\n  { path: 'report/:id', component: ReportComponent },\n  { path: 'tools', component: ToolsComponent },\n  { path: 'cases', component: CaseComponent },\n  { path: 'program', component: ProgramComponent },\n  { path: 'program/:id', canActivate: [ProgramGuard],  component: ProgramComponent },\n  // { path: 'scheme', component: SchemeComponent },\n  { path: 'auth', children:\n    [\n      { path: 'registration', component: RegistrationComponent },\n      { path: 'reset', component: PassResetComponent },\n      {path: 'profile', component: ProfileUpdateComponent},\n      { path: 'login', component: LoginComponent }, // done\n    ]},\n  { path: 'admin', canActivate: [AdminGuard], children:\n    [\n      { path: 'user-requests', component: UserRequestsComponent }, // done\n      { path: 'programs-monitor', component: ProgramsMonitorComponent },\n    ]},\n  { path: 'result/:id', component: ResultComponent }, // done\n  { path: '',   redirectTo: '/index', pathMatch: 'full' }, // redirect to `first-component`\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  isCollapsed = false;\n}\n","<app-header></app-header>\n<div class=\"body-wrapper\">\n    <router-outlet></router-outlet>\n</div>\n<app-footer></app-footer>\n\n<div class=\"cloud_form\" style=\"display: none;\">\n<img src=\"/newpion/static/pionfront/assets/img/cloud.png\">\n<p>\n    Задать вопрос специалисту\n</p>\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { DatePipe } from '@angular/common';\nimport {AutosizeModule} from 'ngx-autosize';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { HeaderComponent } from './_parts/header/header.component';\nimport { FooterComponent } from './_parts/footer/footer.component';\nimport { IndexComponent } from './index/index.component';\nimport { LibraryComponent } from './library/library.component';\nimport { ProgramComponent } from './program/program.component';\nimport { ProgramListComponent } from './program-list/program-list.component';\nimport { RegistrationComponent } from './auth/registration/registration.component';\nimport { ResultComponent } from './result/result.component';\nimport { HttpClientModule } from '@angular/common/http';\nimport { LoginComponent } from './auth/login/login.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { UserRequestsComponent } from './auth/user-requests/user-requests.component';\nimport { SelectLibraryComponent } from './select-library/select-library.component';\nimport { ProgramsMonitorComponent } from './programs-monitor/programs-monitor.component';\nimport { SchemeComponent } from './_parts/scheme/scheme.component';\nimport { PassResetComponent } from './auth/pass-reset/pass-reset.component';\nimport { TheadPlanComponent } from './program/thead-plan/thead-plan.component';\nimport { TheadFormComponent } from './program/thead-form/thead-form.component';\nimport { ToolsComponent } from './tools/tools.component';\nimport { CaseComponent } from './case/case.component'\nimport { ProfileUpdateComponent } from './auth/profile-update/profile-update.component';\nimport { ProgramCardComponent } from './program-list/program-card/program-card.component';\nimport { ProfileCardComponent } from './program-list/profile-card/profile-card.component';\nimport { ReportComponent } from './report/report.component';\nimport { TestComponent } from './test/test.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ShowModalComponent } from './show-modal/show-modal.component';\nimport { RefDirective } from './classes/ref.directive';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    HeaderComponent,\n    FooterComponent,\n    IndexComponent,\n    LibraryComponent,\n    ProgramComponent,\n    ProgramListComponent,\n    RegistrationComponent,\n    ResultComponent,\n    LoginComponent,\n    UserRequestsComponent,\n    SelectLibraryComponent,\n    ProgramsMonitorComponent,\n    SchemeComponent,\n    PassResetComponent,\n    TheadPlanComponent,\n    TheadFormComponent,\n    ToolsComponent,\n    CaseComponent,\n    ProfileUpdateComponent,\n    ProgramCardComponent,\n    ProfileCardComponent,\n    ReportComponent,\n    TestComponent,\n    ShowModalComponent,\n    RefDirective\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    HttpClientModule,\n    FormsModule,\n    ReactiveFormsModule,\n    BrowserAnimationsModule,\n    AutosizeModule\n  ],\n  providers: [DatePipe],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { TransportService } from 'src/app/services/transport.service';\nimport { Router } from '@angular/router';\nimport { HeaderComponent } from 'src/app/_parts/header/header.component';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n\n  constructor(private fb: FormBuilder,\n    public header: HeaderComponent,\n    public transport: TransportService,\n    private router: Router) { }\n\n  public loginForm = this.fb.group({\n    email: ['', Validators.required],\n    password: ['', Validators.required]\n  });\n\n  ngOnInit(): void {\n    this.transport.sendToHeader(false)\n  }\n\n  onSubmit() {\n    this.transport.getToken(this.loginForm.controls['email'].value, this.loginForm.controls['password'].value).then((data: any) => {\n      this.transport.sendToHeader(true)\n      this.router.navigate(['/']);\n    }, () => {\n      alert(\"Некорректные авторизационные данные!\");\n    });\n    \n  }\n\n  show_hide_password(){\n    let input = document.getElementById('password-input');\n    let target = document.getElementById('password-control');\n    if (input.getAttribute('type') == 'password') {\n      target.classList.add('view');\n      target.classList.remove('no_view');\n      input.setAttribute('type', 'text');\n    } else {\n      target.classList.add('no_view');\n      target.classList.remove('view');\n      input.setAttribute('type', 'password');\n    }\n  }\n}\n","<section class=\"block_registration\" alock=\"true\">\n    <div>\n        <h1>ВХОД</h1>\n        <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">E-mail:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"email\">\n            </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Пароль:</p>\n            </div>\n            <div class=\"col-4\">\n                <div class=\"password input_necessary\">\n                    <input type=\"password\" id=\"password-input\" name=\"password\" formControlName=\"password\" autocomplete=\"on\">\n                    <span class=\"password-control\" id=\"password-control\" (click)=\"show_hide_password()\"></span>\n                </div>\n            </div>\n        </div>\n\n        <p class=\"polit_block\">\n            <button type=\"submit\" [disabled]=\"!loginForm.valid\" class=\"add_button\">Войти</button> \n            <a class=\"registration_button\" routerLink=\"/auth/registration\"> Зарегистрироваться </a>\n            <a class=\"registration_button\" routerLink=\"/auth/reset\"> Сбросить пароль </a>\n        </p>\n        </form>\n    </div>\n</section>\n\n<div class=\"popap_rega dark_block\"  style=\"display: none;\">\n<div>\n    <p class=\"close_btn\" ><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n    <div class=\"text_block\">\n        <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n        <p>Вы не завершили регистрацию, введенные данные будут утеряны!</p>\n        <p id=\"access_link\" ><a href=\"\">Всё равно перейти</a></p>\n    </div>\n</div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { TransportService } from 'src/app/services/transport.service';\n\n@Component({\n  selector: 'app-pass-reset',\n  templateUrl: './pass-reset.component.html',\n  styleUrls: ['./pass-reset.component.scss']\n})\nexport class PassResetComponent {\n\n  constructor(private fb: FormBuilder,\n    private transport: TransportService,\n    private router: Router) { }\n\n  public loginForm = this.fb.group({\n    username: ['', Validators.required]\n  });\n\n  onSubmit() {\n    // let fd = new FormData()\n    // fd.append('username', this.loginForm.value.username)\n    this.transport.get('send-new-user-password/?username='+ this.loginForm.value.username, true).then((data: any) => {\n      alert(`Новый пароль отправлен на почту ${data.email}`)\n      this.router.navigate(['/auth/login']);\n    }).catch((error: any) => {\n      alert(\"Произошла ошибка\")\n      console.log(error);\n    });\n  }\n\n\n}\n","<section class=\"block_registration\" alock=\"true\">\n    <div>\n        <h1>СБРОС ПАРОЛЯ</h1>\n        <form [formGroup]=\"loginForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">E-mail:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"username\">\n            </div>\n        </div>\n\n        <p class=\"polit_block\">\n            <button type=\"submit\" [disabled]=\"!loginForm.valid\" class=\"add_button\">Сбросить пароль</button>\n            <a class=\"registration_button\" routerLink=\"/auth/login\"> Войти </a>\n        </p>\n        </form>\n    </div>\n</section>\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { UserRequest } from 'src/app/models/userrequest';\nimport { TransportService } from 'src/app/services/transport.service';\n\n@Component({\n  selector: 'app-profile-update',\n  templateUrl: './profile-update.component.html',\n  styleUrls: ['./profile-update.component.scss']\n})\nexport class ProfileUpdateComponent implements OnInit {\n  \n  constructor(private fb: FormBuilder,\n    private transport: TransportService,\n    private router: Router) { }\n\n// E-mail\n// Фамилия\n// Имя\n// Отчество\n// Регион\n// Организация\n// Веб-сайт или адрес организации<br>в социальных сетях\n// Должность\n  public profileUpdateForm = this.fb.group({\n    email: ['', Validators.required],\n    lastname: ['', Validators.required],\n    firstname: ['', Validators.required],\n    middlename: ['', Validators.required],\n    region: [''],\n    organization: ['', Validators.required],\n    website: ['', Validators.required],\n    position: ['', Validators.required]\n  });\n\n  currentUserRequest: UserRequest;\n  userRequests: UserRequest[];\n  toLoad: number = 1;\n\n  ngOnInit(): void {\n    this.transport.get(\"user-requests/\").then((userRequestsData) => {\n      this.userRequests = userRequestsData.results;\n      // console.log(this.userRequests)\n      for (var userRequest of this.userRequests) {\n        if (userRequest.current_user) {\n          this.currentUserRequest = userRequest;\n          console.log(this.currentUserRequest)\n          break;\n        }\n      }\n      \n      if (this.currentUserRequest) {\n        this.profileUpdateForm.controls['email'].setValue(this.currentUserRequest.email);\n        this.profileUpdateForm.controls['lastname'].setValue(this.currentUserRequest.lastname);\n        this.profileUpdateForm.controls['firstname'].setValue(this.currentUserRequest.firstname);\n        this.profileUpdateForm.controls['middlename'].setValue(this.currentUserRequest.middlename);\n        this.profileUpdateForm.controls['region'].setValue(this.currentUserRequest.region);\n        this.profileUpdateForm.controls['organization'].setValue(this.currentUserRequest.organization);\n        this.profileUpdateForm.controls['website'].setValue(this.currentUserRequest.website);\n        this.profileUpdateForm.controls['position'].setValue(this.currentUserRequest.position);\n      }\n      this.toLoad -= 1;\n    }).catch(error => console.log(error));\n  }\n\n  onSubmit() {\n    if (this.profileUpdateForm.valid) {\n      this.profileUpdateForm.value.id = Number(this.currentUserRequest.id);\n\n    this.transport.put(\"user-requests/\", this.currentUserRequest.id, this.profileUpdateForm.value).then((res: UserRequest) => {\n      this.router.navigate(['/index']);\n    }, err => {\n      alert(\"Произошла ошибка при сохранении\");\n      console.error(err);\n    });\n  }\n    else {\n      alert(\"Заполните все обязательные поля!\");\n    }\n  }\n}\n","<section class=\"block_registration\" alock=\"true\"  *ngIf=\"toLoad <= 0\">\n    <div>\n        <h1>ОБНОВЛЕНИЕ ДАННЫХ</h1>\n        <form  [formGroup]=\"profileUpdateForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">E-mail:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"email\">\n            </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Фамилия:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"lastname\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Имя:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"firstname\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Отчество:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"middlename\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Регион:</p>\n            </div>\n            <div class=\"col-4\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"region\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Организация:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"organization\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Веб-сайт или адрес организации<br>в социальных сетях:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"website\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Должность:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"position\">\n            </div>\n        </div>\n\n        <p class=\"polit_block\"><button type=\"submit\" class=\"add_button\">Обновить</button></p>\n        </form>\n    </div>\n</section>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { TransportService } from 'src/app/services/transport.service';\nimport { Router } from '@angular/router';\nimport { UserRequest } from 'src/app/models/userrequest';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-registration',\n  templateUrl: './registration.component.html',\n  styleUrls: ['./registration.component.scss']\n})\nexport class RegistrationComponent implements OnInit {\n\n  baseUrl = environment.baseUrl\n\n  constructor(private fb: FormBuilder,\n    private transport: TransportService,\n    private router: Router) { }\n\n// E-mail\n// Фамилия\n// Имя\n// Отчество\n// Регион\n// Организация\n// Веб-сайт или адрес организации<br>в социальных сетях\n// Должность\n// Пароль\n  public registrationForm = this.fb.group({\n    email: ['', Validators.required],\n    lastname: ['', Validators.required],\n    firstname: ['', Validators.required],\n    middlename: ['', Validators.required],\n    region: [''],\n    organization: ['', Validators.required],\n    website: ['', Validators.required],\n    position: ['', Validators.required],\n    password: ['', Validators.required]\n  });\n\n  ngOnInit(): void {\n  }\n\n  onSubmit() {\n    if (this.registrationForm.valid) {\n    this.transport.post(\"user-requests/\", this.registrationForm.value, true).then((res:UserRequest) => {\n      alert(\"Спасибо! Мы свяжемся с Вами по электронной почте!\");\n      this.router.navigate(['/']);\n    }, err => {\n      alert(\"Произошла ошибка при сохранении программы\");\n      console.error(err);\n    });\n  }\n  else {\n    alert(\"Заполните все поля!\");\n  }\n  }\n\n}\n","<section class=\"block_registration\" alock=\"true\">\n    <div>\n        <h1>РЕГИСТРАЦИЯ</h1>\n        <form  [formGroup]=\"registrationForm\" (ngSubmit)=\"onSubmit()\">\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">E-mail:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"email\">\n            </div>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Фамилия:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"lastname\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Имя:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"firstname\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Отчество:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"middlename\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Регион:</p>\n            </div>\n            <div class=\"col-4\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"region\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Организация:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"organization\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Веб-сайт или адрес организации<br>в социальных сетях:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"website\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Должность:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"position\">\n            </div>\n        </div>\n\n\n        <div class=\"row\">\n            <div class=\"col-5\">\n                <p class=\"desc_p\">Пароль:</p>\n            </div>\n            <div class=\"col-4 input_necessary\">\n                <input type=\"text\" name=\"user_name\" formControlName=\"password\">\n            </div>\n        </div>\n\n        <p class=\"polit_block\">Регистрируясь, я подтверждаю согласие с <a target=\"_blank\" href=\"{{baseUrl}}/custom/10\">пользовательским соглашением</a>.</p>\n        <p class=\"polit_block\">В настоящий момент зарегистрироваться могут только представители организаций, предоставляющие  социальные услуги семьям и детям.</p>\n        <p class=\"polit_block\"><button type=\"submit\" class=\"add_button\">Зарегистрироваться</button> <a class=\"login_button\" routerLink=\"/auth/login\">Войти</a></p>\n        </form>\n    </div>\n</section>\n\n<div class=\"popap_rega dark_block\"  style=\"display: none;\">\n<div>\n    <p class=\"close_btn\" ><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n    <div class=\"text_block\">\n        <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n        <p>Вы не завершили регистрацию, введенные данные будут утеряны!</p>\n        <p id=\"access_link\" ><a href=\"\">Всё равно перейти</a></p>\n    </div>\n</div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { TransportService } from 'src/app/services/transport.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { UserRequest } from 'src/app/models/userrequest';\n\n@Component({\n  selector: 'app-user-requests',\n  templateUrl: './user-requests.component.html',\n  styleUrls: ['./user-requests.component.scss']\n})\nexport class UserRequestsComponent implements OnInit {\n\n  constructor(private fb: FormBuilder,\n    public transport: TransportService,\n    public router: Router,\n    private activateRoute: ActivatedRoute) { }\n\n  userrequests: UserRequest[];\n\n  ngOnInit(): void {\n    this.transport.get(\"user-requests/\").then((userRequestsData) => {\n      this.userrequests = userRequestsData.results;\n      console.log(this.userrequests)\n    });\n  }\n\n  accept(userrequest:UserRequest) {\n    this.transport.post(\"user-requests/\" + userrequest.id + \"/accept/\", {}).then((res) => {\n      this.transport.get(\"user-requests/\").then((userRequestsData) => {\n        this.userrequests = userRequestsData.results;\n      });\n    }, (error) => {\n      console.error(error);\n    });\n  }\n  decline(userrequest:UserRequest) {\n    this.transport.post(\"user-requests/\" + userrequest.id + \"/decline/\", {}).then((res) => {\n      this.transport.get(\"user-requests/\").then((userRequestsData) => {\n        this.userrequests = userRequestsData.results;\n      });\n    }, (error) => {\n      console.error(error);\n    });\n  }\n}\n","<table>\n    <tr>\n        <td class=\"ur-table-cell\">email</td>\n        <td class=\"ur-table-cell\">lastname</td>\n        <td class=\"ur-table-cell\">firstname</td>\n        <td class=\"ur-table-cell\">middlename</td>\n        <td class=\"ur-table-cell\">region</td>\n        <td class=\"ur-table-cell\">organization</td>\n        <td class=\"ur-table-cell\">website</td>\n        <td class=\"ur-table-cell\">position</td>\n        <td class=\"ur-table-cell\">createdon</td>\n        <td class=\"ur-table-cell\">accept/decline</td>\n    </tr>\n    <tr *ngFor=\"let userrequest of userrequests\">\n        <td class=\"ur-table-cell\">{{userrequest.email}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.lastname}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.firstname}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.middlename}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.region}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.organization}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.website}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.position}}</td>\n        <td class=\"ur-table-cell\">{{userrequest.createdon|date:\"yyyy-MM-dd HH:mm:ss\"}}</td>\n        <td class=\"ur-table-cell\">\n            <ng-container *ngIf=\"!userrequest.verifiedon\">\n                <button (click)=\"accept(userrequest)\">accept</button>\n                <button (click)=\"decline(userrequest)\">decline</button>\n            </ng-container>\n            <ng-container *ngIf=\"userrequest.verifiedon\">\n                <span *ngIf=\"userrequest.user_ref\">Accepted</span>\n                <span *ngIf=\"!userrequest.user_ref\">Declined</span>\n            </ng-container>\n        </td>\n    </tr>\n</table>","<section class=\"block_form\">\n    <div>\n        <div class=\"row blank_li\">\n            <div class=\"col-5\" [ngClass]=\"{'deactive': displayMyLibrary}\" name=\"block_lib\"\n                (click)=\"selectMyLibrary(false)\">Библиотека кейсов</div>\n            <div *ngIf=\"authenticated\" class=\"col-5\" [ngClass]=\"{'deactive': !displayMyLibrary}\" name=\"block_my\"\n                (click)=\"selectMyLibrary(true)\">Моя библиотека кейсов</div>\n            <div class=\"col-2 add_block\" (click)=\"addForm($event)\" *ngIf=\"toLoad <= 0 && authenticated\">\n              Добавить\n            </div>\n        </div>\n\n        <ng-container *ngIf=\"toLoad <= 0; else load\">\n            <div class=\"content_block block_my lib\" *ngIf=\"displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                        <form [formGroup]=\"myFilterRoot\">\n                        <br>\n                        <label class=\"container_checked\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"> Верифицированные практики\n                            <input type=\"checkbox\" (change)=\"onMyVerifiedChange()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Тематическая группа:</b>\n                            <input type=\"checkbox\" formControlName=\"tg\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.tg\">\n                            <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{myCounter('thematic_group', tg)}})\n                                <input type=\"checkbox\" [value]=\"tg.id\"\n                                    (change)=\"onMyCheckChange('tgFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Целевые группы:</b>\n                            <input type=\"checkbox\" formControlName=\"target\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.target\">\n                            <ng-container *ngFor=\"let target of targets\">\n                                <label class=\"container_checked\" *ngIf=\"!target.parent_ref \">{{target.name}}({{myCounter('target', target)}})\n                                    <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onMyCheckChange('targetFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"target.checkedMy\">\n                                    <div *ngFor=\"let child of targets\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{myCounter('target', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onMyCheckChange('targetFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Практика:</b>\n                            <input type=\"checkbox\" formControlName=\"practice\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.practice\">\n                            <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{myCounter('practice', practice)}})\n                                <input type=\"checkbox\" [value]=\"practice.id\"\n                                    (change)=\"onMyCheckChange('practiceFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Элементы системы мониторинга и оценки в кейсе:</b>\n                            <input type=\"checkbox\" formControlName=\"me\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.me\">\n                            <label *ngFor=\"let me of monitoringElements\" class=\"container_checked\">{{me.name}}({{myCounter('monitoring_element', me)}})\n                                <input type=\"checkbox\" [value]=\"me.id\"\n                                    (change)=\"onMyCheckChange('meFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Виды деятельности организации в кейсе:</b>\n                            <input type=\"checkbox\" formControlName=\"oa\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.oa\">\n                            <label *ngFor=\"let oa of organizationActivities\" class=\"container_checked\">{{oa.name}}({{myCounter('organization_activity', oa)}})\n                                <input type=\"checkbox\" [value]=\"oa.id\"\n                                    (change)=\"onMyCheckChange('oaFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        </form>\n                    </div>\n                    <div class=\"col-7 block_method_search\">\n                        <!-- <input class=\"search_input\" placeholder=\"Поиск по ключевым словам\" ctype=\"text\" name=\"\"> -->\n                        <h2>кейсы:</h2>\n\n                        <div class=\"item_seatchMethod\" *ngFor=\"let caseItem of myCases\">\n                            <div class=\"name_block open_accessadd\" (click)=\"openAddPersonal(caseItem)\"\n                            [ngClass]=\"{'check': transport.user && (!caseItem.createdby || caseItem.createdby.id != transport.user.id) && caseItem.current_user_library, \n                            'checkMy': caseItem.createdby && transport.user && caseItem.createdby.id == transport.user.id && caseItem.current_user_library,\n                            'uncheck': !caseItem.current_user_library && (!caseItem.createdby || !transport.user || caseItem.createdby.id != transport.user.id), \n                            'uncheckMy': caseItem.createdby && transport.user && !caseItem.current_user_library && caseItem.createdby.id == transport.user.id}\">\n                                <img *ngIf=\"caseItem.verification_info\"\n                                    src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"><br>\n                                <p>{{caseItem.name}}</p>\n                            </div>\n                            <div (click)=\"openDetails(caseItem)\" class=\"more_info\">\n\n                                <p class=\"center\"><img src=\"/newpion/static/pionfront/assets/img/info_mini.png\">Подробнее</p>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"content_block block_lib\" *ngIf=\"!displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                        <br>\n                        <form [formGroup]=\"filterRoot\">\n                        <label class=\"container_checked\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"> Верифицированные практики\n                            <input type=\"checkbox\" (change)=\"onVerifiedChange()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Тематическая группа:</b>\n                            <input type=\"checkbox\" formControlName=\"tg\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.tg\">\n                            <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{counter('thematic_group', tg)}})\n                                <input type=\"checkbox\" [value]=\"tg.id\"\n                                    (change)=\"onCheckChange('tgFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Целевые группы:</b>\n                            <input type=\"checkbox\" formControlName=\"target\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.target\">\n                            <ng-container *ngFor=\"let target of targets\">\n                                <label class=\"container_checked\" *ngIf=\"!target.parent_ref\">{{target.name}}({{counter('target', target)}})\n                                    <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"target.checked\">\n                                    <div *ngFor=\"let child of targets\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{counter('target', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Практика:</b>\n                            <input type=\"checkbox\" formControlName=\"practice\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.practice\">\n                            <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{counter('practice', practice)}})\n                                <input type=\"checkbox\" [value]=\"practice.id\"\n                                    (change)=\"onCheckChange('practiceFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Элементы системы мониторинга и оценки в кейсе:</b>\n                            <input type=\"checkbox\" formControlName=\"me\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.me\">\n                            <label *ngFor=\"let me of monitoringElements\" class=\"container_checked\">{{me.name}}({{counter('monitoring_element', me)}})\n                                <input type=\"checkbox\" [value]=\"me.id\"\n                                    (change)=\"onCheckChange('meFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Виды деятельности организации в кейсе:</b>\n                            <input type=\"checkbox\" formControlName=\"oa\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.oa\">\n                            <label *ngFor=\"let oa of organizationActivities\" class=\"container_checked\">{{oa.name}}({{counter('organization_activity', oa)}})\n                                <input type=\"checkbox\" [value]=\"oa.id\"\n                                    (change)=\"onCheckChange('oaFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        </form>\n                    </div>\n                    <div class=\"col-7 block_method_search\">\n                        <!-- <input class=\"search_input\" placeholder=\"Поиск по ключевым словам\" ctype=\"text\" name=\"\"> -->\n                        <h2>кейсы:</h2>\n\n                        <div class=\"item_seatchMethod\" *ngFor=\"let caseItem of cases\">\n                            <div class=\"name_block open_accessadd\" (click)=\"openAddPersonal(caseItem)\"\n                            [ngClass]=\"{'check': transport.user && (!caseItem.createdby || caseItem.createdby.id != transport.user.id) && caseItem.current_user_library, \n                            'checkMy': caseItem.createdby && transport.user && caseItem.createdby.id == transport.user.id && caseItem.current_user_library,\n                            'uncheck': !caseItem.current_user_library && (!caseItem.createdby || !transport.user || caseItem.createdby.id != transport.user.id), \n                            'uncheckMy': caseItem.createdby && transport.user && !caseItem.current_user_library && caseItem.createdby.id == transport.user.id}\">\n                                <img *ngIf=\"caseItem.verification_info\"\n                                    src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"><br>\n                                <p>{{caseItem.name}}</p>\n                            </div>\n                            <div (click)=\"openDetails(caseItem)\" class=\"more_info\">\n\n                                <p class=\"center\"><img src=\"/newpion/static/pionfront/assets/img/info_mini.png\">Подробнее</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n        <ng-template #load>\n            <div class=\"content_block\">\n                <h4 class=\"center\">{{status}}</h4>\n            </div>\n        </ng-template>\n    </div>\n</section>\n\n\n<div class=\"popap_kontst dark_block blue_head big_form\" *ngIf=\"formPage == 1\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">{{createCaseForm.value.isNew ? 'Добавление нового' : 'Редактирование'}} кейса</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"createCaseForm\">\n                <p class=\"line_descSel\">Название кейса:</p>\n                <textarea class=\"text_item\" formControlName=\"name\"></textarea>\n\n                <p class=\"line_descSel\">Название организации:</p>\n                <textarea class=\"text_item\" formControlName=\"organization\"></textarea>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тип практики <span>(1)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Тип практики - нужен текст от Ольги </div> -->\n                </div>\n\n                <select class=\"big_sellect\" formControlName=\"practice_ref\"> \n                    <option value=\"\" disabled>Выберите тип практики</option>\n                    <option *ngFor=\"let practice of practices\" [value]=\"practice.id\">{{practice.name}}</option>\n                </select>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тематическая группа <span>(2)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Тематическая группа - нужен текст от Ольги </div> -->\n                </div>              \n                <select class=\"big_sellect\" formControlName=\"thematic_group_ref\"> \n                    <option value=\"\" disabled>Выберите тематическую группу</option>\n                    <option *ngFor=\"let group of thematicGroups\" [value]=\"group.id\">{{group.name}}</option>\n                </select>\n                \n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Целевые группы <span>(3)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Целевая группа - нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\">\n                    <div class=\"row\" formArrayName=\"target_refs\" style=\"text-align: left;\">\n                        <div class=\"col-12\">\n                            <ng-container *ngFor=\"let target of targets; index as i\"> \n                                <label class=\"container_checked\" style=\"text-align: left;\" *ngIf=\"!target.parent_ref\">\n                                    {{target.name}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"createCaseForm.value.target_refs[i] && !targets[i].parent_ref\">\n                                    <div *ngFor=\"let child of targets; index as j\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == targets[i].id\">\n                                            <label class=\"container_checked\" style=\"text-align: left;\">\n                                                {{child.name}}\n                                                <input type=\"checkbox\" [formControlName]=\"j\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Элементы системы мониторинга и оценки <span>(4)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Текст от Ольги  </div> -->\n                </div>\n\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"monitoring_element_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let me of monitoringElements; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{me.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Виды деятельности (активностей) организации <span>(5)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Текст от Ольги </div> -->\n                </div>\n\n                \n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"organization_activity_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let oa of organizationActivities; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{oa.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                \n                <div class=\"block_year\">\n                    <p class=\"line_descSel\">Сведения о верификации практики, в рамках которой реализовывалась программа:</p>\n                    <p class=\"date_list\">\n                        Прошла верификацию в <input type=\"number\" formControlName=\"verification_info\"> г.\n                    </p>\n                </div>\n\n                <p class=\"line_descSel\">Регламентированность практики:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_regularity\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Обоснованность практики:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_validity\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Достижение социальных результатов:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_outcome_accessibility\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Обоснованность данных о социальных результатах:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_outcome_validity\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Cсылка на кейс:</p>\n                <textarea class=\"text_item\" formControlName=\"url\"></textarea>\n\n                <div class=\"row class_btns\">\n                    <div class=\"col-12\">\n                        <input type=\"file\" style=\"display: none;\" #file_input (change)=\"caseFileUpload($event)\">\n                        <button (click)=\"triggerFile()\" class=\"center\"\n                        [ngClass]=\"{'selected_file': file || (currentCase && currentCase.case_file), 'no_file': !file && !(currentCase && currentCase.case_file)}\"\n                        >Загрузить кейс </button>\n                    </div>\n                </div>\n\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"onSubmit($event, true)\" [disabled]=\"createCaseForm.disabled || createCaseForm.invalid\">Добавить отчёт</button>\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"onSubmit($event, false)\" [disabled]=\"createCaseForm.disabled || createCaseForm.invalid\">Сохранить без отчёта</button>\n                <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\" *ngIf=\"!createCaseForm.value.isNew\"><i>Уже опубликованный отчёт вы можете редактировать на странице отчёта</i></p>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_kontst dark_block blue_head big_form\" *ngIf=\"formPage == 2\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">Добавление отчёта к кейсу</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"addReportForm\">\n                <p class=\"line_descSel\">Название кейса:</p>\n                <br><span class=\"font_500\">\n                    {{currentCase.name}}\n                </span>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Оценка внешняя или внутренняя <span>(1)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <select class=\"big_sellect\" formControlName=\"type\"> \n                    <option value=\"\" disabled>Выберите</option>\n                    <option value=\"Внешняя\">Внешняя</option>\n                    <option value=\"Внутренняя\">Внутренняя</option>\n                </select>\n              \n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Вид оценки <span>(2)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <select class=\"big_sellect\" formControlName=\"evaluation_type_ref\" (change)=\"changeEvType()\"> \n                    <option value=\"\" disabled>Выберите вид оценки</option>\n                    <option *ngFor=\"let et of evaluationTypes\" [value]=\"et.id\">{{et.name}}</option>\n                </select>\n                <ng-container *ngIf=\"otherEvType\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_evaluation_type\"></textarea>\n                </ng-container>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Ключевые вопросы оценки <span>(3)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <textarea class=\"text_item\" formControlName=\"key_questions\"></textarea>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Социальный результат <span>(4)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"outcome_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let outcome of outcomes; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{outcome.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                \n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Другие результаты <span>(5)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <textarea class=\"text_item\" formControlName=\"other_results\"></textarea>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Методы <span>(6)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\">\n                    <div class=\"row\" formArrayName=\"method_refs\" style=\"text-align: left;\">\n                        <div class=\"col-12\">\n                            <ng-container *ngFor=\"let method of methods; index as i\"> \n                                <label class=\"container_checked\" style=\"text-align: left;\" *ngIf=\"!method.parent_ref\">\n                                    {{method.name}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\" (change)=\"changeMethod()\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"addReportForm.value.method_refs[i] && !methods[i].parent_ref\">\n                                    <div *ngFor=\"let child of methods; index as j\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == methods[i].id\">\n                                            <label class=\"container_checked\" style=\"text-align: left;\">\n                                                {{child.name}}\n                                                <input type=\"checkbox\" [formControlName]=\"j\" (change)=\"changeMethod()\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"otherMethod\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_method\"></textarea>\n                </ng-container>\n\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Метод анализа данных <span>(7)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"analysis_method_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let am of analysisMethods; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{am.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\" (change)=\"changeAnMethod()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"otherAnMethod\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_analysis_method\"></textarea>\n                </ng-container>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Вид представления данных в отчете <span>(8)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"representation_method_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let rm of representationMethods; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{rm.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\" (change)=\"changeRepMethod()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"otherRepMethod\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_representation_method\"></textarea>\n                </ng-container>\n\n                <div class=\"row class_btns\">\n                    <div class=\"col-12\">\n                        <input type=\"file\" style=\"display: none;\" #file_rep (change)=\"repFileUpload($event)\">\n                        <button (click)=\"triggerRepFile()\" class=\"center\"\n                        [ngClass]=\"{'selected_file': repFile, 'no_file': !repFile}\"\n                        >Загрузить отчёт </button>\n                    </div>\n                </div>\n\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"methodsSubmit(true, $event)\" [disabled]=\"addReportForm.disabled || addReportForm.invalid\">Добавить ещё отчёт</button>\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"methodsSubmit(false, $event)\" [disabled]=\"addReportForm.disabled || addReportForm.invalid\">Сохранить</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"formPage == 3\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">Кейс</p>\n        </div>\n        <div class=\"text_block\">\n            <form class=\"ng-untouched ng-pristine ng-invalid block_sendfor\">\n                <div class=\"midle_text\">\n                    <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n                    <p>Кейс успешно добавлен. Опубликовать в общей библиотеке?</p>\n                </div>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"addToAllLibrary($event)\">Да</button>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"closeForm()\">Нет</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_projInfo dark_block blue_head\" *ngIf=\"displayDetails\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeDetails()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Кейс</p>\n        </div>\n        <div class=\"text_block\">\n            <p>Название кейса:<br><strong><span class=\"project_name\">{{currentCase.name}}</span></strong></p>\n            <p>Организация:<br><strong><span class=\"organization\">{{currentCase.organization}}</span></strong></p>\n            <p>Тематическая группа:<br><span class=\"font_500\" *ngIf=\"currentCase.thematic_group_ref\">\n                {{currentCase.thematic_group_ref.name}}\n            </span></p>\n            <p>Целевая группа:<br>\n                <span *ngFor=\"let target of targets\">\n                <span class=\"font_500\" *ngIf=\"findTarget(target)\">\n                    {{target.parent_ref ? '➤ ': ''}}{{target.name}}\n                <br></span>\n                </span></p>\n            <p>Тип практики:<span *ngIf=\"currentCase.practice_ref\"><br><span\n                        class=\"type font_500\">{{currentCase.practice_ref.name}}</span></span></p>\n            \n            <p>Сведения о верификации практики, в рамках которой реализовывалась программа:<br><span\n                    class=\"info font_500\">{{currentCase.verification_info}}</span></p>\n            <p class=\"no_bottom\">Уровни доказанности:</p>\n            <div class=\"level font_500\">\n                <p>Регламентированность практики: <strong>{{currentCase.verification_level_regularity}}</strong></p>\n                <p>Обоснованность практики: <strong>{{currentCase.verification_level_validity}}</strong></p>\n                <p>Достижение социальных результатов:\n                    <strong>{{currentCase.verification_level_outcome_accessibility}}</strong></p>\n                <p>Обоснованность данных о социальных результатах:\n                    <strong>{{currentCase.verification_level_outcome_validity}}</strong></p>\n            </div>\n\n            <p>Виды деятельности (активностей) организации, представленные в кейсе:\n                <span *ngFor=\"let oa of currentCase.organization_activity_refs\"><br><span\n                class=\"group font_500\">{{oa.name}}</span></span></p>\n\n            <p>Элементы системы мониторинга и оценки, представленные в кейсе:\n                <span *ngFor=\"let me of currentCase.monitoring_element_refs\"><br><span\n                class=\"group font_500\">{{me.name}}</span></span></p>\n\n            <div class=\"row\" *ngIf=\"currentCase.case_file && authenticated\">\n                <div class=\"col-12\">\n                    <button (click)=\"downloadFile(currentCase.case_file)\" class=\"add_button\">\n                        <img src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">Открыть кейс\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"currentCase.url\">\n                <div class=\"col-12\">\n                    <button (click)=\"downloadFile(currentCase.url)\" class=\"add_button\">\n                        <img src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">Открыть ссылку на кейс\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"findReports().length\">\n                <div class=\"col-12\" *ngFor=\"let report of findReports(); index as i\">\n                    <button (click)=\"openReport(report.id)\" class=\"add_button\">\n                        <img src=\"/newpion/static/pionfront/assets/img/arrow_open.png\">Открыть отчёт {{i+1}}\n                    </button>\n                </div>\n            </div>\n\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_accessadd dark_block\" *ngIf=\"displayAddPersonal\">\n    <div>\n        <p (click)=\"closeAddPersonal()\" class=\"close_btn\"><img\n                src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>Включить в личную библиотеку инструментов{{currentCase.createdby && currentCase.createdby.id == transport.user.id ? ' или редактировать' : ''}}?</p>\n            <button (click)=\"addToLibrary()\" style=\"width: auto;\" class=\"add_button\">Включить</button>\n            <button *ngIf=\"currentCase.createdby && currentCase.createdby.id == transport.user.id\" (click)=\"editForm($event)\" style=\"width: auto;\" class=\"add_button\">Редактировать</button>\n        </div>\n    </div>\n</div>\n<div class=\"popap_accessadd dark_block\" *ngIf=\"displayRemovePersonal\">\n    <div>\n        <p (click)=\"closeAddPersonal()\" class=\"close_btn\"><img\n                src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>Исключить из личной библиотеки инструментов{{currentCase.createdby && currentCase.createdby.id == transport.user.id ? ' или редактировать' : ''}}?</p>\n            <button (click)=\"removeFromLibrary()\" style=\"width: auto;\" class=\"add_button\">Исключить</button>\n            <button *ngIf=\"currentCase.createdby && currentCase.createdby.id == transport.user.id\" (click)=\"editForm($event)\" style=\"width: auto;\" class=\"add_button\">Редактировать</button>\n        </div>\n    </div>\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AnalysisMethod } from '../models/analysismethod';\nimport { Case } from '../models/case';\nimport { EvaluationReport } from '../models/evaluationreport';\nimport { EvaluationType } from '../models/evaluationtype';\nimport { Method } from '../models/method';\nimport { MonitoringElement } from '../models/monitoringelement';\nimport { OrganizationActivity } from '../models/organizationactivity';\nimport { Outcome } from '../models/outcome';\nimport { Practice } from '../models/practice';\nimport { RepresentationMethod } from '../models/representationmethod';\nimport { Target } from '../models/target';\nimport { ThematicGroup } from '../models/thematicgroup';\nimport { TransportService } from '../services/transport.service';\n\n@Component({\n  selector: 'app-case',\n  templateUrl: './case.component.html',\n  styleUrls: ['./case.component.scss']\n})\nexport class CaseComponent implements OnInit {\n\n  status: string = 'ЗАГРУЗКА...'\n  toLoad = 6\n  displayMyLibrary = false\n  authenticated: boolean\n  targets: Target[];\n  cases: Case[];\n  allCases: Case[];\n  myCases: Case[];\n  allMyCases: Case[];\n  practices: Practice[]\n  thematicGroups: ThematicGroup[]\n  monitoringElements: MonitoringElement[]\n  organizationActivities: OrganizationActivity[]\n  createCaseForm: FormGroup\n  addReportForm: FormGroup\n  formPage: number = 0\n  file: File\n  repFile: File\n  newParentRef: number\n\n  evaluationTypes: EvaluationType[]\n  outcomes: Outcome[]\n  methods: Method[]\n  analysisMethods: AnalysisMethod[]\n  representationMethods: RepresentationMethod[]\n\n  myVerified: boolean = false;\n  verified: boolean = false;\n\n  displayDetails: boolean\n  currentCase: Case\n  evaluationReports: EvaluationReport[]\n\n  otherRepMethod: boolean\n  otherAnMethod: boolean\n  otherMethod: boolean\n  otherEvType: boolean\n  displayAddPersonal: boolean\n  displayRemovePersonal: boolean\n\n  @ViewChild('file_input') file_input\n  @ViewChild('file_rep') file_rep\n\n  constructor(public transport: TransportService, \n    public fb: FormBuilder,\n    private activateRoute: ActivatedRoute,\n    public router: Router) { }\n\n  public filterForm = this.fb.group({\n    targetFilters: new FormArray([]),\n    practiceFilters: new FormArray([]),\n    meFilters: new FormArray([]),\n    oaFilters: new FormArray([]),\n    tgFilters: new FormArray([])\n  });\n\n  public myFilterForm = this.fb.group({\n    targetFilters: new FormArray([]),\n    practiceFilters: new FormArray([]),\n    meFilters: new FormArray([]),\n    oaFilters: new FormArray([]),\n    tgFilters: new FormArray([])\n  });\n\n  public filterRoot = this.fb.group({\n    target: new FormControl(false),\n    practice: new FormControl(false),\n    me: new FormControl(false),\n    oa:  new FormControl(false),\n    tg: new FormControl(false),\n  });\n\n  public myFilterRoot = this.fb.group({\n    target: new FormControl(false),\n    practice: new FormControl(false),\n    me: new FormControl(false),\n    oa: new FormControl(false),\n    tg: new FormControl(false),\n  });\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n    else \n      this.authenticated = false;\n\n      this.activateRoute.queryParamMap.subscribe(queryParams => {\n        let id = queryParams.get('id');\n        if (id) this.transport.get(\"cases/\"+id+\"/\").then(model => {\n          this.openDetails(model)\n        }).catch(e => console.log(e))\n      })\n\n      this.transport.get(\"targets/\", !this.authenticated).then((targetsData) => {\n        const targets = targetsData.results;\n        const children = targets.filter(m => typeof m.parent_ref == 'number').reverse()\n        for (let target of children) {\n          let child_index = targets.indexOf(targets.find(m => m.id == target.id))\n          targets.splice(child_index, 1)\n          let parent_index = targets.indexOf(targets.find(m => m.id == target.parent_ref))\n          targets[parent_index].has_children = true\n          targets.splice(parent_index + 1, 0, target)\n        }\n        this.targets = targets\n        this.toLoad -= 1;\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n\n    this.transport.get(\"practices/\", !this.authenticated).then((practicesData) => {\n      this.practices = practicesData.results;    \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"cases/\", !this.authenticated).then((casesData) => {\n      this.cases = casesData.results;\n      this.allCases = casesData.results;     \n      this.sortCases() \n      this.toLoad -= 1;\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"thematic-groups/\", !this.authenticated).then((thematicGroupsData) => {\n      this.thematicGroups = thematicGroupsData.results;    \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"monitoring-elements/\", !this.authenticated).then((monitoringElementsData) => {\n      this.monitoringElements = monitoringElementsData.results;\n      this.toLoad -= 1;\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"organization-activities/\", !this.authenticated).then((organizationActivitiesData) => {\n      this.organizationActivities = organizationActivitiesData.results;    \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"analysis-methods/\", !this.authenticated).then((data) => {\n      this.analysisMethods = data.results;    \n    })\n\n    this.transport.get(\"evaluation-types/\", !this.authenticated).then((data) => {\n      this.evaluationTypes = data.results;    \n    })\n\n    this.transport.get(\"representation-methods/\", !this.authenticated).then((data) => {\n      this.representationMethods= data.results;    \n    })\n\n    this.transport.get(\"methods/\", !this.authenticated).then((data) => {\n      this.methods = data.results;    \n    })\n\n    this.transport.get(\"outcomes/\", !this.authenticated).then((data) => {\n      this.outcomes = data.results;    \n    })\n\n    this.transport.get(\"evaluation-reports/\", !this.authenticated).then((data) => {\n      this.evaluationReports = data.results;    \n    })\n  }\n\n  selectMyLibrary(my: boolean) {\n    this.displayMyLibrary = my\n    this.cases = this.allCases\n    this.filterForm.reset()\n    this.myFilterForm.reset()\n    this.verified = false\n    this.myVerified = false\n    this.sortCases()\n  }\n  openDetails(caseItem: Case) {\n    this.router.navigate([], {queryParams: {id: caseItem.id}})\n    this.currentCase = caseItem\n    this.displayDetails = true\n  }\n  closeDetails() {\n    this.displayDetails = false\n    this.currentCase = null\n    this.router.navigate([])\n  }\n  downloadFile(filePath: string) {\n    let link = document.createElement(\"a\");\n    link.download = \"filename\";\n    link.href = filePath;\n    link.click();\n    link.remove();\n  }\n  addToLibrary() {\n    this.transport.post(\"cases/\" + this.currentCase.id + \"/add_to_library/\", {}).then((addToLibraryResult) => {\n      this.cases.find(c => c.id == this.currentCase.id).current_user_library = true;\n      this.sortCases() \n    }, (error) => {});\n    this.closeAddPersonal()\n  }\n  removeFromLibrary() {\n    this.transport.post(\"cases/\" + this.currentCase.id + \"/remove_from_library/\", {}).then((addToLibraryResult) => {\n      this.cases.find(c => c.id == this.currentCase.id).current_user_library = false;\n      this.sortCases() \n    }, (error) => {});\n    this.closeAddPersonal()\n  }\n  closeAddPersonal() {\n    this.displayAddPersonal = false;\n    this.displayRemovePersonal = false;\n  }\n  openAddPersonal(model: Case) {\n    if (!model.current_user_library && this.authenticated) {\n      this.currentCase= model;\n      this.displayAddPersonal = true;\n    }\n    if (model.current_user_library && this.authenticated) {\n      this.currentCase = model;\n      this.displayRemovePersonal = true;\n    }\n  }\n  closeForm() {\n    this.formPage = 0\n  }\n  addForm(event) {\n    event.preventDefault()\n\n    const tFormControls = () => {\n      let arr: FormControl[] = []\n      for (let target of this.targets) arr.push(new FormControl(false))\n      return arr\n    }\n    const oaFormControls = () => {\n      let arr: FormControl[] = []\n      for (let oa of this.organizationActivities) arr.push(new FormControl(false))\n      return arr\n    }\n    const meFormControls = () => {\n      let arr: FormControl[] = []\n      for (let me of this.monitoringElements) arr.push(new FormControl(false))\n      return arr\n    }\n    this.createCaseForm = new FormGroup({\n      name: new FormControl('', Validators.required), //\n      organization: new FormControl('', Validators.required), //\n      practice_ref: new FormControl('', Validators.required), //\n      target_refs: new FormArray(tFormControls()), //\n      thematic_group_ref: new FormControl('', Validators.required),//\n      verification_info: new FormControl(''),//\n      verification_level_regularity: new FormControl(''),//\n      verification_level_validity: new FormControl(''),//\n      verification_level_outcome_accessibility: new FormControl(''),//\n      verification_level_outcome_validity: new FormControl(''),//\n      organization_activity_refs: new FormArray(oaFormControls()),\n      monitoring_element_refs: new FormArray(meFormControls()),\n      url: new FormControl(''),\n      isNew: new FormControl(true)\n    })\n    this.formPage = 1\n  }\n\n  editForm(event) {\n    event.preventDefault()\n\n    const tFormControls = () => {\n      let arr: FormControl[] = []\n      for (let target of this.targets) arr.push(new FormControl(this.currentCase.target_refs.find(el => +el.id == +target.id) ? true : false))\n      return arr\n    }\n\n    const oaFormControls = () => {\n      let arr: FormControl[] = []\n      for (let oa of this.organizationActivities) arr.push(new FormControl(this.currentCase.organization_activity_refs.find(el => +el.id == +oa.id) ? true : false))\n      return arr\n    }\n    const meFormControls = () => {\n      let arr: FormControl[] = []\n      for (let me of this.monitoringElements) arr.push(new FormControl(this.currentCase.monitoring_element_refs.find(el => +el.id == +me.id) ? true : false))\n      return arr\n    }\n\n    this.createCaseForm = new FormGroup({\n      name: new FormControl(this.currentCase.name, Validators.required), //\n      organization: new FormControl(this.currentCase.organization, Validators.required), //\n      practice_ref: new FormControl(this.currentCase.practice_ref.id, Validators.required), //\n      target_refs: new FormArray(tFormControls()), //\n      thematic_group_ref: new FormControl(this.currentCase.thematic_group_ref.id, Validators.required),//\n      verification_info: new FormControl(this.currentCase.verification_info),//\n      verification_level_regularity: new FormControl(this.currentCase.verification_level_regularity),//\n      verification_level_validity: new FormControl(this.currentCase.verification_level_validity),//\n      verification_level_outcome_accessibility: new FormControl(this.currentCase.verification_level_outcome_accessibility),//\n      verification_level_outcome_validity: new FormControl(this.currentCase.verification_level_outcome_validity),//\n      organization_activity_refs: new FormArray(oaFormControls()),\n      monitoring_element_refs: new FormArray(meFormControls()), //monitoring_element_refs\n      url: new FormControl(this.currentCase.url),\n      isNew: new FormControl(false)\n    })\n    this.closeAddPersonal()\n    this.formPage = 1\n  }\n\n  changeMethod() {\n    let valArr = this.addReportForm.value.method_refs\n    for (let i = 0; i < this.methods.length; i++) {\n      if (valArr[i]) {\n        let name = this.methods[i].name\n        if (name.trim().toLocaleLowerCase() == \"другое\") {\n          this.otherMethod = true\n          this.newParentRef = this.methods[i].parent_ref\n          return\n        }\n      }\n    }\n    this.otherMethod = false\n    this.newParentRef = null\n    this.addReportForm.patchValue({other_method: ''})\n  }\n  changeRepMethod() {\n    let valArr = this.addReportForm.value.representation_method_refs\n    for (let i = 0; i < this.representationMethods.length; i++) {\n      if (valArr[i]) {\n        let name = this.representationMethods[i].name\n        if (name.trim().toLocaleLowerCase() == \"другое\") {\n          this.otherRepMethod = true\n          return\n        }\n      }\n    }\n    this.otherRepMethod = false\n    this.addReportForm.patchValue({other_representation_method: ''})\n  }\n  changeAnMethod() {\n    let valArr = this.addReportForm.value.analysis_method_refs\n    for (let i = 0; i < this.analysisMethods.length; i++) {\n      if (valArr[i]) {\n        let name = this.analysisMethods[i].name\n        if (name.trim().toLocaleLowerCase() == \"другое\") {\n          this.otherAnMethod = true\n          return\n        }\n      }\n    }\n    this.otherAnMethod = false\n    this.addReportForm.patchValue({other_analysis_method: ''})\n  }\n  changeEvType() {\n    let id = this.addReportForm.value.evaluation_type_ref\n    let name = this.evaluationTypes.find(el => el.id == id).name\n    if (name.trim().toLocaleLowerCase() == \"другое\") {\n      this.otherEvType = true\n      return\n    }\n    this.otherEvType = false\n    this.addReportForm.patchValue({other_evaluation_type: ''})\n  }\n  addToAllLibrary(event) { \n    event.preventDefault()\n    this.transport.post(\"cases/\" + this.currentCase.id + \"/switchData_library/\", {}).then(\n    (addToLibraryResult) => {\n      alert('Запрос успешно отправлен!')\n      this.formPage = 0\n    }, \n    (error) => {\n      console.log(error)\n      alert('Ошибка. Не удалось отправить запрос')\n      this.formPage = 0\n    })\n  }\n  sortCases() {\n    this.allMyCases = [];\n      for (var item in this.allCases) {\n        if (this.allCases[item].current_user_library)\n          this.allMyCases.push(this.allCases[item]);\n        }\n      this.myCases = this.allMyCases; \n  }\n  onSubmit(event, evRep?: boolean) { \n    event.preventDefault() \n    const values: any = {...this.createCaseForm.value}\n\n    const boolToObjT = () => {\n      let resNum: any[] = []\n      let valArr = this.createCaseForm.value.target_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && !this.targets[i].parent_ref) resNum.push(+this.targets[i].id)\n        else if (valArr[i] && this.targets[i].parent_ref) {\n          const parent_index = this.targets.indexOf(this.targets.find(item => item.id == this.targets[i].parent_ref))\n          if (valArr[parent_index]) resNum.push(+this.targets[i].id)\n        }\n      }\n      return resNum\n    }\n\n    const boolToObjOA = () => {\n      let resNum: any[] = []\n      let valArr = this.createCaseForm.value.organization_activity_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.organizationActivities[i].id)\n      }\n      return resNum\n    }\n\n    const boolToObjME = () => {\n      let resNum: any[] = []\n      let valArr = this.createCaseForm.value.monitoring_element_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.monitoringElements[i].id) \n      }\n      return resNum\n    }\n\n    values.monitoring_element_refs = boolToObjME()\n    values.organization_activity_refs = boolToObjOA()\n    values.target_refs = boolToObjT()\n    values.thematic_group_ref = +this.createCaseForm.value.thematic_group_ref\n    values.practice_ref =  +this.createCaseForm.value.practice_ref\n    delete values.isNew\n\n    if (this.createCaseForm.value.isNew) this.post(values, evRep)\n    if (!this.createCaseForm.value.isNew) this.update(values, evRep)\n  }\n\n  post(values, evRep) {\n    this.transport.post(\"cases/\", values).then((res) => {\n      this.allCases.push(res)\n      this.currentCase = res\n      this.addToLibrary()\n      if (this.file) {\n        let fd = new FormData()\n        fd.append('case_file', this.file, this.file.name)\n        this.transport.patch(\"cases/\", res.id, fd).then((resFile) => {\n          this.currentCase = {...this.currentCase, ...resFile}\n          if (evRep) this.addReport()\n          else this.formPage = 3\n        }).catch(error => {\n          console.log(error)\n          if (evRep) this.addReport()\n          else this.formPage = 3\n        }).finally(() => this.file = null);\n      } else if (evRep) this.addReport()\n      else this.formPage = 3\n      this.sortCases()\n    }).catch(error => {\n      console.log(error)\n      this.formPage = 0\n    }); \n  }\n\n  update(values, evRep) {\n    let saveArr = []\n    for (let field in values) {\n      if (['monitoring_element_refs', 'organization_activity_refs', 'target_refs'].includes(field)) {\n        if (this.currentCase[field].length != values[field].length) saveArr.push(field)\n        else for (let item of this.currentCase[field]) {\n          if (!values[field].includes(+item.id)) {\n            saveArr.push(field); \n            break\n          }\n        }\n      } \n      else if (['practice_ref', 'thematic_group_ref'].includes(field)) {\n        if (+this.currentCase[field].id != +values[field]) saveArr.push(field)\n      } \n      else if (this.currentCase[field] != values[field]) saveArr.push(field)\n    }\n    \n    for (let field in values) \n      if (!saveArr.includes(field)) values[field]=null\n\n    this.transport.post(\"case-change-requests/\"+ this.currentCase.id + '/upload_data/', values).then((res) => {\n      if (res.message == 'edit') {\n        this.currentCase = {...this.currentCase, ...res.result} \n\n        let index = this.allCases.indexOf(this.allCases.find(el => el.id == this.currentCase.id))\n        if (index) this.allCases[index] = this.currentCase\n        if (this.file) {\n          let fd = new FormData()\n          fd.append('case_file', this.file, this.file.name)\n          this.transport.patch(\"cases/\", String(this.currentCase.id), fd).then((resFile) => {\n            this.file = null\n            this.currentCase = {...this.currentCase, ...resFile}\n            let index = this.allCases.indexOf(this.allCases.find(el => el.id == this.currentCase.id))\n            if (index) this.allCases[index] = this.currentCase\n          }).catch(error => {\n            this.file = null\n            console.log(error)\n            alert(\"Инсрумент сохранён, ошибка при загрузке файла\")\n          });\n        }\n        if (evRep) this.addReport()\n        else this.formPage = 3\n\n      } else if (res.message == 'request') {\n        if (!this.file) alert(\"Запрос на редактирование успешно отправлен\")\n        else if (this.file) {\n          let fd = new FormData()\n          fd.append('tool_file', this.file, this.file.name)\n          this.transport.patch(\"case-change-requests/\", String(this.currentCase.id), fd).then((resFile) => {\n            this.file = null\n            alert(\"Запрос на редактирование успешно отправлен\")\n          }).catch(error => {\n            this.file = null\n            console.log(error)\n            alert(\"Запрос на редактирование успешно отправлен, ошибка при загрузке файла\")\n          });\n        }\n        if (evRep) this.addReport()\n        else this.formPage = 3\n      } \n    }).catch(error => {\n      console.log(error)\n      alert(\"Произошла неизвестная ошибка\")\n      this.closeForm()\n    });   \n  }\n  openReport(id) {\n    this.router.navigate(['/report', id], {queryParams: {case: this.currentCase.id}})\n  }\n\n  addReport() {\n    const mFormControls = () => {\n      let arr: FormControl[] = []\n      for (let m of this.methods) arr.push(new FormControl(false))\n      return arr\n    }\n    const rmFormControls = () => {\n      let arr: FormControl[] = []\n      for (let m of this.representationMethods) arr.push(new FormControl(false))\n      return arr\n    }\n    const amFormControls = () => {\n      let arr: FormControl[] = []\n      for (let m of this.analysisMethods) arr.push(new FormControl(false))\n      return arr\n    }\n    const oFormControls = () => {\n      let arr: FormControl[] = []\n      for (let o of this.outcomes) arr.push(new FormControl(false))\n      return arr\n    }\n    this.addReportForm = new FormGroup({\n      type: new FormControl('', Validators.required), //\n      key_questions: new FormControl('', Validators.required), //\n      other_results: new FormControl('', Validators.required), //\n      evaluation_type_ref: new FormControl('', Validators.required),//\n      method_refs: new FormArray(mFormControls()),\n      representation_method_refs: new FormArray(rmFormControls()),\n      analysis_method_refs: new FormArray(amFormControls()),\n      outcome_refs: new FormArray(oFormControls()),\n      other_analysis_method: new FormControl(''), //\n      other_evaluation_type: new FormControl(''), //\n      other_representation_method: new FormControl(''), //\n      other_method: new FormControl('')\n    })\n    this.formPage = 2\n  }\n  async methodsSubmit(next: boolean, event) {\n    event.preventDefault()\n    let newMethod = null\n    let newAnMethod = null\n    let newRepMethod = null\n    let newEvType = null\n    let other_method = this.addReportForm.value.other_method\n    let other_representation_method = this.addReportForm.value.other_representation_method\n    let other_analysis_method = this.addReportForm.value.other_analysis_method\n    let other_evaluation_type = this.addReportForm.value.other_evaluation_type\n    try {\n      if (other_method) {\n        newMethod = await this.transport.post(\"methods/\", {\n          name: other_method,\n          parent_ref: +this.newParentRef\n        })\n      }\n      if (other_analysis_method) {\n        newAnMethod = await this.transport.post(\"analysis-methods/\", {\n          name: other_analysis_method\n        })\n      }\n      if (other_representation_method) {\n        newRepMethod  = await this.transport.post(\"representation-methods/\", {\n          name: other_representation_method\n        })\n      }\n      if (other_evaluation_type) {\n        newEvType  = await this.transport.post(\"evaluation-types/\", {\n          name: other_evaluation_type\n        })\n      }\n    } catch (e) {\n      console.log(e)\n    }\n    \n    this.reportSubmit(next, newMethod, newAnMethod, newRepMethod, newEvType)\n  }\n  reportSubmit(next?: boolean, newMethod?, newAnMethod?, newRepMethod?, newEvType?) {\n    const data = this.addReportForm.value\n    const boolToObjM = () => {\n      let resNum: any[] = []\n      let valArr = this.addReportForm.value.method_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && !this.methods[i].parent_ref) resNum.push(+this.methods[i].id)\n        else if (valArr[i] && this.methods[i].parent_ref) {\n          const parent_index = this.methods.indexOf(this.methods.find(item => item.id == this.methods[i].parent_ref))\n          if (valArr[parent_index]) resNum.push(+this.methods[i].id)\n        }\n      }\n      if (newMethod) resNum.push(+newMethod.id)\n      return resNum\n    }\n    const boolToObjAM = () => {\n      let resNum: any[] = []\n      let valArr = this.addReportForm.value.analysis_method_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.analysisMethods[i].id)\n      }\n      if (newAnMethod) resNum.push(+newAnMethod.id)\n      return resNum\n    }\n    const boolToObjRM = () => {\n      let resNum: any[] = []\n      let valArr = this.addReportForm.value.representation_method_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(+this.representationMethods[i].id)\n      }\n      if (newRepMethod) resNum.push( +newRepMethod.id)\n      return resNum\n    }\n    const boolToObjO = () => {\n      let resNum: any[] = []\n      let valArr = this.addReportForm.value.outcome_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.outcomes[i].id)\n      }\n      return resNum\n    }\n    data.evaluation_type_ref = newEvType ? +newEvType.id : +this.addReportForm.value.evaluation_type_ref\n    data.outcome_refs = boolToObjO()\n    data.representation_method_refs = boolToObjRM()\n    data.method_refs = boolToObjM()\n    data.analysis_method_refs = boolToObjAM()\n    data.case_ref = this.currentCase.id\n    if (this.currentCase.add_public_confirm) {\n      data.add_public_confirm = false\n      data.add_public_will = true\n    } else {\n      data.add_public_confirm = true\n      data.add_public_will = false\n    }\n\n    this.transport.post(\"evaluation-reports/\", data).then(report => {\n      let fd = new FormData()\n      this.evaluationReports.push(report)\n      if (this.repFile) fd.append('evaluation_file', this.repFile, this.repFile.name)\n      this.transport.patch(\"evaluation-reports/\", String(report.id), fd)\n        .then(file => {\n          report = {...report, ...file}\n          if (this.currentCase.add_public_confirm) {\n            this.transport.post(\"evaluation-reports/\" + report.id + \"/add_public_confirm/\", {}).then(\n              (result) => {\n                alert(\"Запрос на добавление отчёта об оценке успешно отправлен\")\n                if (next) this.addReport()\n                else this.formPage = 0\n              }).catch(err => {\n                this.formPage = 0\n              }) \n          } else {\n            if (next) this.addReport()\n            else this.formPage = 3\n          }\n        })\n        .catch(error => {\n          this.formPage = 0\n          console.log(error)\n        })\n        .finally(() => this.repFile = null)\n      })\n  }\n  \n  caseFileUpload(event) {\n    this.file = event.target.files[0]\n  }\n  repFileUpload(event) {\n    this.repFile = event.target.files[0]\n  }\n  triggerRepFile() {\n    this.file_rep.nativeElement.click()\n  }\n  triggerFile() {\n    this.file_input.nativeElement.click()\n  }\n  onVerifiedChange(){\n    this.verified = !this.verified;\n    this.reviewCases()\n  }\n  onMyVerifiedChange() {\n    this.myVerified = !this.myVerified;\n    this.reviewMyCases()\n  }\n\n  onCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.filterForm.get(checkList) as FormArray;\n\n    if (event.target.checked) {\n      formArray.push(new FormControl(event.target.value));\n\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      } \n    }\n    /* unselected */\n    else{\n      // find the unselected element\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checked = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      }\n    }\n    this.reviewCases();\n  }\n  onMyCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.myFilterForm.get(checkList) as FormArray;\n\n    if (event.target.checked){\n      // Add a new control in the arrayForm\n      formArray.push(new FormControl(event.target.value));\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checkedMy = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      }\n    }\n    else{\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checkedMy = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      } \n    }\n    this.reviewMyCases();\n  }\n  reviewCases() {\n    const targetFiltersArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n    const oaFiltersArray: FormArray = this.filterForm.get('oaFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n    const meFiltersArray: FormArray = this.filterForm.get('meFilters') as FormArray;\n\n    this.cases = this.allCases;\n\n    if (targetFiltersArray.value.length > 0)\n        this.cases = this.cases.filter((el:Case) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n    if (oaFiltersArray.value.length > 0)\n        this.cases = this.cases.filter((el:Case) => {\n          return el.organization_activity_refs.some((el:OrganizationActivity) => {return oaFiltersArray.value.includes(String(el.id))});\n        });\n    if (meFiltersArray.value.length > 0)\n        this.cases = this.cases.filter((el:Case) => {\n          return el.monitoring_element_refs.some((el:MonitoringElement) => {return meFiltersArray.value.includes(String(el.id))});\n        });\n    if (practiceFiltersArray.value.length > 0)\n        this.cases = this.cases.filter((el:Case) => {\n          return el.practice_ref && practiceFiltersArray.value.includes(String(el.practice_ref.id))\n        });\n    if (tgFiltersArray.value.length > 0)\n        this.cases = this.cases.filter((el:Case) => {\n          return el.thematic_group_ref && tgFiltersArray.value.includes(String(el.thematic_group_ref.id))\n        });\n    if (this.verified)\n        this.cases = this.cases.filter((el:Case) => {\n          return !!el.verification_info;\n        });  \n  }\n  reviewMyCases() {\n    const targetFiltersArray: FormArray = this.myFilterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.myFilterForm.get('practiceFilters') as FormArray;\n    const oaFiltersArray: FormArray = this.myFilterForm.get('oaFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.myFilterForm.get('tgFilters') as FormArray;\n    const meFiltersArray: FormArray = this.myFilterForm.get('meFilters') as FormArray;\n\n    this.myCases = this.allMyCases;\n\n    if (targetFiltersArray.value.length > 0)\n        this.myCases = this.myCases.filter((el:Case) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n    if (oaFiltersArray.value.length > 0)\n        this.myCases = this.myCases.filter((el:Case) => {\n          return el.organization_activity_refs.some((el:OrganizationActivity) => {return oaFiltersArray.value.includes(String(el.id))});\n        });\n    if (meFiltersArray.value.length > 0)\n        this.myCases = this.myCases.filter((el:Case) => {\n          return el.monitoring_element_refs.some((el:MonitoringElement) => {return meFiltersArray.value.includes(String(el.id))});\n        });\n    if (practiceFiltersArray.value.length > 0)\n        this.myCases = this.myCases.filter((el:Case) => {\n          return el.practice_ref && practiceFiltersArray.value.includes(String(el.practice_ref.id))\n        });\n    if (tgFiltersArray.value.length > 0)\n        this.myCases = this.myCases.filter((el:Case) => {\n          return el.thematic_group_ref && tgFiltersArray.value.includes(String(el.thematic_group_ref.id))\n        });\n\n    if (this.myVerified)\n      this.myCases = this.myCases.filter((el:Case) => {\n        return !!el.verification_info;\n      });\n  }\n  myCounter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.myCases.filter((el:Case) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.myCases.filter((el:Case) => {\n        return el.practice_ref && filterValue.id == el.practice_ref.id\n      }).length;\n    }else if (filterName == \"thematic_group\") {\n      return this.myCases.filter((el:Case) => {\n        return el.thematic_group_ref && filterValue.id == el.thematic_group_ref.id\n      }).length;\n    }else if (filterName == \"monitoring_element\") {\n      return this.myCases.filter((el:Case) => {\n        return el.monitoring_element_refs.some((el:MonitoringElement) => {return el.id == filterValue.id})\n      }).length;\n    }else if (filterName == \"organization_activity\") {\n      return this.myCases.filter((el:Case) => {\n        return el.organization_activity_refs.some((el:OrganizationActivity) => {return el.id == filterValue.id});\n      }).length;\n    }\n  }\n  counter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.cases.filter((el:Case) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.cases.filter((el:Case) => {\n        return el.practice_ref && filterValue.id == el.practice_ref.id\n      }).length;\n    } else if (filterName == \"thematic_group\") {\n      return this.cases.filter((el:Case) => {\n        return el.thematic_group_ref && filterValue.id ==el.thematic_group_ref.id\n      }).length;\n    } else if (filterName == \"monitoring_element\") {\n      return this.cases.filter((el:Case) => {\n        return el.monitoring_element_refs.some((el:MonitoringElement) => {return el.id == filterValue.id});\n      }).length;\n    }else if (filterName == \"organization_activity\") {\n      return this.cases.filter((el:Case) => {\n        return el.organization_activity_refs.some((el:OrganizationActivity) => {return el.id == filterValue.id});\n      }).length;\n    }\n  }\n  changeMyRoot() {\n    if (!this.myFilterRoot.value.target) {\n      for (let i = 0; i < this.targets.length; i++) this.targets[i].checkedMy = false\n      const formArray: FormArray = this.myFilterForm.get('targetFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.practice) {\n      const formArray: FormArray = this.myFilterForm.get('practiceFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.tg) {\n      const formArray: FormArray = this.myFilterForm.get('tgFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.me) {\n      const formArray: FormArray = this.myFilterForm.get('meFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.oa) {\n      const formArray: FormArray = this.myFilterForm.get('oaFilters') as FormArray;\n      formArray.clear()\n    }\n    this.reviewMyCases()\n  }\n  changeRoot() {\n    if (!this.filterRoot.value.target) {\n      for (let i = 0; i < this.targets.length; i++) this.targets[i].checked = false\n      const formArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n      let i: number = 0;\n      formArray.controls.forEach((ctrl: FormControl) => {\n        formArray.removeAt(i);\n        i++;\n      });\n    }\n    if (!this.filterRoot.value.tg) {\n      const formArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n      let i: number = 0;\n      formArray.controls.forEach((ctrl: FormControl) => {\n        formArray.removeAt(i);\n        i++;\n      });\n    }\n    if (!this.filterRoot.value.me) {\n      const formArray: FormArray = this.filterForm.get('meFilters') as FormArray;\n      let i: number = 0;\n      formArray.controls.forEach((ctrl: FormControl) => {\n        formArray.removeAt(i);\n        i++;\n      });\n    }\n    if (!this.filterRoot.value.practice) {\n      const formArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n      let i: number = 0;\n      formArray.controls.forEach((ctrl: FormControl) => {\n        formArray.removeAt(i);\n        i++;\n      });\n    }\n    if (!this.filterRoot.value.oa) {\n      const formArray: FormArray = this.filterForm.get('oaFilters') as FormArray;\n      let i: number = 0;\n      formArray.controls.forEach((ctrl: FormControl) => {\n        formArray.removeAt(i);\n        i++;\n      });\n    }\n    this.reviewCases()\n  }\n  findTarget(target) {\n    return !!this.currentCase.target_refs.find(el => el.id == target.id)\n  }\n  findReports() {\n    try {\n      return this.evaluationReports.filter(el => el.case_ref.id == this.currentCase.id)\n    } catch (e) {\n      return []\n    }\n  }\n}\n","import {ActivatedRouteSnapshot, CanActivate, CanActivateChild, Router, RouterStateSnapshot} from '@angular/router'\nimport { Injectable } from '@angular/core'\nimport { TransportService } from '../services/transport.service'\nimport { User } from '../models/user'\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AdminGuard implements CanActivate, CanActivateChild {\n    \n    users: User[] \n    currentUser: User;\n\n    constructor(private transport: TransportService,\n                private router: Router){}\n\n     async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        \n        const usersData = await this.transport.get(\"users/\")\n        \n        this.users = usersData.results;\n        for (var user in this.users) {\n            if (this.users[user].current_user) {\n                this.currentUser = this.users[user];\n                if (!this.currentUser.first_name)\n                    this.currentUser.first_name = this.currentUser.username;\n                break;\n            }\n        }\n        if (this.currentUser.is_superuser) {\n            return (true)\n        }\n        else {\n            this.router.navigate(['/index'])\n            return (false)\n        }\n    }\n\n    canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        return this.canActivate(route, state)\n    }\n}","import {ActivatedRoute, ActivatedRouteSnapshot, CanActivate, CanActivateChild, Router, RouterStateSnapshot} from '@angular/router'\nimport { Injectable } from '@angular/core'\nimport { TransportService } from '../services/transport.service'\nimport { User } from '../models/user'\nimport { Program } from '../models/program'\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ProgramGuard implements CanActivate, CanActivateChild {\n    \n    users: User[] \n    currentUser: User;\n    program: Program\n    id: string\n\n    constructor(private transport: TransportService,\n        private activateRoute: ActivatedRoute,\n        private router: Router){\n            this.id = activateRoute.snapshot.params['id'];\n        }\n\n     async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        try {\n            const usersData = await this.transport.get(\"users/\")\n            \n            this.users = usersData.results;\n            for (var user in this.users) {\n                if (this.users[user].current_user) {\n                    this.currentUser = this.users[user];\n                    if (!this.currentUser.first_name)\n                        this.currentUser.first_name = this.currentUser.username;\n                    break;\n                }\n            }\n            if (this.currentUser.is_superuser || !this.id) {\n                return (true)\n            }\n            else {\n                \n                    this.program = await this.transport.get('programs/' + this.id)      \n                    if (this.program && this.program.current_user) {\n                        return (true)\n                    }\n                this.router.navigate(['/index'])\n                return (false)\n            }\n        } catch (e) {\n            console.log(e)\n            this.router.navigate(['/index'])\n            return (false)\n        }\n    }\n\n    canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        return this.canActivate(route, state)\n    }\n}","import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[appRef]'\n})\nexport class RefDirective {\n\n  constructor(public containerRef: ViewContainerRef) { }\n\n}\n","<section class=\"block_form\">\n    <div>\n        <div class=\"row blank_li\">\n            <div class=\"col-5\" [ngClass]=\"{'deactive': displayMyLibrary}\" name=\"block_lib\" (click)=\"selectMyLibrary(false)\">Библиотека социальных результатов</div>\n            <div *ngIf=\"authenticated\" class=\"col-5\" [ngClass]=\"{'deactive': !displayMyLibrary}\" name=\"block_my\" (click)=\"selectMyLibrary(true)\">Моя библиотека социальных результатов</div>\n            <div class=\"col-2 add_block\" (click)=\"openForm1()\"  *ngIf=\"toLoad <= 0 && authenticated\">\n              Добавить\n            </div>\n        </div>\n\n        <ng-container *ngIf=\"toLoad == 0; else load\">\n            <div class=\"content_block block_my\" *ngIf=\"displayMyLibrary\">\n                <div class=\"row\" *ngFor=\"let group of groupedOutcomes\">\n                    <div class=\"col-2 border_right\" >\n                        <h3 class=\"marg_h\">Целевая группа:</h3>\n                        <p>{{group.target.name}}</p>\n                    </div>\n                    <div class=\"col-2 border_right\" >\n                        <h3 class=\"marg_h\">Практика:</h3>\n                        <p>{{group.practice.name}}</p>\n                    </div>\n                    <div class=\"col-8\">\n                        <h3 class=\"marg_h\">Список социальных результатов:</h3>\n                        <div class=\"row no_padding\" *ngFor=\"let outcome of group.outcomes\" (click)=\"goToOutcome(outcome.id)\">\n                            <!-- if add button decrease col to 8 -->\n                            <div [ngClass]=\"{'col-8': fromProgram, 'col-12': !fromProgram}\">\n                                <p class=\"no_padding_p line_access\" [ngClass]=\"{'check': !outcome.createdby || outcome.createdby.id != transport.user.id, 'checkMy': outcome.createdby && outcome.createdby.id == transport.user.id}\"><span>{{outcome.name}}</span></p>\n                            </div>\n                            <div class=\"col-4\" *ngIf=\"fromProgram\">\n                                <button (click)=\"addToProgram(outcome)\" class=\"add_button open_accessadd\"><img src=\"/newpion/static/pionfront/assets/img/plus.png\"><p>Добавить в цепочку</p></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n            <div class=\"content_block block_lib\"  *ngIf=\"!displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                        <form [formGroup]=\"filterRoot\">\n                            <br>\n                            <label class=\"container_checked\">\n                                <b>Тематическая группа:</b>\n                                <input type=\"checkbox\" formControlName=\"tg\" (change)=\"changeRoot()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                            <ng-container *ngIf=\"filterRoot.value.tg\">\n                                <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{counter('thematic_group', tg)}})\n                                    <input type=\"checkbox\" [value]=\"tg.id\"\n                                        (change)=\"onCheckChange('tgFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </ng-container>\n                            <br>\n                            <label class=\"container_checked\">\n                                <b>Целевые группы:</b>\n                                <input type=\"checkbox\" formControlName=\"target\" (change)=\"changeRoot()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                            <ng-container *ngIf=\"filterRoot.value.target\">\n                                <ng-container *ngFor=\"let target of targets\">\n                                    <label class=\"container_checked\" *ngIf=\"!target.parent_ref\">{{target.name}}({{counter('target', target)}})\n                                        <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                        <span class=\"checkmark\"></span>\n                                    </label>\n                                    <div *ngIf=\"target.checked\">\n                                        <div *ngFor=\"let child of targets\" class=\"col\">\n                                            <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                                <label class=\"container_checked\">{{child.name}}({{counter('target', child)}})\n                                                    <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                                    <span class=\"checkmark\"></span>\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </ng-container>\n                            </ng-container>\n    \n                            <br>\n                            <label class=\"container_checked\">\n                                <b>Практики:</b>\n                                <input type=\"checkbox\" formControlName=\"practice\" (change)=\"changeRoot()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                            <ng-container *ngIf=\"filterRoot.value.practice\">\n                                <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{counter('practice', practice)}})\n                                    <input type=\"checkbox\" [value]=\"practice.id\"\n                                        (change)=\"onCheckChange('practiceFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </ng-container>\n                        </form>\n\n                    </div>\n                    <div class=\"col-6 block_result\">\n                        <h3 class=\"marg_h\">Список социальных результатов:</h3>\n                            <p class=\"line_access\" *ngFor=\"let outcome of outcomes\" (click)=\"goToOutcome(outcome.id)\" \n                            [ngClass]=\"{'check': transport.user && (!outcome.createdby || outcome.createdby.id != transport.user.id) && outcome.current_user_library, \n                            'checkMy': outcome.createdby && transport.user && outcome.createdby.id == transport.user.id && outcome.current_user_library,\n                            'uncheck': !outcome.current_user_library && (!outcome.createdby || !transport.user || outcome.createdby.id != transport.user.id), \n                            'uncheckMy': outcome.createdby && transport.user && !outcome.current_user_library && outcome.createdby.id == transport.user.id}\">\n                            <span>{{outcome.name}}</span>\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n        <ng-template #load>\n            <div class=\"content_block\">\n                <h4 class=\"center\">{{status}}</h4>\n            </div>\n        </ng-template>\n    </div>\n</section>\n\n<!-- Модерация СР согласие -->\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"form == 3\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\" (click)=\"closeForm()\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\">\n            </p>\n            <p class=\"center font_500\">Социальный результат</p>\n        </div>\n        <div class=\"text_block\">\n            <form class=\"ng-untouched ng-pristine ng-invalid block_sendfor\">\n                <div class=\"midle_text\">\n                    <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n                    <p>Социальный результат успешно добавлен. Опубликовать в общей библиотеке?</p>\n                </div>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"openModal(true)\">Да</button>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"openModal(false)\">Нет</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<!-- Добавление СР -->\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"form == 1\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\" (click)=\"closeForm()\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\">\n            </p>\n            <p class=\"center font_500\">Социальный результат</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"selectForm\">\n                <p class=\"line_descSel\">Название программы:</p>\n                <select  class=\"big_sellect\" formControlName=\"program\" (change)=\"changeLevel()\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option [value]=\"program.id\" *ngFor=\"let program of programs\">{{program.name}}</option>\n                </select>\n\n                <p class=\"line_descSel\">Уровень социального результата:</p>\n                <select  class=\"big_sellect\" formControlName=\"level\" (change)=\"changeLevel()\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"short-outcomes\">Краткосрочные</option>\n                    <option value=\"mid-outcomes\">Среднесрочные</option>\n                    <option value=\"impacts\">Социальный эффект</option>\n                </select>\n\n                <p class=\"line_descSel\">Социальный результат:</p>\n                <select  class=\"big_sellect\" formControlName=\"result\">\n                    <option value=\"\" *ngIf=\"!results.length\">Выберите программу и уровень социального результата</option>\n                    <option value=\"\" *ngIf=\"results.length\">Выберите из списка</option>\n                    <option [value]=\"result.id\" *ngFor=\"let result of results\">{{result.name}}</option>\n                </select>\n\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"openForm2()\" [disabled]=\"selectForm.disabled || selectForm.invalid\">Далее</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<!-- Редактирование СР -->\n<div class=\"popap_kontst dark_block blue_head big_form\"  *ngIf=\"form == 2\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\" (click)=\"closeForm()\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\">\n            </p>\n            <p class=\"center font_500\">Социальный результат</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"editForm\">\n                <p class=\"line_descSel\">Общая формулировка:</p>\n                <textarea class=\"text_item\" formControlName=\"name\"></textarea>\n                \n                <p class=\"line_descSel\" style=\"margin-bottom: 0px !important;\">Частные формулировки:</p>\n                <ng-container formArrayName=\"outcome_names\">\n                    <ng-container *ngFor=\"let name of outcome_names; index as i\">\n                        <div class=\"add_tems\" *ngIf=\"i == outcome_names.length - 1\">\n                            <input type=\"text\" [formControlName]=\"i\">\n                            <button (click)=\"addName()\">&nbsp;</button>\n                        </div>\n                        <div class=\"more_input\" *ngIf=\"i < outcome_names.length - 1\">\n                            <input type=\"text\" [formControlName]=\"i\">\n                        </div>\n                    </ng-container>\n                </ng-container>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тематическая группа <span>(1)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Тематическая группа - нужен текст от Ольги </div> -->\n                </div>              \n                <div class=\"check_block\">\n                    <div class=\"row\" formArrayName=\"thematic_group_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let tg of thematicGroups; index as i\" class=\"container_checked\" style=\"text-align: left;\"> {{tg.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Целевые группы <span>(2)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"block_list\">\n                    <div class=\"check_block\">\n                        <div class=\"row\" formArrayName=\"target_refs\" style=\"text-align: left;\">\n                            <div class=\"col-12\">\n                                <ng-container *ngFor=\"let target of targets; index as i\"> \n                                    <label class=\"container_checked\" style=\"text-align: left;\" *ngIf=\"!target.parent_ref\">\n                                        {{target.name}}\n                                        <input type=\"checkbox\" [formControlName]=\"i\">\n                                        <span class=\"checkmark\"></span>\n                                    </label>\n                                    <div *ngIf=\"editForm.value.target_refs[i] && !targets[i].parent_ref\">\n                                        <div *ngFor=\"let child of targets; index as j\" class=\"col\">\n                                            <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == targets[i].id\">\n                                                <label class=\"container_checked\" style=\"text-align: left;\">\n                                                    {{child.name}}\n                                                    <input type=\"checkbox\" [formControlName]=\"j\">\n                                                    <span class=\"checkmark\"></span>\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </ng-container>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тип практики <span>(3)</span>:</p>\n                    <!-- <div _ngcontent-flw-c49=\"\" class=\"desc_item3\"> Нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"block_list\">\n                    <div class=\"check_block\">\n                        <div class=\"row\" formArrayName=\"practice_refs\">\n                            <div class=\"col-md-12\">\n                                <label *ngFor=\"let practice of practices; index as i\" class=\"container_checked\" style=\"text-align: left;\"> {{practice.name}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Показатели <span>(4)</span>:</p>\n                    <!-- <div _ngcontent-flw-c49=\"\" class=\"desc_item3\"> Нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"block_list\" *ngIf=\"mplInd && mplInd.length\">\n                    <div class=\"check_block\">\n                        <div class=\"row\" formArrayName=\"indicators\">\n                            <div class=\"col-md-12\" *ngFor=\"let mplItem of mplInd; index as i\">\n                                <label class=\"container_checked\" style=\"text-align: left;\"> \n                                    {{mplItem.indicator}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Методы и инструменты сбора данных <span>(5)</span>:</p>\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\"><i>После создания социального результата вы также сможете прикрепить его к инструменту из библиотеки инструментов</i></p>\n                    <!-- <div _ngcontent-flw-c49=\"\" class=\"desc_item3\">  Нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"block_list\" *ngIf=\"mplMeth && mplMeth.length\">\n                    <div class=\"check_block\">\n                        <div class=\"row\" formArrayName=\"methods\">\n                            <div class=\"col-md-12\" *ngFor=\"let mplItem of mplMeth; index as i\">\n                                <label class=\"container_checked\" style=\"text-align: left;\"> \n                                    {{mplItem.tool}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" [disabled]=\"editForm.disabled || editForm.invalid\" (click)=\"openForm3()\">Далее</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n\n\n\n\n\n","import { Component, OnInit } from '@angular/core';\nimport { Target } from '../models/target';\nimport { TransportService } from '../services/transport.service';\nimport { Practice } from '../models/practice';\nimport { Outcome } from '../models/outcome';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { FormBuilder, FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Program } from '../models/program';\nimport { ThematicGroup } from '../models/thematicgroup';\nimport { OutcomeMethod } from '../models/outcomemethod';\n\n@Component({\n  selector: 'app-index',\n  templateUrl: './index.component.html',\n  styleUrls: ['./index.component.scss']\n})\nexport class IndexComponent implements OnInit {\n\n  constructor(private fb: FormBuilder,\n    public transport: TransportService,\n    public router: Router,\n    private activateRoute: ActivatedRoute) {}\n\n  public filterForm = this.fb.group({\n    targetFilters: new FormArray([]),\n    practiceFilters: new FormArray([]),\n    tgFilters: new FormArray([])\n  });\n\n  public filterRoot = this.fb.group({\n    target: new FormControl(false),\n    practice: new FormControl(false),\n    tg: new FormControl(false),\n  });\n\n  status: string = \"ЗАГРУЗКА...\"\n  displayMyLibrary: boolean = false;\n  toLoad: number = 4;\n  targets: Target[];\n  practices: Practice[];\n  outcomes: Outcome[];\n  allOutcomes: Outcome[];\n  thematicGroups: ThematicGroup[]\n  groupedOutcomes: any[] = [];\n  fromProgram: boolean = false;\n  programId: string;\n  programBackReferenceId: string;\n  programResultLevel:string;\n  authenticated: boolean = false;\n  form: Number = 0;\n  programs: Program[]\n  selectForm: FormGroup\n  results = []\n  selectedOutcome = null\n  selectedProgram: Program\n  editForm: FormGroup\n  mpl: any[]\n  mplInd: any[]\n  mplMeth: any[]\n  newId: number\n\n  outcome_names: string[] = ['']\n\n  groupBy = (array, key) => {\n    // Return the end result\n    return array.reduce((result, currentValue) => {\n      // If an array already present for key, push it to the array. Else create an array and push the object\n      (result[currentValue[key]] = result[currentValue[key]] || []).push(\n        currentValue\n      );\n      // Return the current iteration `result` value, this will be taken as next iteration `result` value and accumulate\n      return result;\n    }, {}); // empty object is the initial value for result object\n  };\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n\n    //  \n    this.activateRoute.queryParamMap.subscribe(queryParams => {\n      this.programId = queryParams.get('programid');\n      this.programBackReferenceId = queryParams.get('programbackreferenceid');\n      this.programResultLevel = queryParams.get('programresultlevel');\n\n      if (this.programId) {\n        this.fromProgram = true;\n        this.displayMyLibrary = true;\n      }\n    })\n\n    this.transport.get(\"targets/\", !this.authenticated).then((targetsData) => {\n      const targets = targetsData.results;\n      const children = targets.filter(m => typeof m.parent_ref == 'number').reverse()\n      for (let target of children) {\n        let child_index = targets.indexOf(targets.find(m => m.id == target.id))\n        targets.splice(child_index, 1)\n        let parent_index = targets.indexOf(targets.find(m => m.id == target.parent_ref))\n        targets[parent_index].has_children = true\n        targets.splice(parent_index + 1, 0, target)\n      }\n      this.targets = targets\n\n      this.toLoad -= 1;\n      \n      this.transport.get(\"practices/\", !this.authenticated).then((practicesData) => {\n        this.practices = practicesData.results;\n        \n        this.toLoad -= 1;\n        \n        this.transport.get(\"outcomes/\", !this.authenticated).then((outcomesData) => {\n          this.allOutcomes = outcomesData.results;\n          this.sortOutcomes()\n          this.toLoad -= 1;\n        }).catch(error => {\n          console.log(error)\n          this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n        });;\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });;\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });;\n\n    this.transport.get(\"thematic-groups/\", !this.authenticated).then((thematicGroupsData) => {\n      this.thematicGroups = thematicGroupsData.results;    \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n  }\n  sortOutcomes() {\n    this.outcomes = this.allOutcomes;\n    for (var target in this.targets) {\n      for (var practice in this.practices) {\n        var current_outcomes = [];\n        for (var outcome in this.allOutcomes) {\n          if (this.allOutcomes[outcome].current_user_library && this.allOutcomes[outcome].target_refs.some(el => el.id == this.targets[target].id) && this.allOutcomes[outcome].practice_refs.some(el => el.id == this.practices[practice].id)) {\n            current_outcomes.push(this.allOutcomes[outcome]);\n          }\n        }\n        if (current_outcomes.length > 0)\n          this.groupedOutcomes.push({practice: this.practices[practice], target: this.targets[target], outcomes: current_outcomes});\n      }\n    }\n  }\n  closeForm() {\n    this.selectForm.reset()\n    this.outcome_names = ['']\n    this.results = []\n    this.form = 0\n  }\n\n  openForm1() {\n    this.selectForm = new FormGroup({\n      program: new FormControl('', Validators.required),\n      level: new FormControl('', Validators.required),\n      result:  new FormControl('', Validators.required)\n    })\n    this.transport.get(\"programs/\").then((programsData) => {\n      this.programs = programsData.results\n      this.form = 1\n    })\n  }\n\n  openForm2() {\n    this.selectedOutcome = this.results.find(outcome => outcome.id == this.selectForm.value.result)\n    this.selectedProgram = this.programs.find(p => p.id == this.selectForm.value.program)\n    const target_refs: Number[] = Array.from(this.selectedProgram.target_refs, x => +x.id)\n    const practice_refs: Number[] = Array.from(this.selectedProgram.practice_refs, x => +x.id)\n    const t_r_generator = () => {\n      let arr = []\n      for (let i = 1; i < this.targets.length + 1; i++) {\n        arr.push(new FormControl(target_refs.includes(i) ? true : false))\n      }\n      return arr\n    }\n\n    const p_r_generator = () => {\n      let arr = []\n      for (let i = 1; i < this.practices.length + 1; i++) arr.push(new FormControl(practice_refs.includes(i) ? true : false))\n      return arr\n    }\n\n    const t_g_generator = () => {\n      let arr = []\n      for (let i of this.thematicGroups) arr.push(new FormControl(false))\n      return arr\n    }\n\n    this.transport.get(\"mpl-\" + this.selectForm.value.level + \"/?program_ref=\" + this.selectedProgram.id).then((mpl) => {\n      this.mpl = mpl.results.filter(e => (\"id\" in e.result_ref) ? e.result_ref.id == this.selectedOutcome.id : false);\n      this.mplInd = this.mpl.filter(e => e.indicator)\n      this.mplMeth = this.mpl.filter(e => e.tool)\n\n      const i_r_generator = () => {\n        let arr = []\n        for (let mpl of this.mplInd) arr.push(new FormControl(true)) \n        return arr\n      }\n      const m_r_generator = () => {\n        let arr = []\n        for (let mpl of this.mplMeth) arr.push(new FormControl(true));\n        return arr\n      }\n\n      this.editForm = new FormGroup({\n        name: new FormControl(this.selectedOutcome.name),\n        outcome_names: new FormArray([new FormControl()]),\n        thematic_group_refs: new FormArray(t_g_generator()),\n        target_refs: new FormArray(t_r_generator()),\n        practice_refs: new FormArray(p_r_generator()),\n        indicators: new FormArray(i_r_generator()),\n        methods:  new FormArray(m_r_generator())\n      })\n      this.form = 2\n      \n    });\n  }\n\n  addName() {\n    const formArray: FormArray = this.editForm.get('outcome_names') as FormArray\n    formArray.push(new FormControl(''))\n    this.outcome_names.push('')  \n  }\n\n  openForm3() {\n    this.editForm.disable()\n\n    const boolToObjP = () =>  {\n      let resNum: any[] = []\n      let valArr = this.editForm.value.practice_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(+this.practices[i].id)\n      }\n      return resNum\n    }\n\n    const boolToObjT = () => {\n      let resNum: any[] = []\n      let valArr = this.editForm.value.target_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && !this.targets[i].parent_ref) resNum.push(+this.targets[i].id)\n        else if (valArr[i] && this.targets[i].parent_ref) {\n          const parent_index = this.targets.indexOf(this.targets.find(item => item.id == this.targets[i].parent_ref))\n          if (valArr[parent_index]) resNum.push(+this.targets[i].id)\n        }\n      }\n      return resNum\n    }\n\n    const boolToObjTG = () => {\n      let resNum: any[] = []\n      let valArr = this.editForm.value.thematic_group_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(+this.thematicGroups[i].id)\n      }\n      return resNum\n    }\n\n    const boolToObjI = () =>{\n      let resNum: String[] = []\n      let valArr = this.editForm.value.indicators\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.mplInd[i].indicator)\n      }\n      return resNum\n    }\n\n    const boolToObjOM = () => {\n      let resNum: any[] = []\n      let valArr = this.editForm.value.methods\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && this.mplMeth[i].tool_type == 'OutcomeMethods') resNum.push(this.mplMeth[i])\n      }\n      return resNum\n    }\n\n    const boolToObjTM = () => {\n      let resNum: any[] = []\n      let valArr = this.editForm.value.methods\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && this.mplMeth[i].tool_type == 'Tools') resNum.push(this.mplMeth[i])\n      }\n      return resNum\n    }\n\n    let form = this.editForm.value\n    form.target_refs = boolToObjT()\n    form.practice_refs = boolToObjP()\n    form.thematic_group_refs = boolToObjTG()\n    if (this.editForm.value.outcome_names && this.editForm.value.outcome_names.length) \n      this.outcome_names = this.editForm.value.outcome_names.filter(el => el && el.length)\n    delete form.outcome_names\n    let indicators = boolToObjI()\n    let methods = boolToObjOM()\n    let tools = boolToObjTM()\n    this.postMethods(methods).then(method_refs => {\n      form.method_refs = method_refs\n\n      this.transport.post(\"outcomes/\", form).then(res => {\n        this.allOutcomes.push(res)\n        this.newId = res.id\n        this.addToLibrary(this.newId)\n        for (let i = 0; i < indicators.length; i++) {\n          let dataInd = {name: indicators[i], outcome_ref: this.newId}\n          this.transport.post('outcome-indicators/', dataInd).then(resInd =>{\n          }).catch(e => console.log(e))\n        }\n        for (let tool of tools) {\n          let array = tool.tool_url.split('?id=')\n          if (array[1]) this.transport.post('tools/'+ array[1] + '/add_outcome/?outcome_ref=' + this.newId, {}).then(resInd =>{\n          }).catch(e => console.log(e))\n        }\n        if (this.outcome_names && this.outcome_names.length) \n          for (let i = 0; i < this.outcome_names.length; i++) {\n            let dataName = {name: this.outcome_names[i], outcome_ref:  this.newId}\n            this.transport.post('outcome-names/', dataName).then(resName => {\n            }).catch(e => console.log(e))\n          }\n        this.form = 3\n        }).catch(error => {\n          this.editForm.enable()\n          console.log(error);\n        })\n    }).catch(e => {console.log(e); alert('Ошибка!')})\n  }\n\n  async postMethods(methods) {\n    let method_refs = []\n    try {     \n      for (let i = 0; i < methods.length; i++) {\n        let res = await this.transport.post(\"outcome-methods/\", {name: methods[i].tool, url: methods[i].tool_url ? methods[i].tool_url : 'https://pion.org.ru'})\n        method_refs.push(res.id)\n      }\n      return method_refs\n    } catch (e) {\n      console.log(e)\n      return method_refs\n    }\n  }\n\n  openModal(add: boolean) {\n    if (add) {\n      this.transport.post(\"outcomes/\" + this.newId + \"/switchData_library/\", {}).then((addToLibraryResult) => {\n          alert('Запрос успешно отправлен!')\n          this.closeForm()   \n        }, \n        (error) => {\n          console.log(error)\n          alert('Ошибка. Не удалось отправить запрос')\n          this.closeForm()   \n        })\n    }\n    else this.closeForm()   \n  }\n\n  changeLevel() {\n    if (!this.selectForm.value.level || !this.selectForm.value.program) this.results = []\n    else {\n      this.transport.get(\"program-\"+ this.selectForm.value.level +\"/?program_ref=\" + this.selectForm.value.program).then(result => {\n        this.results = result.results \n        //console.log(this.results)\n        this.selectForm.patchValue({result: ''})\n      })\n    }\n  }\n\n  selectMyLibrary(selected: boolean) {\n    this.displayMyLibrary = selected;\n  }\n\n  goToOutcome(outcomeId: string) {\n    if (!this.programId)\n      this.router.navigate([\"/result/\"+outcomeId]);\n    else {\n      var link = \"/result/\" + outcomeId + '?programid='+this.programId+'&programresultlevel='+this.programResultLevel;\n\n      var backReferenceId:string = null;\n      if (this.programBackReferenceId)\n        backReferenceId = this.programBackReferenceId;\n  \n      if (backReferenceId)\n        link += \"&programbackreferenceid=\" + backReferenceId;\n      \n      this.router.navigateByUrl(link);\n    }\n  }\n\n  addToLibrary(id) {\n    this.transport.post(\"outcomes/\" + id + \"/add_to_library/\", {}).then((addToLibraryResult) => {\n      this.outcomes.find(c => c.id == id).current_user_library = true;\n      this.sortOutcomes()\n    }, (error) => {});\n  }\n\n  onCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.filterForm.get(checkList) as FormArray;\n\n    if (event.target.checked) {\n      formArray.push(new FormControl(event.target.value));\n\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      }\n    }\n    /* unselected */\n    else{\n      // find the unselected element\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checked = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      }\n    }\n    this.reviewOutcomes();\n  }\n\n  reviewOutcomes() {\n    const targetFiltersArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n\n    this.outcomes = this.allOutcomes;\n\n    if (targetFiltersArray.value.length > 0)\n      // for(let target of targetFiltersArray.value) {\n        this.outcomes = this.outcomes.filter((el:Outcome) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n      // }\n\n    if (practiceFiltersArray.value.length > 0)\n      // for(let practice of practiceFiltersArray.value) {\n        this.outcomes = this.outcomes.filter((el:Outcome) => {\n          return el.practice_refs.some((prc:Practice) => {return practiceFiltersArray.value.includes(String(prc.id))});\n        });\n      // }\n    if (tgFiltersArray.value.length > 0)\n      this.outcomes = this.outcomes.filter((el:Outcome) => {\n        return el.thematic_group_refs.some((prc:ThematicGroup) => {return tgFiltersArray.value.includes(String(prc.id))})\n      });\n  }\n\n  counter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.outcomes.filter((el:Outcome) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.outcomes.filter((el:Outcome) => {\n        return el.practice_refs.some((prc:Practice) => {return prc.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"thematic_group\") {\n      return this.outcomes.filter((el:Outcome) => {\n        return el.thematic_group_refs.some((prc:ThematicGroup) => {return prc.id == filterValue.id})\n      }).length;\n    }\n  }\n\n  changeRoot() {\n    if (!this.filterRoot.value.target) {\n      const formArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.practice) {\n      const formArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.tg) {\n      const formArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n      formArray.clear()\n    }\n    this.reviewOutcomes()\n  }\n\n  addToProgram(outcome:Outcome) {\n     \n\n    let newResultAdd:any = {};\n\n    newResultAdd.name = outcome.name;\n    var splitted:any = [];\n    if (this.programBackReferenceId) {\n       \n      splitted = this.programBackReferenceId.split(\" \");\n    }\n    if (this.programBackReferenceId) {\n      if (this.programResultLevel == \"program-short-outcomes\")\n        newResultAdd.program_output_many_refs = splitted;\n      if (this.programResultLevel == \"program-mid-outcomes\")\n        newResultAdd.program_short_outcome_many_refs = splitted;\n      if (this.programResultLevel == \"program-impacts\")\n        newResultAdd.program_mid_outcome_many_refs = splitted;\n    }\n\n    newResultAdd.program_ref = Number(this.programId);\n    this.transport.post(this.programResultLevel + \"/\", newResultAdd).then((result: any) => {\n      this.router.navigate([\"program/\" + this.programId])\n    }, error => {console.error(error)});\n  }\n\n}\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { DatePipe, formatDate  } from '@angular/common';\nimport { Target } from '../models/target';\nimport { Practice } from '../models/practice';\nimport { Outcome } from '../models/outcome';\nimport { TransportService } from '../services/transport.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { LogicalModel } from '../models/logicalModel';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Program } from '../models/program';\nimport { ThematicGroup } from '../models/thematicgroup';\n\n@Component({\n  selector: 'app-library',\n  templateUrl: './library.component.html',\n  styleUrls: ['./library.component.scss']\n})\nexport class LibraryComponent implements OnInit {\n\n  constructor(public fb: FormBuilder,\n    private datePipe: DatePipe, \n    public transport: TransportService,\n    private activateRoute: ActivatedRoute,\n    public router: Router) { }\n\n    public filterForm = this.fb.group({\n      // email: [''],\n      targetFilters: new FormArray([]),\n      practiceFilters: new FormArray([]),\n      outcomeFilters: new FormArray([]),\n      tgFilters: new FormArray([])\n    });\n\n    public myFilterForm = this.fb.group({\n      // email: [''],\n      targetFilters: new FormArray([]),\n      practiceFilters: new FormArray([]),\n      outcomeFilters: new FormArray([]),\n      tgFilters: new FormArray([])\n    });\n\n    public filterRoot = this.fb.group({\n      target: new FormControl(false),\n      practice: new FormControl(false),\n      tg: new FormControl(false),\n      outcome: new FormControl(false),\n    });\n  \n    public myFilterRoot = this.fb.group({\n      target: new FormControl(false),\n      practice: new FormControl(false),\n      outcome: new FormControl(false),\n      tg: new FormControl(false),\n    });\n  @ViewChild('model') modelFileRef: ElementRef\n  @ViewChild('result_tree') resultTreeFileRef: ElementRef\n\n  status: string = \"ЗАГРУЗКА...\"\n  displayMyLibrary: boolean = false;\n  toLoad: number = 5;\n  targets: Target[];\n  practices: Practice[];\n  outcomes: Outcome[];\n  logicalModels: LogicalModel[];\n  allLogicalModels: LogicalModel[];\n  myLogicalModels: LogicalModel[];\n  allMyLogicalModels: LogicalModel[];\n  thematicGroups: ThematicGroup[]\n  displayDetails: boolean = false;\n  displayAddPersonal: boolean = false;\n  currentModel: LogicalModel;\n  displayRemovePersonal: boolean = false;\n\n  myVerified: boolean = false;\n  verified: boolean = false;\n\n  authenticated: boolean = false;\n\n  formSelectProgram: FormGroup\n  formEditModel: FormGroup\n  formPage: number = 0\n  programs: Program[]\n  selectProgram: Program\n\n  model_file: File\n  result_tree_file: File\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n\n    this.activateRoute.queryParamMap.subscribe(queryParams => {\n      let id = queryParams.get('id');\n      if (id) this.transport.get(\"logical-models/\"+id+\"/\").then(model => {\n        this.openDetails(model)\n      }).catch(e => console.log(e))\n    })\n\n    this.transport.get(\"targets/\", !this.authenticated).then((targetsData) => {\n      const targets = targetsData.results;\n      const children = targets.filter(m => typeof m.parent_ref == 'number').reverse()\n      for (let target of children) {\n        let child_index = targets.indexOf(targets.find(m => m.id == target.id))\n        targets.splice(child_index, 1)\n        let parent_index = targets.indexOf(targets.find(m => m.id == target.parent_ref))\n        targets[parent_index].has_children = true\n        targets.splice(parent_index + 1, 0, target)\n      }\n      this.targets = targets\n      this.toLoad -= 1;\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"outcomes/\", !this.authenticated).then((outcomesData) => {\n      this.outcomes = outcomesData.results;\n      this.toLoad -= 1;         \n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"practices/\", !this.authenticated).then((practicesData) => {\n      this.practices = practicesData.results;    \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n    \n    this.transport.get(\"logical-models/\", !this.authenticated).then((logicalModels) => {\n      this.logicalModels = logicalModels.results;\n      this.allLogicalModels = logicalModels.results;     \n      this.sortModels()\n      this.toLoad -= 1;           \n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n    this.transport.get(\"thematic-groups/\", !this.authenticated).then((thematicGroupsData) => {\n      this.thematicGroups = thematicGroupsData.results;    \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });\n\n  }\n\n  sortModels() {\n    this.allMyLogicalModels = [];\n    for (var logicalModel in this.allLogicalModels) {\n      if (this.allLogicalModels[logicalModel].current_user_library)\n        this.allMyLogicalModels.push(this.allLogicalModels[logicalModel]);\n    }\n    this.myLogicalModels = this.allMyLogicalModels;  \n  }\n\n  addForm(event) {\n    event.preventDefault()\n    this.formSelectProgram = new FormGroup({\n      program: new FormControl('start')\n    })\n    this.transport.get(\"programs/\").then((programsData) => {\n      this.programs = programsData.results\n      this.formPage = 1\n    })\n  }\n\n  editForm(event) {\n    event.preventDefault()\n    this.selectProgram = this.programs.find(p => p.id == this.formSelectProgram.value.program)\n    console.log(this.selectProgram)\n    const target_refs = Array.from(this.selectProgram.target_refs, x => x.id)\n    const practice_refs = Array.from(this.selectProgram.practice_refs, x => x.id)\n\n    const tFormControls = () => {\n      let arr = []\n      for (let i = 0; i < this.targets.length; i++) {\n        arr.push(new FormControl(target_refs.includes(this.targets[i].id) ? true : false))\n      }\n      return arr\n    }\n\n    const pFormControls = () => {\n      let arr = []\n      for (let i = 0; i < this.practices.length; i++) {\n        arr.push(new FormControl(practice_refs.includes(this.practices[i].id) ? true : false))\n      }\n      return arr\n    }\n\n    const oFormControls = () => {\n      let arr = []\n      for (let i = 0; i < this.outcomes.length; i++) {\n        arr.push(new FormControl(false))\n      }\n      return arr\n    }\n\n    this.formEditModel = new FormGroup({\n      name: new FormControl(this.selectProgram.name, Validators.required),\n      period: new FormControl(this.selectProgram.period, Validators.required),\n      thematic_group_ref: new FormControl('', Validators.required),\n      organization: new FormControl('', Validators.required),\n      target_refs: new FormArray(tFormControls()),\n      practice_refs: new FormArray(pFormControls()),\n      outcome_refs: new FormArray(oFormControls()),\n      verification_info: new FormControl(''),\n      verification_level_regularity: new FormControl(''),\n      verification_level_validity: new FormControl(''),\n      verification_level_outcome_accessibility: new FormControl(''),\n      verification_level_outcome_validity: new FormControl(''),\n      isNew: new FormControl(true)\n    })\n    this.formPage = 2 \n  }\n\n  editFormFromLibrary(event) {\n    event.preventDefault()\n\n    const tFormControls = () => {\n      let arr: FormControl[] = []\n      for (let target of this.targets) arr.push(new FormControl(this.currentModel.target_refs.find(el => +el.id == +target.id) ? true : false))\n      return arr\n    }\n    const pFormControls = () => {\n      let arr: FormControl[] = []\n      for (let tag of this.practices) arr.push(new FormControl(this.currentModel.practice_refs.find(el => +el.id == +tag.id) ? true : false))\n      return arr\n    }\n\n    const oFormControls = () => {\n      let arr: FormControl[] = []\n      for (let tag of this.outcomes) arr.push(new FormControl(this.currentModel.outcome_refs.find(el => +el.id == +tag.id) ? true : false))\n      return arr\n    }\n\n    this.formEditModel = new FormGroup({\n      name: new FormControl(this.currentModel.name, Validators.required),\n      period: new FormControl(this.currentModel.period, Validators.required),\n      thematic_group_ref: new FormControl(this.currentModel.thematic_group_ref.id, Validators.required),\n      organization: new FormControl(this.currentModel.organization, Validators.required),\n      target_refs: new FormArray(tFormControls()),\n      practice_refs: new FormArray(pFormControls()),\n      outcome_refs: new FormArray(oFormControls()),\n      verification_info: new FormControl(this.currentModel.verification_info),\n      verification_level_regularity: new FormControl(this.currentModel.verification_level_regularity),\n      verification_level_validity: new FormControl(this.currentModel.verification_level_validity),\n      verification_level_outcome_accessibility: new FormControl(this.currentModel.verification_level_outcome_accessibility),\n      verification_level_outcome_validity: new FormControl(this.currentModel.verification_level_outcome_validity),\n      isNew: new FormControl(false)\n    })\n\n    this.closeAddPersonal()\n    this.formPage = 2\n  }\n\n  editProgramFormSubmit(event) {\n    event.preventDefault()\n    this.formEditModel.disable()\n\n    const boolToObjP = () =>{\n      let resNum: any[] = []\n      let valArr = this.formEditModel.value.practice_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.practices[i].id)\n      }\n      return resNum\n    }\n\n    const boolToObjT = () => {\n      let resNum: any[] = []\n      let valArr = this.formEditModel.value.target_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && !this.targets[i].parent_ref) resNum.push(+this.targets[i].id)\n        else if (valArr[i] && this.targets[i].parent_ref) {\n          const parent_index = this.targets.indexOf(this.targets.find(item => item.id == this.targets[i].parent_ref))\n          if (valArr[parent_index]) resNum.push(+this.targets[i].id)\n        }\n      }\n      return resNum\n    }\n    const boolToObjO = () => {\n      let resNum: any[] = []\n      let valArr = this.formEditModel.value.outcome_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.outcomes[i].id)\n      }\n      return resNum\n    }\n\n    const form = {...this.formEditModel.value}\n    form.target_refs = boolToObjT()\n    form.practice_refs = boolToObjP()\n    form.thematic_group_ref = +this.formEditModel.value.thematic_group_ref\n    form.outcome_refs = boolToObjO()\n    delete form.isNew\n\n    if (!this.formEditModel.value.isNew) this.update(form)\n    else if (this.formEditModel.value.isNew) this.post(form)\n  }\n\n  post(form) {\n    this.transport.post(\"logical-models/\", form).then((res: LogicalModel) => {\n      this.allLogicalModels.push(res)\n      this.currentModel = res\n      this.addToLibrary()\n      if (this.model_file || this.result_tree_file) {\n        let fd = new FormData()\n        if (this.model_file) fd.append('model_file', this.model_file, this.model_file.name)\n        if (this.result_tree_file) fd.append('result_tree_file', this.result_tree_file, this.result_tree_file.name)\n  \n        this.transport.patch(\"logical-models/\", String(res.id), fd).then((result) => {\n          this.currentModel = {...this.currentModel, ...result}\n          this.result_tree_file = null\n          this.model_file = null\n          this.formPage = 3 \n        }, \n        err => {\n          this.formEditModel.enable()\n          this.formPage = 3 \n          this.result_tree_file = null\n          this.model_file = null\n          alert(\"Произошла ошибка при сохранении файлов\");\n          console.dir(err);\n        })\n      } else this.formPage = 3 \n    }, err => {\n      this.formEditModel.enable()\n      alert(\"Произошла ошибка при сохранении логической модели\");\n      this.formPage = 0\n      console.dir(err);\n    });  \n  }\n  update(values) {\n    let saveArr = []\n\n    for (let field in values) {\n      if (['practice_refs', 'outcome_refs', 'target_refs'].includes(field)) {\n        if (this.currentModel[field].length != values[field].length) saveArr.push(field)\n        else for (let item of this.currentModel[field]) {\n          if (!values[field].includes(+item.id)) {\n            saveArr.push(field); \n            break\n          }\n        }\n      } \n      else if (['thematic_group_ref'].includes(field)) {\n        if (+this.currentModel[field].id != +values[field]) saveArr.push(field)\n      } \n      else if (this.currentModel[field] != values[field]) saveArr.push(field)\n    }\n    \n    for (let field in values) \n      if (!saveArr.includes(field)) values[field]=null\n\n    this.transport.post(\"logical-model-change-requests/\"+ this.currentModel.id + '/upload_data/', values).then((res) => {\n      if (res.message == 'edit') {\n        this.currentModel = {...this.currentModel, ...res.result}\n\n        let index = this.allLogicalModels.indexOf(this.allLogicalModels.find(el => el.id == this.currentModel.id))\n        if (index) this.allLogicalModels[index] = this.currentModel\n        if (this.model_file || this.result_tree_file) {\n          let fd = new FormData()\n          if (this.model_file) fd.append('model_file', this.model_file, this.model_file.name)\n          if (this.result_tree_file) fd.append('result_tree_file', this.result_tree_file, this.result_tree_file.name)\n          this.transport.patch(\"logical-models/\", String(this.currentModel.id), fd).then((result) => {\n            this.result_tree_file = null\n            this.model_file = null\n            this.currentModel = {...this.currentModel, ...result}\n            if (index) this.allLogicalModels[index] = this.currentModel\n            this.formPage = 3 \n          }).catch(error => {\n            this.result_tree_file = null\n            this.model_file = null\n            console.log(error)\n            alert(\"Модель сохранёна, ошибка при загрузке файлов\")\n          });\n        }\n        this.formPage = 3\n      } else if (res.message == 'request') {\n        if (!this.model_file && !this.result_tree_file) alert(\"Запрос на редактирование успешно отправлен\")\n        else {\n          let fd = new FormData()\n          if (this.model_file) fd.append('model_file', this.model_file, this.model_file.name)\n          if (this.result_tree_file) fd.append('result_tree_file', this.result_tree_file, this.result_tree_file.name)\n          this.transport.patch(\"logical-model-change-requests/\", String(this.currentModel.id), fd).then((resFile) => {\n            this.result_tree_file = null\n            this.model_file = null\n            alert(\"Запрос на редактирование успешно отправлен\")\n          }).catch(error => {\n            this.result_tree_file = null\n            this.model_file = null\n            console.log(error)\n            alert(\"Запрос на редактирование успешно отправлен, ошибка при загрузке файлов\")\n          });\n        }\n        this.closeForm()\n      } \n    }).catch(error => {\n      console.log(error)\n      alert(\"Произошла неизвестная ошибка\")\n      this.closeForm()\n    });   \n  }\n\n  addToAllLibrary(event) {\n    event.preventDefault()\n    this.transport.post(\"logical-models/\" + this.currentModel.id + \"/switchData_library/\", {}).then(\n    (addToLibraryResult) => {\n      alert('Запрос успешно отправлен!')\n      this.formPage = 0\n    }, \n    (error) => {\n      console.log(error)\n      alert('Ошибка. Не удалось отправить запрос')\n      this.formPage = 0\n    })\n  }\n\n  closeForm() {\n    this.formPage = 0\n  }\n\n  triggerModelFile() {\n    this.modelFileRef.nativeElement.click()\n  }\n\n  triggerResultTreeFile() {\n    this.resultTreeFileRef.nativeElement.click()\n  }\n\n  modelUpload(event: any) {\n    this.model_file = event.target.files[0]\n  }\n\n  resultTreeUpload(event: any) {\n    this.result_tree_file = event.target.files[0]\n  }\n\n  selectMyLibrary(selected: boolean) {\n    this.displayMyLibrary = selected;\n    this.logicalModels = this.allLogicalModels\n    this.filterForm.reset()\n    this.myFilterForm.reset()\n    this.verified = false\n    this.myVerified = false\n    this.sortModels()\n  }\n\n  openDetails(model: LogicalModel) {\n    this.router.navigate([], {queryParams: {id: model.id}})\n    this.currentModel = model;\n    this.displayDetails = true;\n  }\n\n  openAddPersonal(model: LogicalModel) {\n    if (!model.current_user_library && this.authenticated) {\n      this.currentModel = model;\n      this.displayAddPersonal = true;\n    }\n    if (model.current_user_library && this.authenticated) {\n      this.currentModel = model;\n      this.displayRemovePersonal = true;\n    }\n  }\n\n  closeDetails() {\n    this.displayDetails = false;\n    this.router.navigate([])\n  }\n\n  closeAddPersonal() {\n    this.displayAddPersonal = false;\n    this.displayRemovePersonal = false;\n  }\n\n  addToLibrary() {\n    this.transport.post(\"logical-models/\" + this.currentModel.id + \"/add_to_library/\", {}).then((addToLibraryResult) => {\n      this.currentModel.current_user_library = true;\n      let index = this.allLogicalModels.indexOf(this.allLogicalModels.find(e => e.id == this.currentModel.id))\n      this.allLogicalModels[index].current_user_library = true\n      this.currentModel = null\n      this.sortModels()\n      this.reviewMyLogicalModels()\n    }, (error) => {\n       console.log(error)\n    });\n    this.closeAddPersonal();\n  }\n\n  removeFromLibrary() {\n    this.transport.post(\"logical-models/\" + this.currentModel.id + \"/remove_from_library/\", {}).then((addToLibraryResult) => {\n      this.currentModel.current_user_library = false;\n      let index = this.allLogicalModels.indexOf(this.allLogicalModels.find(e => e.id == this.currentModel.id))\n      this.allLogicalModels[index].current_user_library = false\n      this.currentModel = null\n      this.sortModels()\n      this.reviewMyLogicalModels()\n    }, (error) => console.log(error));\n    this.closeAddPersonal();\n  }\n\n  downloadFile(filePath: string) {\n    let link = document.createElement(\"a\");\n    link.download = \"filename\";\n    link.href = filePath;\n    link.click();\n    link.remove();\n  }\n\n  onVerifiedChange() {\n    this.verified = !this.verified;\n    this.reviewLogicalModels();\n  }\n  onMyVerifiedChange() {\n    this.myVerified = !this.myVerified;\n    this.reviewMyLogicalModels();\n  }\n\n  reviewLogicalModels() {\n    const targetFiltersArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n    const outcomeFiltersArray: FormArray = this.filterForm.get('outcomeFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n    this.logicalModels = this.allLogicalModels;\n\n    if (targetFiltersArray.value.length > 0)\n        this.logicalModels = this.logicalModels.filter((el:LogicalModel) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n\n    if (practiceFiltersArray.value.length > 0)\n        this.logicalModels = this.logicalModels.filter((el:LogicalModel) => {\n          return el.practice_refs.some((prc:Practice) => {return practiceFiltersArray.value.includes(String(prc.id))});\n        });\n\n    if (outcomeFiltersArray.value.length > 0)\n        this.logicalModels = this.logicalModels.filter((el:LogicalModel) => {\n          return el.outcome_refs.some((ocm:Outcome) => {return outcomeFiltersArray.value.includes(String(ocm.id))});\n        });\n\n    if (tgFiltersArray.value.length > 0)\n        this.logicalModels = this.logicalModels.filter((el:LogicalModel) => {\n          return el.thematic_group_ref && tgFiltersArray.value.includes(String(el.thematic_group_ref.id))\n        });\n      \n    if (this.verified)\n        this.logicalModels = this.logicalModels.filter((el:LogicalModel) => {\n          return el.verification_info != null && el.verification_info != undefined && el.verification_info != \"\";\n        });\n  }\n  reviewMyLogicalModels() {\n    const targetFiltersArray: FormArray = this.myFilterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.myFilterForm.get('practiceFilters') as FormArray;\n    const outcomeFiltersArray: FormArray = this.myFilterForm.get('outcomeFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.myFilterForm.get('tgFilters') as FormArray;\n    \n    this.myLogicalModels = this.allMyLogicalModels;\n\n    if (targetFiltersArray.value.length > 0)\n        this.myLogicalModels = this.myLogicalModels.filter((el:LogicalModel) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n\n    if (practiceFiltersArray.value.length > 0)\n        this.myLogicalModels = this.myLogicalModels.filter((el:LogicalModel) => {\n          return el.practice_refs.some((prc:Practice) => {return practiceFiltersArray.value.includes(String(prc.id))});\n        });\n\n    if (outcomeFiltersArray.value.length > 0)\n        this.myLogicalModels = this.myLogicalModels.filter((el:LogicalModel) => {\n          return el.outcome_refs.some((ocm:Outcome) => {return outcomeFiltersArray.value.includes(String(ocm.id))});\n        });\n\n    if (tgFiltersArray.value.length > 0)\n        this.myLogicalModels = this.myLogicalModels.filter((el:LogicalModel) => {\n          return el.thematic_group_ref && tgFiltersArray.value.includes(String(el.thematic_group_ref.id))\n        });\n    \n    if (this.myVerified)\n        this.myLogicalModels = this.myLogicalModels.filter((el:LogicalModel) => {\n          return el.verification_info != null && el.verification_info != undefined && el.verification_info != \"\";\n        });\n  }\n\n  myCounter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.myLogicalModels.filter((el:LogicalModel) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.myLogicalModels.filter((el:LogicalModel) => {\n        return el.practice_refs.some((prc:Practice) => {return prc.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"outcome\") {\n      return this.myLogicalModels.filter((el:LogicalModel) => {\n        return el.outcome_refs.some((ocm:Outcome) => {return ocm.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"thematic_group\") {\n      return this.myLogicalModels.filter((el:LogicalModel) => {\n        return el.thematic_group_ref && filterValue.id ==el.thematic_group_ref.id\n      }).length;\n    }\n  }\n  counter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.logicalModels.filter((el:LogicalModel) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.logicalModels.filter((el:LogicalModel) => {\n        return el.practice_refs.some((prc:Practice) => {return prc.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"outcome\") {\n      return this.logicalModels.filter((el:LogicalModel) => {\n        return el.outcome_refs.some((ocm:Outcome) => {return ocm.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"thematic_group\") {\n      return this.logicalModels.filter((el:LogicalModel) => {\n        return el.thematic_group_ref && filterValue.id == el.thematic_group_ref.id\n      }).length;\n    }\n  }\n\n  changeMyRoot() {\n    if (!this.myFilterRoot.value.target) {\n      const formArray: FormArray = this.myFilterForm.get('targetFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.tg) {\n      const formArray: FormArray = this.myFilterForm.get('tgFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.practice) {\n      const formArray: FormArray = this.myFilterForm.get('practiceFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.outcome) {\n      const formArray: FormArray = this.myFilterForm.get('outcomeFilters') as FormArray;\n      formArray.clear()\n    }\n    this.reviewMyLogicalModels()\n  }\n\n  changeRoot() {\n    if (!this.filterRoot.value.target) {\n      const formArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.practice) {\n      const formArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.outcome) {\n      const formArray: FormArray = this.filterForm.get('outcomeFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.tg) {\n      const formArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n      formArray.clear()\n    }\n    this.reviewLogicalModels()\n  }\n\n  onCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.filterForm.get(checkList) as FormArray;\n\n    if (event.target.checked) {\n      formArray.push(new FormControl(event.target.value));\n\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      }\n    }\n    /* unselected */\n    else{\n      // find the unselected element\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checked = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      }\n    }\n    this.reviewLogicalModels();\n  }\n\n  onMyCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.myFilterForm.get(checkList) as FormArray;\n\n    if (event.target.checked){\n      // Add a new control in the arrayForm\n      formArray.push(new FormControl(event.target.value));\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      }\n    }\n    else{\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checked = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      }\n    }\n    this.reviewMyLogicalModels();\n  }\n}\n","<section class=\"block_form\">\n    <div>\n        <div class=\"row blank_li\">\n            <div class=\"col-5\" [ngClass]=\"{'deactive': displayMyLibrary}\" name=\"block_lib\"\n                (click)=\"selectMyLibrary(false)\">Библиотека логических моделей и деревьев результатов</div>\n            <div *ngIf=\"authenticated\" class=\"col-5\" [ngClass]=\"{'deactive': !displayMyLibrary}\" name=\"block_my\"\n                (click)=\"selectMyLibrary(true)\">Моя библиотека логических моделей и деревьев результатов</div>\n            <div class=\"col-2 add_block\" (click)=\"addForm($event)\" *ngIf=\"toLoad <= 0 && authenticated\">\n              Добавить\n            </div>\n        </div>\n\n        <ng-container *ngIf=\"toLoad <= 0; else load\">\n            <div class=\"content_block block_my lib\" *ngIf=\"displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                    <form [formGroup]=\"myFilterRoot\">\n                        <br>\n                        <label class=\"container_checked\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"> Верифицированные практики\n                            <input type=\"checkbox\" (change)=\"onMyVerifiedChange()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Тематическая группа:</b>\n                            <input type=\"checkbox\" formControlName=\"tg\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.tg\">\n                            <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{myCounter('thematic_group', tg)}})\n                                <input type=\"checkbox\" [value]=\"tg.id\"\n                                    (change)=\"onMyCheckChange('tgFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Целевые группы:</b>\n                            <input type=\"checkbox\" formControlName=\"target\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.target\">\n                            <ng-container *ngFor=\"let target of targets\">\n                                <label class=\"container_checked\" *ngIf=\"!target.parent_ref\">{{target.name}}({{myCounter('target', target)}})\n                                    <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onMyCheckChange('targetFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"target.checkedMy\">\n                                    <div *ngFor=\"let child of targets\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{myCounter('target', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onMyCheckChange('targetFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Практики:</b>\n                            <input type=\"checkbox\" formControlName=\"practice\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.practice\">\n                            <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{myCounter('practice', practice)}})\n                                <input type=\"checkbox\" [value]=\"practice.id\"\n                                    (change)=\"onMyCheckChange('practiceFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Социальные результаты:</b>\n                            <input type=\"checkbox\" formControlName=\"outcome\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.outcome\">\n                            <label *ngFor=\"let outcome of outcomes\" class=\"container_checked\">{{outcome.name}}({{myCounter('outcome', outcome)}})\n                                <input type=\"checkbox\" [value]=\"outcome.id\"\n                                    (change)=\"onMyCheckChange('outcomeFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                    </form>\n                    </div>\n                    <div class=\"col-7 block_method_search\">\n                        <!-- <input class=\"search_input\" placeholder=\"Поиск по ключевым словам\" ctype=\"text\" name=\"\"> -->\n                        <h2>логические модели программ:</h2>\n                        <div class=\"item_seatchMethod\" *ngFor=\"let logicalModel of myLogicalModels\">\n                            <div class=\"name_block open_accessadd\" (click)=\"openAddPersonal(logicalModel)\"\n                            [ngClass]=\"{'check': transport.user && (!logicalModel.createdby || logicalModel.createdby.id != transport.user.id) && logicalModel.current_user_library, \n                            'checkMy': logicalModel.createdby && transport.user && logicalModel.createdby.id == transport.user.id && logicalModel.current_user_library,\n                            'uncheck': !logicalModel.current_user_library && (!logicalModel.createdby || !transport.user || logicalModel.createdby.id != transport.user.id), \n                            'uncheckMy': logicalModel.createdby && transport.user && !logicalModel.current_user_library && logicalModel.createdby.id == transport.user.id}\">\n                                <!-- <img src=\"/newpion/static/pionfront/assets/img/method_icon1.png\"> -->\n                                <img *ngIf=\"logicalModel.verification_info\"\n                                    src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"><br>\n                                <p>{{logicalModel.name}}</p>\n                            </div>\n                            <div (click)=\"openDetails(logicalModel)\" class=\"more_info\">\n                              <p class=\"center\"><img src=\"/newpion/static/pionfront/assets/img/info_mini.png\">Подробнее</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"content_block block_lib\" *ngIf=\"!displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                    <form [formGroup]=\"filterRoot\">\n                        <br>\n                        <label class=\"container_checked\"><img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"> Верифицированные практики\n                            <input type=\"checkbox\" (change)=\"onVerifiedChange()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Тематическая группа:</b>\n                            <input type=\"checkbox\" formControlName=\"tg\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.tg\">\n                            <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{counter('thematic_group', tg)}})\n                                <input type=\"checkbox\" [value]=\"tg.id\"\n                                    (change)=\"onCheckChange('tgFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Целевые группы:</b>\n                            <input type=\"checkbox\" formControlName=\"target\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.target\">\n                            <ng-container *ngFor=\"let target of targets\">\n                                <label class=\"container_checked\" *ngIf=\"!target.parent_ref\">{{target.name}}({{counter('target', target)}})\n                                    <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"target.checked\">\n                                    <div *ngFor=\"let child of targets\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{counter('target', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Практики:</b>\n                            <input type=\"checkbox\" formControlName=\"practice\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.practice\">\n                            <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{counter('practice', practice)}})\n                                <input type=\"checkbox\" [value]=\"practice.id\"\n                                    (change)=\"onCheckChange('practiceFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Социальные результаты:</b>\n                            <input type=\"checkbox\" formControlName=\"outcome\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.outcome\">\n                            <label *ngFor=\"let outcome of outcomes\" class=\"container_checked\">{{outcome.name}}({{counter('outcome', outcome)}})\n                                <input type=\"checkbox\" [value]=\"outcome.id\" (change)=\"onCheckChange('outcomeFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                    </form>\n                    </div>\n                    <div class=\"col-7 block_method_search\">\n                        <!-- <input class=\"search_input\" placeholder=\"Поиск по ключевым словам\" ctype=\"text\" name=\"\"> -->\n                        <h2>логические модели программ:</h2>\n                        <div class=\"item_seatchMethod\" *ngFor=\"let logicalModel of logicalModels\">\n                            <div class=\"name_block open_accessadd\" (click)=\"openAddPersonal(logicalModel)\"\n                                [ngClass]=\"{'check': transport.user && (!logicalModel.createdby || logicalModel.createdby.id != transport.user.id) && logicalModel.current_user_library, \n                                'checkMy': logicalModel.createdby && transport.user && logicalModel.createdby.id == transport.user.id && logicalModel.current_user_library,\n                                'uncheck': !logicalModel.current_user_library && (!logicalModel.createdby || !transport.user || logicalModel.createdby.id != transport.user.id), \n                                'uncheckMy': logicalModel.createdby && transport.user && !logicalModel.current_user_library && logicalModel.createdby.id == transport.user.id}\">\n                                <!-- <img src=\"/newpion/static/pionfront/assets/img/method_icon1.png\"> -->\n                                <img *ngIf=\"logicalModel.verification_info\"\n                                    src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE3IDIwIj4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iNi44ODkiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPGNpcmNsZSBjeD0iOC43NTMiIGN5PSI3LjU4OSIgcj0iMi44NDIiIHN0cm9rZT0iIzlBMjUyNSIgc3Ryb2tlLXdpZHRoPSIxLjQiLz4gICAgPHBhdGggc3Ryb2tlPSIjOUEyNTI1IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjEuMyIgZD0iTTMuMTg4IDEyLjY0OUwuNjU4IDE2LjE5aDMuMDM2bDEuMDEyIDMuMDM2IDMuMDM1LTQuNTU0TTEzLjgxMyAxMi42NDlsMi41MyAzLjU0MWgtMy4wMzZsLTEuMDEyIDMuMDM2LTMuMDM2LTQuNTU0Ii8+PC9zdmc+\"><br>\n                                <p>{{logicalModel.name}}</p>\n                            </div>\n                            <div (click)=\"openDetails(logicalModel)\" class=\"more_info\">\n\n                                <p class=\"center\"><img src=\"/newpion/static/pionfront/assets/img/info_mini.png\">Подробнее</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n        <ng-template #load>\n            <div class=\"content_block\">\n                <h4 class=\"center\">{{status}}</h4>\n            </div>\n        </ng-template>\n    </div>\n</section>\n\n\n\n\n\n<!-- Добавление ЛМ 1 -->\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"formPage == 1\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">Добавить логическую модель программы</p>\n        </div>\n        <div class=\"text_block\">\n            <form class=\" \" [formGroup]=\"formSelectProgram\">\n\n                <p class=\"line_descSel\">Название программы:</p>\n                <select  class=\"big_sellect\" formControlName=\"program\">\n                    <option checked disabled value=\"start\">Выберите из списка</option>\n                    <option [value]=\"program.id\" *ngFor=\"let program of programs\">{{program.name}}</option>\n                </select>\n\n                <button [disabled]=\"formSelectProgram.value.program == 'start'\" class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"editForm($event)\">Далее</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<!-- Модерация ЛМ 3 -->\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"formPage == 3\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">Логическая модель программы</p>\n        </div>\n        <div class=\"text_block\">\n            <form class=\"ng-untouched ng-pristine ng-invalid block_sendfor\">\n                <div class=\"midle_text\">\n                    <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n                    <p>Логическая модель успешно добавлена. Опубликовать в общей библиотеке?</p>\n                </div>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"addToAllLibrary($event)\">Да</button>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"closeForm()\">Нет</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<!-- Редактирование ЛМ 2 -->\n<div class=\"popap_kontst dark_block blue_head big_form\" *ngIf=\"formPage == 2\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">{{formEditModel.value.isNew ? 'Добавление новой' : 'Редактирование'}} логической модели</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"formEditModel\">\n                <p class=\"line_descSel\">Название программы:</p>\n                <textarea class=\"text_item\" formControlName=\"name\"></textarea>\n\n                <p class=\"line_descSel\">Сроки реализации программы:</p>\n                <input type=\"text\" formControlName=\"period\">\n\n                <p class=\"line_descSel\">Название организации:</p>\n                <textarea class=\"text_item\" formControlName=\"organization\"></textarea>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тематическая группа <span>(1)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Тематическая группа - нужен текст от Ольги </div> -->\n                </div>              \n                <select class=\"big_sellect\" formControlName=\"thematic_group_ref\"> \n                    <option value=\"\" disabled>Выберите тематическую группу</option>\n                    <option *ngFor=\"let group of thematicGroups\" [value]=\"group.id\">{{group.name}}</option>\n                </select>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тип практики <span>(2)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> Тип практики - нужен текст от Ольги </div> -->\n                </div>\n\n                <div class=\"check_block\">\n                    <div class=\"row\" formArrayName=\"practice_refs\" style=\"text-align: left;\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let practice of practices; index as i\" class=\"container_checked\"> {{practice.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Целевые группы <span>(3)</span>:</p>\n                    <!-- <div _ngcontent-flw-c49=\"\" class=\"desc_item3\"> Целевые группы - нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"block_list\">\n\n                    <div class=\"check_block\">\n                        <div class=\"row\" formArrayName=\"target_refs\" style=\"text-align: left;\">\n                            <div class=\"col-12\">\n                                <ng-container *ngFor=\"let target of targets; index as i\"> \n                                    <label class=\"container_checked\" style=\"text-align: left;\" *ngIf=\"!target.parent_ref\">\n                                        {{target.name}}\n                                        <input type=\"checkbox\" [formControlName]=\"i\">\n                                        <span class=\"checkmark\"></span>\n                                    </label>\n                                    <div *ngIf=\"formEditModel.value.target_refs[i] && !targets[i].parent_ref\">\n                                        <div *ngFor=\"let child of targets; index as j\" class=\"col\">\n                                            <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == targets[i].id\">\n                                                <label class=\"container_checked\" style=\"text-align: left;\">\n                                                    {{child.name}}\n                                                    <input type=\"checkbox\" [formControlName]=\"j\">\n                                                    <span class=\"checkmark\"></span>\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </ng-container>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Социальный результат <span>(4)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"outcome_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let outcome of outcomes; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{outcome.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <div class=\"block_year\">\n                    <p class=\"line_descSel\">Сведения о верификации практики, в рамках которой реализовывалась программа:</p>\n                    <p class=\"date_list\">\n                        Прошла верификацию в <input type=\"number\" name=\"\" min=\"1980\" max=\"2100\" formControlName=\"verification_info\"> г.\n\n                    </p>\n                </div>\n\n                <p class=\"line_descSel\">Регламентированность практики:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_regularity\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Обоснованность практики:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_validity\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Достижение социальных результатов:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_outcome_accessibility\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <p class=\"line_descSel\">Обоснованность данных о социальных результатах:</p>\n                <select  class=\"big_sellect\" formControlName=\"verification_level_outcome_validity\">\n                    <option value=\"\">Выберите из списка</option>\n                    <option value=\"Начальный\">Начальный</option>\n                    <option value=\"Базовый\">Базовый</option>\n                    <option value=\"Продвинутый\">Продвинутый</option>\n                </select>\n\n                <div class=\"row class_btns\">\n                    <div class=\"col-6\">\n                        <input type=\"file\" style=\"display: none;\" #model (change)=\"modelUpload($event)\">\n                        <button (click)=\"triggerModelFile()\" \n                        [ngClass]=\"{'selected_file': model_file || currentModel && currentModel.model_file, 'no_file': !model_file && !(currentModel && currentModel.model_file)}\">\n                        Загрузить логическую модель программы</button>\n                    </div>\n                    <div class=\"col-6\">\n                        <input type=\"file\" style=\"display: none;\" #result_tree (change)=\"resultTreeUpload($event)\">\n                        <button (click)=\"triggerResultTreeFile()\"\n                        [ngClass]=\"{'selected_file': currentModel && currentModel.result_tree_file || result_tree_file, 'no_file': !result_tree_file && !(currentModel && currentModel.result_tree_file)}\">\n                            Загрузить дерево результатов </button>\n                    </div>\n                </div>\n\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"editProgramFormSubmit($event)\" [disabled]=\"formEditModel.disabled || formEditModel.invalid\">{{formEditModel.value.isNew ? 'Добавить' : 'Обновить'}}</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_projInfo dark_block blue_head\" *ngIf=\"displayDetails\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeDetails()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Логическая модель программы</p>\n        </div>\n        <div class=\"text_block\">\n            <p>Название программы:<br><strong><span class=\"project_name\">{{currentModel.name}}</span></strong></p>\n            <p>Организация:<br><strong><span class=\"organization\">{{currentModel.organization}}</span></strong></p>\n            <p>Тематическая группа:<br><span class=\"font_500\" *ngIf=\"currentModel.thematic_group_ref\">\n                {{currentModel.thematic_group_ref.name}}\n            </span></p>\n            <p>Целевая группа:<span *ngFor=\"let target of currentModel.target_refs\"><br><span\n                        class=\"group font_500\">{{target.name}}</span></span></p>\n            <p>Тип практики:<span *ngFor=\"let practice of currentModel.practice_refs\"><br><span\n                        class=\"type font_500\">{{practice.name}}</span></span></p>\n            <p class=\"no_bottom\">Социальные результаты:</p>\n            <ul class=\"results\">\n                <li *ngFor=\"let outcome of currentModel.outcome_refs\">{{outcome.name}}</li>\n            </ul>\n            <p>Сроки реализации:<br><span class=\" font_500 deadlines\">{{currentModel.period}}</span></p>\n            <p>Сведения о верификации практики, в рамках которой реализовывалась программа:<br><span\n                    class=\"info font_500\">{{currentModel.verification_info}}</span></p>\n            <p class=\"no_bottom\">Уровни доказанности:</p>\n            <div class=\"level font_500\">\n                <p>Регламентированность практики: <strong>{{currentModel.verification_level_regularity}}</strong></p>\n                <p>Обоснованность практики: <strong>{{currentModel.verification_level_validity}}</strong></p>\n                <p>Достижение социальных результатов:\n                    <strong>{{currentModel.verification_level_outcome_accessibility}}</strong></p>\n                <p>Обоснованность данных о социальных результатах:\n                    <strong>{{currentModel.verification_level_outcome_validity}}</strong></p>\n            </div>\n            <div class=\"row\" *ngIf=\"currentModel.model_file && authenticated\">\n                <div class=\"col-12\"><button (click)=\"downloadFile(currentModel.model_file)\" class=\"add_button\"><img\n                            src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">Открыть логическую\n                        модель</button></div>\n            </div>\n            <div class=\"row\" *ngIf=\"currentModel.result_tree_file && authenticated\">\n                <div class=\"col-12\"><button (click)=\"downloadFile(currentModel.result_tree_file)\"\n                        class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">Открыть\n                        дерево результатов</button></div>\n            </div>\n\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_accessadd dark_block\" *ngIf=\"displayAddPersonal\">\n    <div>\n        <p (click)=\"closeAddPersonal()\" class=\"close_btn\"><img\n                src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>Включить в личную библиотеку инструментов{{currentModel.createdby && currentModel.createdby.id == transport.user.id ? ' или редактировать' : ''}}?</p>\n            <button (click)=\"addToLibrary()\" style=\"width: auto;\" class=\"add_button\">Включить</button>\n            <button *ngIf=\"currentModel.createdby && currentModel.createdby.id == transport.user.id\" (click)=\"editFormFromLibrary($event)\" style=\"width: auto;\" class=\"add_button\">Редактировать</button>\n        </div>\n    </div>\n</div>\n<div class=\"popap_accessadd dark_block\" *ngIf=\"displayRemovePersonal\">\n    <div>\n        <p (click)=\"closeAddPersonal()\" class=\"close_btn\"><img\n                src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>Исключить из личной библиотеки инструментов{{currentModel.createdby && currentModel.createdby.id == transport.user.id ? ' или редактировать' : ''}}?</p>\n            <button (click)=\"removeFromLibrary()\" style=\"width: auto;\" class=\"add_button\">Исключить</button>\n            <button *ngIf=\"currentModel.createdby && currentModel.createdby.id == transport.user.id\" (click)=\"editFormFromLibrary($event)\" style=\"width: auto;\" class=\"add_button\">Редактировать</button>\n        </div>\n    </div>\n</div>","export class MflImpacts {\n    id: number;\n    indicator: string;\n    plan: number;\n    period1: string;\n    fact1: number;\n    period2: string;\n    fact2: number;\n    period3: string;\n    fact3: number;\n    period4: string;\n    fact4: number;\n    program_ref: any;\n    mpl_ref: any;\n    sort_index: number;\n}","export class MflMidOutcomes {\n    id: number;\n    indicator: string;\n    plan: number;\n    period1: string;\n    fact1: number;\n    period2: string;\n    fact2: number;\n    period3: string;\n    fact3: number;\n    period4: string;\n    fact4: number;\n    program_ref: any;\n    mpl_ref: any;\n    sort_index: number;\n}","export class MflOutputs {\n    id: number;\n    indicator: string;\n    plan: number;\n    period1: string;\n    fact1: number;\n    period2: string;\n    fact2: number;\n    period3: string;\n    fact3: number;\n    period4: string;\n    fact4: number;\n    program_ref: any;\n    mpl_ref: any;\n    sort_index: number;\n}","export class MflShortOutcomes {\n    id: number;\n    indicator: string;\n    plan: number;\n    period1: string;\n    fact1: number;\n    period2: string;\n    fact2: number;\n    period3: string;\n    fact3: number;\n    period4: string;\n    fact4: number;\n    program_ref: any;\n    mpl_ref: any;\n    sort_index: number;\n}","export class MplImpacts {\n    id: string;\n    result_ref: any;\n    name: string;\n    indicator: string;\n    method: string;\n    tool: string;\n    tool_url: string;\n    frequency: string;\n    reporting: string;\n    program_ref: any;\n    suitable_tools: string[];\n    suitable_from_tools: string[];\n    sort_index: number;\n    tool_type: 'OutcomeMethods' | 'Tools'\n}","export class MplMidOutcomes {\n    id: string;\n    result_ref: any;\n    name: string;\n    indicator: string;\n    method: string;\n    tool: string;\n    tool_url: string;\n    frequency: string;\n    reporting: string;\n    program_ref: any;\n    suitable_tools: string[];\n    suitable_indicators: string[];\n    suitable_from_tools: string[];\n    sort_index: number;\n    tool_type: 'OutcomeMethods' | 'Tools'\n}","export class MplOutputs {\n    id: string;\n    result_ref: any;\n    name: string;\n    indicator: string;\n    method: string;\n    tool: string;\n    tool_url: string;\n    frequency: string;\n    reporting: string;\n    program_ref: any;\n    suitable_tools: string[];\n    suitable_from_tools: string[];\n    sort_index: number;\n    tool_type: 'OutcomeMethods' | 'Tools'\n\n    displayResultRef: boolean = false;\n    displayName: boolean = false;\n    displayIndicator: boolean = false;\n    displayMethod: boolean = false;\n    displayTool: boolean = false;\n    displayFrequency: boolean = false;\n    displayReporting: boolean = false;\n}","export class MplShortOutcomes {\n    id: string;\n    result_ref: any;\n    name: string;\n    indicator: string;\n    method: string;\n    tool: string;\n    tool_url: string;\n    frequency: string;\n    reporting: string;\n    program_ref: any;\n    suitable_tools: string[];\n    suitable_indicators: string[];\n    suitable_from_tools: string[];\n    sort_index: number;\n    tool_type: 'OutcomeMethods' | 'Tools'\n\n    displayResultRef: boolean = false;\n    displayName: boolean = false;\n    displayIndicator: boolean = false;\n    displayMethod: boolean = false;\n    displayTool: boolean = false;\n    displayFrequency: boolean = false;\n    displayReporting: boolean = false;\n}","import { Practice } from './practice';\nimport { Target } from './target';\nimport { User } from './user';\n\nexport class Program {\n    id: string;\n    name: string;\n    description: string;\n    period: string;\n    user_ref: User;\n    target_refs: Target[];\n    practice_refs: Practice[];\n    current_user: boolean;\n}","import { Component, Input } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { UserRequest } from 'src/app/models/userrequest';\n\n@Component({\n  selector: 'app-profile-card',\n  templateUrl: './profile-card.component.html',\n  styleUrls: ['./profile-card.component.scss']\n})\nexport class ProfileCardComponent  {\n\n  @Input() currentUserRequest: UserRequest;\n\n  constructor(private router: Router) { }\n\n  updateProfile(event) {\n    event.preventDefault();\n    \n    this.router.navigate(['/auth/profile']);\n  }\n\n}\n","<section class=\"block_program\" *ngIf=\"currentUserRequest\">\n    <div>\n        <div class=\"row head_result\">\n            <div class=\"col-4 blue_item \">\n                <h1 class=\"uppercase\">Организация</h1>\n            </div>\n            <div class=\"col-4\">\n                <p class=\"name_program\">{{currentUserRequest.organization}}</p>\n                <p class=\"desc_program\">{{currentUserRequest.region}}</p>\n            </div>\n            <div class=\"col-4 right\">\n                <button class=\"open_button orange_inform\" (click)=\"updateProfile($event)\"><img src=\"/newpion/static/pionfront/assets/img/pencil_white.png\"></button>\n            </div>\n        </div>\n        <div class=\"block_programDesc\">\n            <div class=\"row \">\n                <div class=\"col-4 user_info\">\n                    <p class=\"font_500\"><span>E-mail:</span> {{currentUserRequest.email}}</p>\n                    <p class=\"font_500\"><span>Фамилия:</span> {{currentUserRequest.lastname}}</p>\n                    <p class=\"font_500\"><span>Имя:</span> {{currentUserRequest.firstname}}</p>\n                    <p class=\"font_500\"><span>Отчество:</span> {{currentUserRequest.middlename}}</p>\n                    <p class=\"font_500\"><span>Должность:</span> {{currentUserRequest.position}}</p>\n                </div>\n                <div class=\"col-6 inter_link\">\n                    <a class=\"font_500\" href=\"{{currentUserRequest.website}}\" target=\"_blank\"><img\n                            src=\"/newpion/static/pionfront/assets/img/www.png\">\n                        <p>{{currentUserRequest.website}}</p>\n                    </a>\n                </div>\n                <div class=\"col-2\"></div>\n            </div>\n        </div>\n    </div>\n</section>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Program } from 'src/app/models/program';\nimport { UserRequest } from 'src/app/models/userrequest';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-program-card',\n  templateUrl: './program-card.component.html',\n  styleUrls: ['./program-card.component.scss']\n})\n\nexport class ProgramCardComponent {\n  baseUrl = environment.baseUrl\n\n  @Input() program: Program\n  @Input() currentUserRequest: UserRequest\n\n  constructor(\n    private router: Router) { }\n  \n  idToDownload: string = null;\n\n  openProgram(program: Program) {\n    this.router.navigate(['/program/' + program.id]);\n  }\n\n  downloadProgram(event) {\n    event.preventDefault();\n\n    window.open(this.baseUrl+\"newpion/api/download?program_id=\"+this.idToDownload, \"_blank\");\n  }\n\n  downloadPlan(event) {\n    event.preventDefault();\n\n    window.open(this.baseUrl+\"newpion/api/download-plan?program_id=\"+this.idToDownload, \"_blank\");\n  }\n\n  downloadForm(event) {\n    event.preventDefault();\n    \n    window.open(this.baseUrl+\"newpion/api/download-form?program_id=\"+this.idToDownload, \"_blank\");\n  }\n\n}\n","<section class=\"block_program_list\">\n    <div>\n        <div class=\"row head_result\">\n            <div class=\"col-4 blue_item \">\n                <h1 class=\"uppercase\">Программа</h1>\n            </div>\n            <div class=\"col-6\">\n                <ng-container *ngIf=\"currentUserRequest\">\n                    <p class=\"name_program\">{{currentUserRequest.organization}}</p>\n                    <p class=\"desc_program\">{{currentUserRequest.region}}</p>\n                </ng-container>\n            </div>\n            <div class=\"col-2 right\">\n                <!-- <button class=\"open_button open_prog\" sost=\"close\"><img\n                        src=\"/newpion/static/pionfront/assets/img/arrow_open.png\"></button> -->\n                <button (click)=\"openProgram(program)\" class=\"open_button orange_inform \"><img\n                        src=\"/newpion/static/pionfront/assets/img/pencil_white.png\"></button>\n            </div>\n        </div>\n        <div class=\"block_programDesc\">\n            <div class=\"row\">\n                <div class=\"col-9 border_right\">\n                    <textarea disabled rows=\"1\" class=\"name\" placeholder=\"Название вашей программы\">{{program.name}}</textarea>\n                    <textarea disabled rows=\"1\" placeholder=\"Описание\">{{program.description}}</textarea>\n                </div>\n                <div class=\"col-3\">\n                    <input disabled type=\"text\" name=\"\" placeholder=\"дд.мм.гг - дд.мм.гг\" value=\"{{program.period}}\">\n                </div>\n            </div>\n            <div class=\"row close_block\">\n                <div class=\"col-4 user_info\">\n                    <h3>Практики</h3>\n\n                    <label *ngFor=\"let practice of program.practice_refs\">\n                        {{practice.name}}<br><br>\n                    </label>\n                </div>\n                <div class=\"col-1 inter_link\"></div>\n                <div class=\"col-4 inter_link\">\n                    <h3>Целевые группы</h3>\n\n                    <label *ngFor=\"let target of program.target_refs\">\n                        {{target.name}}<br><br>\n                    </label>\n                </div>\n            </div>\n        </div>\n        <div class=\"row btn_newProg close_block\">\n            <div class=\"col-6 center\">\n                <button (click)=\"openProgram(program)\" class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/graf.png\">\n                    <p>Цепочка социальных результатов</p>\n                </button>\n            </div>\n            <div class=\"col-6 center\">\n                <button (click)=\"idToDownload = program.id\" class=\"add_button open_download\"><img src=\"/newpion/static/pionfront/assets/img/cloud_save2.png\">\n                    <p>Продукты для скачивания</p>\n                </button> \n            </div>\n        </div>\n    </div>   \n</section>\n\n\n<div class=\"popap_download dark_block blue_head\" *ngIf=\"idToDownload\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\" (click)=\"idToDownload = null\"><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Продукты для скачивания</p>\n        </div>\n        <div (click)=\"downloadProgram($event)\" class=\"text_block\" style=\"cursor: pointer;\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img1.png\">\n            <p>Цепочка социальных результатов (таблица)</p>\n        </div>\n        <!-- <div class=\"text_block\" style=\"cursor: pointer;\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img2.png\">\n            <p>Цепочка социальных результатов (схема)</p>\n        </div> -->\n        <div (click)=\"downloadPlan($event)\" class=\"text_block\" style=\"cursor: pointer;\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img3.png\">\n            <p>План мониторинга</p>\n        </div>\n        <div (click)=\"downloadForm($event)\" class=\"text_block\" style=\"cursor: pointer;\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img4.png\">\n            <p>Рабочая форма мониторинга</p>\n        </div>\n    </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { TransportService } from '../services/transport.service';\nimport { Router } from '@angular/router';\nimport { UserRequest } from '../models/userrequest';\nimport { Program } from '../models/program';\n\n@Component({\n  selector: 'app-program-list',\n  templateUrl: './program-list.component.html',\n  styleUrls: ['./program-list.component.scss']\n})\nexport class ProgramListComponent implements OnInit {\n\n  constructor(public fb: FormBuilder,\n    public transport: TransportService,\n    public router: Router) { }\n\n  status: string = 'ЗАГРУЗКА...'\n  idToDownload: string = null;\n  programs: Program[];\n  myPrograms: Program[];\n  userRequests: UserRequest[];\n  currentUserRequest: UserRequest;\n  toLoad = 2\n\n  ngOnInit(): void {\n    this.transport.get(\"programs/\").then((programsData) => {\n      this.programs = programsData.results;\n      this.myPrograms = this.programs.filter(el => el.current_user);\n      if (this.myPrograms.length == 0) this.status = \"У ВАС НЕТ ПРОГРАММ\"\n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });;\n    this.transport.get(\"user-requests/\").then((userRequestsData) => {\n      this.userRequests = userRequestsData.results;\n      this.currentUserRequest = this.userRequests.find(el => el.current_user);       \n      this.toLoad -= 1\n    }).catch(error => {\n      console.log(error)\n      this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n    });;\n  }\n\n  newProgram() {\n    this.router.navigate(['/program']);\n  }\n\n}\n","<app-profile-card *ngIf=\"currentUserRequest\" [currentUserRequest]=\"currentUserRequest\"></app-profile-card>\n\n<section>\n    <div>\n        <h2 class=\"center\">ВАШИ ПРОГРАММЫ</h2>\n    </div>\n</section>\n\n<div *ngIf=\"myPrograms && myPrograms.length; else empty\">\n    <app-program-card *ngFor=\"let program of myPrograms\" [program]=\"program\" [currentUserRequest]=\"currentUserRequest\"></app-program-card>\n</div>\n\n <ng-template #empty>\n    <section>\n        <div>\n            <h4 class=\"center\">{{status}}</h4>\n        </div>\n    </section>\n</ng-template>\n\n<section class=\"block_program_add\">\n    <div class=\"center\">\n        <button (click)=\"newProgram()\" class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus.png\">\n            <p>Добавить программу</p>\n        </button>\n    </div>\n</section>\n\n\n\n\n\n\n<!-- <div class=\"popap_accessadd dark_block\" style=\"display: none;\">\n    <div>\n        <p class=\"close_btn\"><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>«Включить в личную библиотеку социальных результатов?</p>\n            <button style=\"width: auto;\" class=\"add_button\">Включить</button>\n        </div>\n    </div>\n</div> -->","import { Component, ComponentFactoryResolver, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FormBuilder, Validators, FormArray, FormControl, FormGroup } from '@angular/forms';\nimport { TransportService } from '../services/transport.service';\nimport { Program } from '../models/program';\nimport { UserRequest } from '../models/userrequest';\nimport { Practice } from '../models/practice';\nimport { Target } from '../models/target';\nimport { Context } from '../models/context';\nimport { Assumption } from '../models/assumption';\nimport { Activity } from '../models/activity';\nimport { ProgramOutput } from '../models/programoutput';\nimport { ProgramShortOutcome } from '../models/programshortoutcome';\nimport { ProgramMidOutcome } from '../models/programmidoutcome';\nimport { ProgramImpact } from '../models/programimpact';\nimport { MplImpacts } from '../models/mplimpacts';\nimport { MplMidOutcomes } from '../models/mplmidoutcomes';\nimport { MplOutputs } from '../models/mploutputs';\nimport { MplShortOutcomes } from '../models/mplshortoutcomes';\nimport { MflOutputs } from '../models/mfloutputs';\nimport { MflShortOutcomes } from '../models/mflshortoutcomes';\nimport { MflMidOutcomes } from '../models/mflmidoutcomes';\nimport { MflImpacts } from '../models/mflimpacts';\nimport { TargetDescription } from '../models/targetdescription';\nimport { OutcomeMethod } from '../models/outcomemethod';\nimport { OutcomeIndicator } from '../models/outcomeindicator';\nimport { environment } from 'src/environments/environment';\nimport { Method } from '../models/method';\nimport { Tool } from '../models/tool';\nimport { RefDirective } from '../classes/ref.directive';\nimport { ShowModalComponent } from '../show-modal/show-modal.component';\n\n// import { debug } from 'console';\n\n\n@Component({\n  selector: 'app-program',\n  templateUrl: './program.component.html',\n  styleUrls: ['./program.component.scss']\n})\n\nexport class ProgramComponent implements OnInit {\n  @ViewChild('help_block') help_block: ElementRef \n  @ViewChild('helpItem1') helpItem1: ElementRef \n  @ViewChild('helpItem2') helpItem2: ElementRef \n  @ViewChild(RefDirective) refDir: RefDirective\n\n  id: string;\n  baseUrl = environment.baseUrl\n  constructor(private activateRoute: ActivatedRoute,\n    private resolver: ComponentFactoryResolver,\n    public fb: FormBuilder,\n    public transport: TransportService,\n    public router: Router) {\n    this.id = activateRoute.snapshot.params['id'];\n  }\n\n  public programForm = this.fb.group({\n    name: ['', Validators.required],\n    description: ['', Validators.required],\n    period: ['', Validators.required],\n    user_ref: ['', Validators.required],\n    target_refs: new FormArray([]),\n    practice_refs: new FormArray([]),\n  });\n  \n  public programEdit = this.fb.group({\n    contexts: new FormArray([]), \n    assumptions: new FormArray([])\n  });\n\n  public assumptionAddForm = this.fb.group({\n    text: ['', Validators.required]\n  });\n  public contextAddForm = this.fb.group({\n    text: ['', Validators.required]\n  });\n  public targetDescriptionAddForm = this.fb.group({\n    info: [''],\n    target_ref: ['']\n  });\n  public activityAddForm = this.fb.group({\n    name: ['', Validators.required],\n    target_ref: [''],\n    info: ['']\n  });\n  public programOutputAddForm = this.fb.group({\n    name: ['', Validators.required],\n    activity_ref: [''],\n    info: ['']\n  });\n  public programShortOutcomeAddForm = this.fb.group({\n    name: ['', Validators.required],\n    program_output_ref: [''],\n    info: [''],\n    program_output_many_refs: new FormArray([]),\n  });\n  public programMidOutcomeAddForm = this.fb.group({\n    name: ['', Validators.required],\n    program_short_outcome_ref: [''],\n    info: [''],\n    program_short_outcome_many_refs: new FormArray([]),\n  });\n  public programImpactAddForm = this.fb.group({\n    name: ['', Validators.required],\n    program_mid_outcome_ref: [''],\n    info: [''],\n    program_mid_outcome_many_refs: new FormArray([]),\n  });\n\n  program: Program;\n  userRequests: UserRequest[];\n  currentUserRequest: UserRequest;\n  practices: Practice[];\n  targets: Target[];\n  toLoad: number = 4;\n\n  contexts: Context[] = [];\n  assumptions: Assumption[] = [];\n  activities: Activity[] = [];\n  programOutputs: ProgramOutput[] = [];\n  programShortOutcomes: ProgramShortOutcome[] = [];\n  programMidOutcomes: ProgramMidOutcome[] = [];\n  programImpacts: ProgramImpact[] = [];\n\n  mplOutputs: MplOutputs[] = [];\n  mplShortOutcomes: MplShortOutcomes[] = [];\n  mplMidOutcomes: MplMidOutcomes[] = [];\n  mplImpacts: MplImpacts[] = [];\n\n  mflOutputs: MflOutputs[] = [];\n  mflShortOutcomes: MflShortOutcomes[] = [];\n  mflMidOutcomes: MflMidOutcomes[] = [];\n  mflImpacts: MflImpacts[] = [];\n\n  showAssumptionAdd: boolean = false;\n  showContextAdd: boolean = false;\n  showTargetDescription: boolean = false;\n  showActivityAdd: boolean = false;\n  showProgramOutputAdd: boolean = false;\n  showShortProgramOutcomeAdd: boolean = false;\n  showMidProgramOutcomeAdd: boolean = false;\n  showProgramImpactAdd: boolean = false;\n\n  editingAssumption: Assumption;\n  editingContext: Context;\n  editingTargetDescription: TargetDescription;\n  editingTargetDescriptionSubject: Target;\n  editingActivity: Activity;\n  editingProgramOutput: ProgramOutput;\n  editingShortProgramOutcome: ProgramShortOutcome;\n  editingMidProgramOutcome: ProgramMidOutcome;\n  editingProgramImpact: ProgramImpact;\n  methods: Method[]\n  tools: Tool[]\n\n  displayDownloader: boolean = false;\n  displayProgramDetails: boolean = false;\n  displayChain: boolean = false;\n  displayInnerChain: boolean = false;\n  displayPlanForm: boolean = false;\n  displayPlan: boolean = false;\n  displayPlanOutput: boolean = false;\n  displayPlanShortOutcome: boolean = false;\n  displayPlanMidOutcome: boolean = false;\n  displayPlanImpact: boolean = false;\n  displayForm: boolean = false;\n  displayFormOutput: boolean = false;\n  displayFormShortOutcome: boolean = false;\n  displayFormMidOutcome: boolean = false;\n  displayFormImpact: boolean = false;\n\n  displayProgressLine: boolean = false;\n\n  itemNum1Active: boolean = false;\n  itemNum2Active: boolean = false;\n  itemNum3Active: boolean = false;\n  itemNum4Active: boolean = false;\n  itemNum5Active: boolean = false;\n  itemNum6Active: boolean = false;\n  itemNum7Active: boolean = false;\n\n  outcomeIndicators: OutcomeIndicator[]\n  outcomeMethods: OutcomeMethod[]\n\n  ngOnInit(): void {\n    this.programForm.disable()\n    // console.log(this.programForm)\n    if (!this.id) {\n      this.displayProgramDetails = true;\n      this.program = new Program();\n      this.program.target_refs = [];\n      this.program.practice_refs = [];\n      this.programForm.enable()\n      this.toLoad -= 1;\n    } else {\n      this.transport.getExact('programs', this.id).then(programData => {\n        this.program = programData;\n        this.programForm.controls['name'].setValue(this.program.name);\n        this.programForm.controls['description'].setValue(this.program.description);\n        this.programForm.controls['period'].setValue(this.program.period);\n        this.programForm.controls['user_ref'].setValue(this.program.user_ref.id);\n        this.fillFormArrayWithId('target_refs', this.program.target_refs);\n        this.fillFormArrayWithId('practice_refs', this.program.practice_refs);\n        this.programForm.enable()\n        this.toLoad -= 1;\n\n        this.program.target_refs.forEach(target => {\n          this.transport.get(\"target-descriptions/?program_ref=\" + this.id + \"&target_ref=\" + target.id).then(targetDescriptionsData => {\n            if (targetDescriptionsData.results && targetDescriptionsData.results.length > 0)\n              target.targetDescription = targetDescriptionsData.results[0];\n          })\n        });\n\n      });\n    }\n\n    this.transport.get(\"user-requests/\").then((userRequestsData) => {\n      this.userRequests = userRequestsData.results;\n      for (var userRequest of this.userRequests) {\n        if (userRequest.current_user) {\n          this.currentUserRequest = userRequest;\n          this.programForm.controls['user_ref'].setValue(this.currentUserRequest.user_ref.id);\n          break;\n        }\n      }\n      this.toLoad -= 1;\n    });\n\n    this.transport.get(\"practices/\").then((practicesData) => {\n      this.practices = practicesData.results;\n      this.toLoad -= 1;\n    });\n\n    this.transport.get(\"targets/?parent_ref=0\").then((targetsData) => {\n      this.targets = targetsData.results;\n\n      this.toLoad -= 1;\n    });\n\n    if (this.id) {\n      this.transport.get(\"contexts/?program_ref=\" + this.id).then((contextsData) => {\n        this.contexts = contextsData.results;\n        let lenght = this.contexts.length;\n        for (let i = 0; i < lenght; i++) {\n          let contexts = this.programEdit.get('contexts') as FormArray;\n          contexts.push(new FormGroup({context_name: new FormControl(this.contexts[i].text), context_edit: new FormControl(false)}));\n        }\n      });\n\n      this.transport.get(\"assumptions/?program_ref=\" + this.id).then((assumptionsData) => {\n        this.assumptions = assumptionsData.results;\n        let lenght = this.assumptions.length;\n        for (let i = 0; i < lenght; i++) {\n          let assumptions = this.programEdit.get('assumptions') as FormArray;\n          assumptions.push(new FormGroup({assumption_name: new FormControl(this.assumptions[i].text), assumption_edit: new FormControl(false)}));\n        }\n      });\n\n      this.transport.get(\"activities/?program_ref=\" + this.id).then((activitiesData) => {\n        this.activities = activitiesData.results;\n      });\n\n      this.transport.get(\"program-outputs/?program_ref=\" + this.id).then((programOutputData) => {\n        this.programOutputs = programOutputData.results;\n      });\n\n      this.transport.get(\"program-short-outcomes/?program_ref=\" + this.id).then((programShortOutcomeData) => {\n        this.programShortOutcomes = programShortOutcomeData.results;\n      });\n\n      this.transport.get(\"program-mid-outcomes/?program_ref=\" + this.id).then((programMidOutcomeData) => {\n        this.programMidOutcomes = programMidOutcomeData.results;\n      });\n\n      this.transport.get(\"program-impacts/?program_ref=\" + this.id).then((programImpactData) => {\n        this.programImpacts = programImpactData.results;\n      });\n\n      this.transport.get(\"mpl-outputs/?program_ref=\" + this.id).then((mplOutputsData) => {\n        this.mplOutputs = mplOutputsData.results;\n      });\n\n      this.transport.get(\"mpl-short-outcomes/?program_ref=\" + this.id).then((mplShortOutcomesData) => {\n        this.mplShortOutcomes = mplShortOutcomesData.results;\n      });\n\n      this.transport.get(\"mpl-mid-outcomes/?program_ref=\" + this.id).then((mplMidOutcomesData) => {\n        this.mplMidOutcomes = mplMidOutcomesData.results;\n      });\n\n      this.transport.get(\"mpl-impacts/?program_ref=\" + this.id).then((mplImpactsData) => {\n        this.mplImpacts = mplImpactsData.results;\n      });\n\n      this.transport.get(\"mfl-outputs/?program_ref=\" + this.id).then((mflOutputsData) => {\n        this.mflOutputs = mflOutputsData.results;\n      });\n\n      this.transport.get(\"mfl-short-outcomes/?program_ref=\" + this.id).then((mflShortOutcomesData) => {\n        this.mflShortOutcomes = mflShortOutcomesData.results;\n      });\n\n      this.transport.get(\"mfl-mid-outcomes/?program_ref=\" + this.id).then((mflMidOutcomesData) => {\n        this.mflMidOutcomes = mflMidOutcomesData.results;\n      });\n\n      this.transport.get(\"mfl-impacts/?program_ref=\" + this.id).then((mflImpactsData) => {\n        this.mflImpacts = mflImpactsData.results;\n      });\n\n      this.transport.get(\"methods/?parent_ref=0\").then((methodsData) => {\n        this.methods = methodsData.results;\n      }).catch(error => {\n        console.log(error)\n      });\n\n      // this.transport.get(\"tools/\").then((methodsData) => {\n      //   this.tools = methodsData.results;\n      // }).catch(error => {\n      //   console.log(error)\n      // });\n\n    }\n\n    // scheme\n    // var self = this;\n\n    // var canvas: any = document.getElementById(\"np-canvas\");\n\n    // var translatePos = {\n    //   x: canvas.width / 2,\n    //   y: canvas.height / 2\n    // };\n\n    // var scale = 1.0;\n    // var scaleMultiplier = 0.8;\n    // var startDragOffset: any = {};\n    // var mouseDown = false;\n\n    // // add button event listeners\n    // document.getElementById(\"plus\").addEventListener(\"click\", function () {\n    //   scale /= scaleMultiplier;\n    //   self.draw(scale, translatePos);\n    // }, false);\n\n    // document.getElementById(\"minus\").addEventListener(\"click\", function () {\n    //   scale *= scaleMultiplier;\n    //   self.draw(scale, translatePos);\n    // }, false);\n\n    // // add event listeners to handle screen drag\n    // canvas.addEventListener(\"mousedown\", function (evt) {\n    //   mouseDown = true;\n    //   startDragOffset.x = evt.clientX - translatePos.x;\n    //   startDragOffset.y = evt.clientY - translatePos.y;\n    // });\n\n    // canvas.addEventListener(\"mouseup\", function (evt) {\n    //   mouseDown = false;\n    // });\n\n    // canvas.addEventListener(\"mouseover\", function (evt) {\n    //   mouseDown = false;\n    // });\n\n    // canvas.addEventListener(\"mouseout\", function (evt) {\n    //   mouseDown = false;\n    // });\n\n    // canvas.addEventListener(\"mousemove\", function (evt) {\n    //   if (mouseDown) {\n    //     translatePos.x = evt.clientX - startDragOffset.x;\n    //     translatePos.y = evt.clientY - startDragOffset.y;\n    //     self.draw(scale, translatePos);\n    //   }\n    // });\n\n    // self.draw(scale, translatePos);\n  }\n\n  onSubmit() {\n    console.dir(this.programForm);\n\n    if (this.id) {\n      // PUT data\n      this.programForm.value.id = Number(this.id);\n      this.transport.put(\"programs/\", this.id, this.programForm.value).then((res: Program) => {\n        this.program = res\n        this.openNotification(false)\n      }, err => {\n         \n        this.openNotification(true)\n        console.dir(err);\n      });\n    } else {\n      // POST data\n      this.transport.post(\"programs/\", this.programForm.value).then((res: Program) => {\n        this.router.navigate(['program/' + res.id]);\n      }, err => {\n        this.openNotification(true)\n        console.dir(err);\n      });\n    }    \n  }\n\n  hideHelpBlock() {\n    this.help_block.nativeElement.remove()\n  }\n\n  hideHelpItem(item) {\n    if (item === 1) {\n      this.helpItem1.nativeElement.remove()\n    } else if (item === 2) {\n      this.helpItem2.nativeElement.remove()\n    }\n  }\n\n  clickEditContext(i) {\n    const newValue = !this.programEdit.value.contexts[i].context_edit\n    let contexts = this.programEdit.get('contexts') as FormArray;\n    let context = contexts.at(i) as FormGroup\n    context.patchValue({context_edit: newValue})\n  }\n\n  clickEditAssumption(i) {\n    const newValue = !this.programEdit.value.assumptions[i].assumption_edit\n    let assumptions = this.programEdit.get('assumptions') as FormArray;\n    let assumption = assumptions.at(i) as FormGroup\n    assumption.patchValue({assumption_edit: newValue})\n  }\n\n  deleteAssumption(i) {\n    const id = this.assumptions[i].id\n    this.transport.delete(\"assumptions/\", String(id)).then((res: any) => {\n      this.assumptions.splice(i, 1)\n      let assumptions = this.programEdit.get('assumptions') as FormArray;\n      assumptions.removeAt(i)\n    }, error => { console.dir(error) });\n  }\n\n  deleteContext(i) {  \n    const id = this.contexts[i].id\n    this.transport.delete(\"contexts/\", String(id)).then((res: any) => {\n      this.contexts.splice(i, 1)\n      let contexts = this.programEdit.get('contexts') as FormArray;\n      contexts.removeAt(i)         \n    }, error => { console.dir(error) });\n  }\n\n  onCheckChange(formArrayName, event) {\n    let formArray: FormArray;\n\n    if (formArrayName == 'program_output_many_refs') {\n      formArray = this.programShortOutcomeAddForm.get(formArrayName) as FormArray;;\n    }\n    else if (formArrayName == 'program_short_outcome_many_refs') {\n      formArray = this.programMidOutcomeAddForm.get(formArrayName) as FormArray;;\n    }\n    else if (formArrayName == 'program_mid_outcome_many_refs') {\n      formArray = this.programImpactAddForm.get(formArrayName) as FormArray;;\n    } else {\n      formArray = this.programForm.get(formArrayName) as FormArray;;\n    }\n\n    /* Selected */\n    if (event.target.checked) {\n      // Add a new control in the arrayForm\n      formArray.push(new FormControl(Number(event.target.value)));\n    }\n    /* unselected */\n    else {\n      // find the unselected element\n      let i: number = 0;\n\n      formArray.controls.forEach((ctrl: FormControl) => {\n        if (ctrl.value == event.target.value) {\n          // Remove the unselected element from the arrayForm\n          formArray.removeAt(i);\n          return;\n        }\n\n        i++;\n      });\n    }\n  }\n\n  fillFormArrayWithId(formArrayName: string, dataList: any[]) {\n     \n    let formArray: FormArray;\n\n    if (formArrayName == 'program_output_many_refs') {\n      formArray = this.programShortOutcomeAddForm.get(formArrayName) as FormArray;\n    }\n    else if (formArrayName == 'program_short_outcome_many_refs') {\n      formArray = this.programMidOutcomeAddForm.get(formArrayName) as FormArray;;\n    }\n    else if (formArrayName == 'program_mid_outcome_many_refs') {\n      formArray = this.programImpactAddForm.get(formArrayName) as FormArray;;\n    } else {\n      formArray = this.programForm.get(formArrayName) as FormArray;;\n    }\n\n    if (dataList != null && dataList != undefined) {\n      for (let index = 0; index < dataList.length; index++) {\n        const element = dataList[index];\n        formArray.push(new FormControl(element.id));\n      }\n    }\n    // dataList.forEach(element => {\n\n    // });\n  }\n\n  practiceShouldBeChecked(practice: Practice): boolean {\n    return this.program.practice_refs.some(el => el.id == practice.id);\n  }\n  targetShouldBeChecked(target: Target): boolean {\n    return this.program.target_refs.some(el => el.id == target.id);\n  }\n  programOutputShouldBeChecked(programOutput: ProgramOutput): boolean { // editingShortProgramOutcome && editingShortProgramOutcome.program_output_ref && (editingShortProgramOutcome.program_output_ref == programOutput.id || editingShortProgramOutcome.program_output_ref.id == programOutput.id)\n    if (!this.editingShortProgramOutcome || !this.editingShortProgramOutcome.program_output_many_refs)\n      return false;\n    return this.editingShortProgramOutcome.program_output_many_refs.some(el => el.id == programOutput.id);\n  }\n  programShortOutcomeShouldBeChecked(programShortOutcome: ProgramShortOutcome): boolean { // editingMidProgramOutcome && editingMidProgramOutcome.program_short_outcome_ref && editingMidProgramOutcome.program_short_outcome_ref.id == programShortOutcome.id\n    if (!this.editingMidProgramOutcome || !this.editingMidProgramOutcome.program_short_outcome_many_refs)\n      return false;\n    return this.editingMidProgramOutcome.program_short_outcome_many_refs.some(el => el.id == programShortOutcome.id);\n  }\n  programMidOutcomeShouldBeChecked(programMidOutcome: ProgramMidOutcome): boolean { // editingProgramImpact && editingProgramImpact.program_mid_outcome_ref && editingProgramImpact.program_mid_outcome_ref.id == programMidOutcome.id\n    if (!this.editingProgramImpact || !this.editingProgramImpact.program_mid_outcome_many_refs)\n      return false;\n    return this.editingProgramImpact.program_mid_outcome_many_refs.some(el => el.id == programMidOutcome.id);\n  }\n\n  openAssumptionAdd() {\n    this.showAssumptionAdd = true;\n  }\n  openContextAdd() {\n    this.showContextAdd = true;\n  }\n  openActivityAdd() {\n    this.showActivityAdd = true;\n  }\n  openProgramOutputAdd() {\n    this.showProgramOutputAdd = true;\n  }\n  openShortProgramOutcomeAdd() {\n    this.showShortProgramOutcomeAdd = true;\n  }\n  openMidProgramOutcomeAdd() {\n    this.showMidProgramOutcomeAdd = true;\n  }\n  openProgramImpactAdd() {\n    this.showProgramImpactAdd = true;\n  }\n\n  openAssumptionEdit(editingObject) {\n    this.editingAssumption = editingObject;\n    this.assumptionAddForm.controls['text'].setValue(editingObject.text)\n    this.showAssumptionAdd = true;\n  }\n  openContextEdit(editingObject) {\n    this.editingContext = editingObject;\n    this.contextAddForm.controls['text'].setValue(editingObject.text);\n    this.showContextAdd = true;\n  }\n  openTargetDescriptionEdit(editingObject) {\n    this.editingTargetDescriptionSubject = editingObject;\n    this.targetDescriptionAddForm.controls['target_ref'].setValue(editingObject.id);\n    if (editingObject.targetDescription) {\n      this.editingTargetDescription = editingObject.targetDescription;\n      this.targetDescriptionAddForm.controls['info'].setValue(this.editingTargetDescription.info);\n    }\n    this.showTargetDescription = true;\n  }\n  openActivityEdit(editingObject) {\n    this.editingActivity = editingObject;\n    this.activityAddForm.controls['name'].setValue(editingObject.name);\n    if (editingObject.target_ref)\n      this.activityAddForm.controls['target_ref'].setValue(editingObject.target_ref.id);\n    this.activityAddForm.controls['info'].setValue(editingObject.info);\n    this.showActivityAdd = true;\n  }\n  openProgramOutputEdit(editingObject) {\n    this.editingProgramOutput = editingObject;\n    this.programOutputAddForm.controls['name'].setValue(editingObject.name);\n    if (editingObject.activity_ref)\n      this.programOutputAddForm.controls['activity_ref'].setValue(editingObject.activity_ref.id);\n    this.programOutputAddForm.controls['info'].setValue(editingObject.info);\n\n    this.showProgramOutputAdd = true;\n  }\n  openShortProgramOutcomeEdit(editingObject) {\n    this.editingShortProgramOutcome = editingObject;\n    this.programShortOutcomeAddForm.controls['name'].setValue(editingObject.name);\n    if (editingObject.program_output_ref)\n      this.programShortOutcomeAddForm.controls['program_output_ref'].setValue(editingObject.program_output_ref.id);\n    this.programShortOutcomeAddForm.controls['info'].setValue(editingObject.info);\n\n    // this.programShortOutcomeAddForm.controls['program_output_many_refs'].setValue(new FormArray([]));\n\n    this.fillFormArrayWithId('program_output_many_refs', editingObject.program_output_many_refs);\n\n    this.showShortProgramOutcomeAdd = true;\n  }\n  openMidProgramOutcomeEdit(editingObject) {\n    this.editingMidProgramOutcome = editingObject;\n    this.programMidOutcomeAddForm.controls['name'].setValue(editingObject.name);\n    if (editingObject.program_short_outcome_ref)\n      this.programMidOutcomeAddForm.controls['program_short_outcome_ref'].setValue(editingObject.program_short_outcome_ref.id);\n    this.programMidOutcomeAddForm.controls['info'].setValue(editingObject.info);\n\n    // this.programMidOutcomeAddForm.controls['program_short_outcome_many_refs'].setValue(new FormArray([]));\n\n    this.fillFormArrayWithId('program_short_outcome_many_refs', editingObject.program_short_outcome_many_refs);\n\n    this.showMidProgramOutcomeAdd = true;\n  }\n  openProgramImpactEdit(editingObject) {\n    this.editingProgramImpact = editingObject;\n    this.programImpactAddForm.controls['name'].setValue(editingObject.name);\n    if (editingObject.program_mid_outcome_ref)\n      this.programImpactAddForm.controls['program_mid_outcome_ref'].setValue(editingObject.program_mid_outcome_ref.id);\n    this.programImpactAddForm.controls['info'].setValue(editingObject.info);\n\n    // this.programImpactAddForm.controls['program_mid_outcome_many_refs'].setValue(new FormArray([]));\n\n    this.fillFormArrayWithId('program_mid_outcome_many_refs', editingObject.program_mid_outcome_many_refs);\n\n    this.showProgramImpactAdd = true;\n  }\n\n\n  closeAssumptionAdd() {\n    this.showAssumptionAdd = false;\n    this.editingAssumption = null;\n    this.assumptionAddForm = this.fb.group({\n      text: ['', Validators.required]\n    });\n  }\n  closeContextAdd() {\n    this.showContextAdd = false;\n    this.editingContext = null;\n    this.contextAddForm = this.fb.group({\n      text: ['', Validators.required]\n    });\n  }\n  closeActivityAdd() {\n    this.showActivityAdd = false;\n    this.editingActivity = null;\n    this.activityAddForm = this.fb.group({\n      name: ['', Validators.required],\n      target_ref: [''],\n      info: ['']\n    });\n  }\n  closeTargetDescription() {\n    this.showTargetDescription = false;\n\n    this.editingTargetDescription = null;\n    this.editingTargetDescriptionSubject = null;\n\n    this.targetDescriptionAddForm = this.fb.group({\n      info: [''],\n      target_ref: ['']\n    });\n  }\n  closeProgramOutputAdd() {\n    this.showProgramOutputAdd = false;\n    this.editingProgramOutput = null;\n    this.programOutputAddForm = this.fb.group({\n      name: ['', Validators.required],\n      activity_ref: [''],\n      info: ['']\n    });\n  }\n  closeShortProgramOutcomeAdd() {\n    this.showShortProgramOutcomeAdd = false;\n    this.editingShortProgramOutcome = null;\n    this.programShortOutcomeAddForm = this.fb.group({\n      name: ['', Validators.required],\n      program_output_ref: [''],\n      info: [''],\n      program_output_many_refs: new FormArray([])\n    });\n  }\n  closeMidProgramOutcomeAdd() {\n    this.showMidProgramOutcomeAdd = false;\n    this.editingMidProgramOutcome = null;\n    this.programMidOutcomeAddForm = this.fb.group({\n      name: ['', Validators.required],\n      program_short_outcome_ref: [''],\n      info: [''],\n      program_short_outcome_many_refs: new FormArray([])\n    });\n  }\n  closeProgramImpactAdd() {\n    this.showProgramImpactAdd = false;\n    this.editingProgramImpact = null;\n    this.programImpactAddForm = this.fb.group({\n      name: ['', Validators.required],\n      program_mid_outcome_ref: [''],\n      info: [''],\n      program_mid_outcome_many_refs: new FormArray([])\n    });\n  }\n\n  onAssumptionAdd() {\n    this.assumptionAddForm.value.program_ref = Number(this.id);\n    this.transport.post(\"assumptions/\", this.assumptionAddForm.value).then((assumption: Assumption) => {\n      this.assumptions.push(assumption);\n      let assumptions = this.programEdit.get('assumptions') as FormArray;\n      assumptions.push(new FormGroup({assumption_name: new FormControl(assumption.text), assumption_edit: new FormControl(false)}));\n      this.assumptionAddForm = this.fb.group({\n        text: ['', Validators.required]\n      });\n\n    }, error => { console.dir(error) });\n    this.closeAssumptionAdd();\n  }\n  onContextAdd() {\n    this.contextAddForm.value.program_ref = Number(this.id);\n    this.transport.post(\"contexts/\", this.contextAddForm.value).then((context: Context) => {\n      this.contexts.push(context);\n      let contexts = this.programEdit.get('contexts') as FormArray;\n      contexts.push(new FormGroup({context_name: new FormControl(context.text), context_edit: new FormControl(false)}));\n        \n      this.contextAddForm = this.fb.group({\n        text: ['', Validators.required]\n      });\n\n    }, error => { console.dir(error) });\n    this.closeContextAdd();\n  }\n  onAssumptionEdit(i) {\n    const data = {\n      text: this.programEdit.value.assumptions[i].assumption_name,\n      program_ref: Number(this.id)\n    }\n    this.transport.put(\"assumptions/\", String(this.assumptions[i].id), data).then((assumption: Assumption) => {\n      this.assumptions[i] = assumption\n      let assumptions = this.programEdit.get('assumptions') as FormArray;\n      let assumption_fg = assumptions.at(i) as FormGroup;\n      assumption_fg.patchValue({assumption_name: assumption.text, assumption_edit: false})\n    }, error => { console.dir(error) });\n  }\n  onContextEdit(i) {\n    const data = {\n      text: this.programEdit.value.contexts[i].context_name,\n      program_ref: Number(this.id)\n    }\n    this.transport.put(\"contexts/\", String(this.contexts[i].id), data).then((context: Context) => {\n      this.contexts[i] = context\n      let contexts = this.programEdit.get('contexts') as FormArray;\n      let context_fg = contexts.at(i) as FormGroup;\n      context_fg.patchValue({context_name: context.text, context_edit: false})\n\n    }, error => { console.dir(error) });\n  }\n\n  onTargetDescriptionAdd() {\n    this.targetDescriptionAddForm.value.program_ref = Number(this.id);\n    if (!this.editingTargetDescription) {\n      this.transport.post(\"target-descriptions/\", this.targetDescriptionAddForm.value).then((targetDescription: TargetDescription) => {\n        this.editingTargetDescriptionSubject.targetDescription = targetDescription;\n\n        this.closeTargetDescription();\n\n      }, error => { console.dir(error) });\n    } else {\n      this.transport.put(\"target-descriptions/\", String(this.editingTargetDescription.id), this.targetDescriptionAddForm.value).then((targetDescription: TargetDescription) => {\n        // this.activities.push(activity);\n        this.editingTargetDescription.target_ref = targetDescription.target_ref;\n        this.editingTargetDescription.info = targetDescription.info;\n\n        this.closeTargetDescription();\n\n      }, error => { console.dir(error) });\n    }\n  }\n  onActivityAdd() {\n     \n    this.activityAddForm.value.program_ref = Number(this.id);\n    if (!this.editingActivity) {\n      this.transport.post(\"activities/\", this.activityAddForm.value).then((activity: Activity) => {\n        this.activities.push(activity);\n\n        this.closeActivityAdd();\n\n      }, error => { console.dir(error) });\n    } else {\n      // this.activityAddForm.value.target_ref = this.activityAddForm.value.target_ref.id;\n      this.transport.put(\"activities/\", String(this.editingActivity.id), this.activityAddForm.value).then((activity: Activity) => {\n        // this.activities.push(activity);\n        this.editingActivity.name = activity.name;\n        this.editingActivity.target_ref = activity.target_ref;\n        this.editingActivity.info = activity.info;\n\n        this.closeActivityAdd();\n\n      }, error => { console.dir(error) });\n    }\n  }\n  onProgramOutputAdd() {\n     \n    this.programOutputAddForm.value.program_ref = Number(this.id);\n    if (!this.editingProgramOutput) {\n      this.transport.post(\"program-outputs/\", this.programOutputAddForm.value).then((programOutput: ProgramOutput) => {\n        this.programOutputs.push(programOutput);\n      }, error => { console.dir(error) });\n      this.closeProgramOutputAdd();\n    } else {\n      // this.programOutputAddForm.value.activity_ref = Number(this.programOutputAddForm.value.activity_ref.id);\n      this.programOutputAddForm.value.id = Number(this.editingProgramOutput.id);\n      this.transport.put(\"program-outputs/\", String(this.editingProgramOutput.id), this.programOutputAddForm.value).then((programOutput: ProgramOutput) => {\n        this.editingProgramOutput.name = programOutput.name;\n        this.editingProgramOutput.info = programOutput.info;\n        this.editingProgramOutput.activity_ref = programOutput.activity_ref;\n        this.closeProgramOutputAdd();\n      })\n    }\n  }\n\n  deleteTargetDescription(targetDescriptionToDelete, event) {\n    event.preventDefault();\n    this.transport.delete(\"target-descriptions/\", String(this.editingTargetDescription.id)).then(res => {\n      this.editingTargetDescriptionSubject.targetDescription = null;\n      this.closeProgramOutputAdd();\n    }, error => { console.error(error) });\n  }\n  deleteOutput(outputToDelete, event) {\n    event.preventDefault();\n    if (outputToDelete.id) {\n      this.transport.delete(\"program-outputs/\", String(outputToDelete.id)).then(res => {\n        // this.transport.get(\"program-outputs/?program_ref=\" + this.id).then((programOutputData) => {\n        //   this.programOutputs = programOutputData.results;\n        this.programOutputs.splice(this.programOutputs.indexOf(outputToDelete), 1)\n        this.closeProgramOutputAdd();\n        // });\n      }, error => { console.error(error) });\n    } else {\n      this.programOutputs.splice(this.programOutputs.indexOf(outputToDelete), 1)\n    }\n  }\n  deleteShortOutcome(outcomeToDelete, event) {\n    event.preventDefault();\n      if (outcomeToDelete.id) {\n        this.transport.delete(\"program-short-outcomes/\", String(outcomeToDelete.id)).then(res => {\n        this.programShortOutcomes.splice(this.programShortOutcomes.indexOf(outcomeToDelete), 1)\n        // this.transport.get(\"program-short-outcomes/?program_ref=\" + this.id).then((programShortOutcomesData) => {\n        //   this.programShortOutcomes = programShortOutcomesData.results;\n          \n        this.closeShortProgramOutcomeAdd();\n        // });\n      }, error => { console.error(error) });\n    } else {\n      this.programShortOutcomes.splice(this.programShortOutcomes.indexOf(outcomeToDelete), 1)\n    }\n  }\n  deleteMidOutcome(outcomeToDelete, event) {\n    event.preventDefault();\n    if (outcomeToDelete.id) {\n      this.transport.delete(\"program-mid-outcomes/\", String(outcomeToDelete.id)).then(res => {\n        // this.transport.get(\"program-mid-outcomes/?program_ref=\" + this.id).then((programMidOutcomesData) => {\n        //   this.programMidOutcomes = programMidOutcomesData.results;\n        this.programMidOutcomes.splice(this.programMidOutcomes.indexOf(outcomeToDelete), 1)\n        this.closeMidProgramOutcomeAdd();\n        // });\n      }, error => { console.error(error) });\n    } else \n      this.programMidOutcomes.splice(this.programMidOutcomes.indexOf(outcomeToDelete), 1)\n  }\n  deleteImpact(outcomeToDelete, event) {\n    event.preventDefault();\n    if (outcomeToDelete.id)\n      this.transport.delete(\"program-impacts/\", String(outcomeToDelete.id)).then(res => {\n        // this.transport.get(\"program-impacts/?program_ref=\" + this.id).then((programMidOutcomesData) => {\n        //   this.programImpacts = programMidOutcomesData.results;\n        this.programImpacts.splice(this.programImpacts.indexOf(outcomeToDelete), 1)\n        this.closeProgramImpactAdd();\n        // });\n      }, error => { console.error(error) });\n    else this.programImpacts.splice(this.programImpacts.indexOf(outcomeToDelete), 1) \n  }\n  deleteActivity(outcomeToDelete, event) {\n    event.preventDefault();\n    this.transport.delete(\"activities/\", String(outcomeToDelete.id)).then(res => {\n      this.transport.get(\"activities/?program_ref=\" + this.id).then((programMidOutcomesData) => {\n        this.activities = programMidOutcomesData.results;\n        this.closeActivityAdd();\n      });\n    }, error => { console.error(error) });\n  }\n\n  onProgramShortOutcomeAdd() {\n    this.programShortOutcomeAddForm.value.program_ref = Number(this.id);\n    if (!this.editingShortProgramOutcome) {\n      this.transport.post(\"program-short-outcomes/\", this.programShortOutcomeAddForm.value).then((programShortOutcome: ProgramShortOutcome) => {\n        this.programShortOutcomes.push(programShortOutcome);\n\n      }, error => { console.dir(error) });\n      this.closeShortProgramOutcomeAdd();\n    } else {\n\n      this.programShortOutcomeAddForm.value.id = Number(this.editingShortProgramOutcome.id);\n      this.transport.put(\"program-short-outcomes/\", String(this.editingShortProgramOutcome.id), this.programShortOutcomeAddForm.value).then((programOutput: ProgramShortOutcome) => {\n        this.editingShortProgramOutcome.name = programOutput.name;\n        this.editingShortProgramOutcome.info = programOutput.info;\n        this.editingShortProgramOutcome.program_output_ref = programOutput.program_output_ref;\n        this.editingShortProgramOutcome.program_output_many_refs = programOutput.program_output_many_refs;\n        this.closeShortProgramOutcomeAdd();\n      });\n    }\n  }\n  onProgramMidOutcomeAdd() {\n    this.programMidOutcomeAddForm.value.program_ref = Number(this.id);\n    if (!this.editingMidProgramOutcome) {\n      this.transport.post(\"program-mid-outcomes/\", this.programMidOutcomeAddForm.value).then((programMidOutcome: ProgramMidOutcome) => {\n        this.programMidOutcomes.push(programMidOutcome);\n\n\n      }, error => { console.dir(error) });\n      this.closeMidProgramOutcomeAdd();\n    } else {\n      // this.programMidOutcomeAddForm.value.program_short_outcome_ref = Number(this.programMidOutcomeAddForm.value.program_short_outcome_ref.id);\n      this.programMidOutcomeAddForm.value.id = Number(this.editingMidProgramOutcome.id);\n      this.transport.put(\"program-mid-outcomes/\", String(this.editingMidProgramOutcome.id), this.programMidOutcomeAddForm.value).then((programOutput: ProgramMidOutcome) => {\n        this.editingMidProgramOutcome.name = programOutput.name;\n        this.editingMidProgramOutcome.info = programOutput.info;\n        this.editingMidProgramOutcome.program_short_outcome_ref = programOutput.program_short_outcome_ref;\n        this.editingMidProgramOutcome.program_short_outcome_many_refs = programOutput.program_short_outcome_many_refs;\n        this.closeMidProgramOutcomeAdd();\n      });\n    }\n\n  }\n  onProgramImpactAdd() {\n    this.programImpactAddForm.value.program_ref = Number(this.id);\n    if (!this.editingProgramImpact) {\n      this.transport.post(\"program-impacts/\", this.programImpactAddForm.value).then((programImpact: ProgramImpact) => {\n        this.programImpacts.push(programImpact);\n        this.programImpactAddForm = this.fb.group({\n          name: ['', Validators.required],\n          program_mid_outcome_ref: [''],\n          info: ['']\n        });\n\n      }, error => { console.dir(error) });\n      this.closeProgramImpactAdd();\n    } else {\n      // this.programImpactAddForm.value.program_mid_outcome_ref = Number(this.programImpactAddForm.value.program_mid_outcome_ref.id);\n      this.programImpactAddForm.value.id = Number(this.editingProgramImpact.id);\n      this.transport.put(\"program-impacts/\", String(this.editingProgramImpact.id), this.programImpactAddForm.value).then((programOutput: ProgramImpact) => {\n        this.editingProgramImpact.name = programOutput.name;\n        this.editingProgramImpact.info = programOutput.info;\n        this.editingProgramImpact.program_mid_outcome_ref = programOutput.program_mid_outcome_ref;\n        this.editingProgramImpact.program_mid_outcome_many_refs = programOutput.program_mid_outcome_many_refs;\n        this.closeProgramImpactAdd();\n      });\n    }\n  }\n\n  goToLibrary(level) {\n     \n    let link = '/outcomes?programid=' + this.id + '&programresultlevel=' + level;\n\n    var backReferenceIds: string = null;\n    if (level == \"program-short-outcomes\") {\n      var refsneeded = this.programShortOutcomeAddForm.value.program_output_many_refs;\n      for (let index = 0; index < refsneeded.length; index++) {\n        const refNeeded = refsneeded[index];\n        if (index != 0)\n          backReferenceIds += \"+\";\n        backReferenceIds += refNeeded;\n      }\n    } else if (level == \"program-mid-outcomes\") {\n      // backReferenceIds = this.programMidOutcomeAddForm.value.program_short_outcome_ref;\n      var refsneeded = this.programMidOutcomeAddForm.value.program_short_outcome_many_refs;\n      for (let index = 0; index < refsneeded.length; index++) {\n        const refNeeded = refsneeded[index];\n        if (index != 0)\n          backReferenceIds += \"+\";\n        backReferenceIds += refNeeded;\n      }\n    } else if (level == \"program-impacts\") {\n      // backReferenceIds = this.programImpactAddForm.value.program_mid_outcome_ref;\n      var refsneeded = this.programImpactAddForm.value.program_mid_outcome_many_refs;\n      for (let index = 0; index < refsneeded.length; index++) {\n        const refNeeded = refsneeded[index];\n        if (index != 0)\n          backReferenceIds += \"+\";\n        backReferenceIds += refNeeded;\n      }\n    }\n\n    if (backReferenceIds)\n      link += \"&programbackreferenceid=\" + backReferenceIds;\n\n    this.router.navigateByUrl(link);\n  }\n\n  addMplOutput(index = this.mplOutputs.length) {\n    this.mplOutputs.splice(index, 0, new MplOutputs())\n    this.mplOutputs[index].program_ref = this.program\n    this.mplOutputs[index].sort_index = index\n    this.createMplOutput()\n  }\n  addMplShortOutcome(index = this.mplShortOutcomes.length) {\n    this.mplShortOutcomes.splice(index, 0, new MplShortOutcomes());\n    this.mplShortOutcomes[index].program_ref = this.program\n    this.mplShortOutcomes[index].sort_index = index\n    this.createMplShortOutcome()\n  }\n  addMplMidOutcome(index = this.mplMidOutcomes.length) {\n    this.mplMidOutcomes.splice(index, 0, new MplMidOutcomes());\n    this.mplMidOutcomes[index].program_ref = this.program\n    this.mplMidOutcomes[index].sort_index = index\n    this.createMplMidOutcome()\n  }\n  addMplImpact(index = this.mplImpacts.length) {\n    this.mplImpacts.splice(index, 0, new MplImpacts());\n    this.mplImpacts[index].program_ref = this.program\n    this.mplImpacts[index].sort_index = index\n    this.createMplImpact()\n  }\n\n  addMflOutput(index = this.mflOutputs.length) {\n    this.mflOutputs.splice(index, 0, new MflOutputs());\n    this.mflOutputs[index].sort_index = index\n    this.createMflOutput(this.mflOutputs[index])\n  }\n  addMflShortOutcome(index = this.mflShortOutcomes.length) {\n    this.mflShortOutcomes.splice(index, 0, new MflShortOutcomes());\n    this.mflShortOutcomes[index].sort_index = index\n    this.createMflShortOutcome(this.mflShortOutcomes[index])\n  }\n  addMflMidOutcome(index = this.mflMidOutcomes.length) {\n    this.mflMidOutcomes.splice(index, 0, new MflMidOutcomes());\n    this.mflMidOutcomes[index].sort_index = index\n    this.createMflMidOutcome(this.mflMidOutcomes[index])\n  }\n  addMflImpact(index = this.mflImpacts.length) {\n    this.mflImpacts.splice(index, 0, new MflImpacts());\n    this.mflImpacts[index].sort_index = index\n    this.createMflImpact(this.mflImpacts[index])\n  }\n  outputShouldBeSelected(mplOutput, output) {\n    if (!mplOutput.result_ref && output == null)\n      return true;\n\n    if (!mplOutput.result_ref)\n      return false;\n\n    if (mplOutput.result_ref.id == output)\n      return true;\n    return false;\n  }\n\n  createMplOutput(outcome?, save?) {\n    if (save) {\n      for (let item of this.mplOutputs) {\n        if (!item.result_ref) {\n          alert('Чтобы сохранить, заполните поле \"Результат\" во всех строках!')\n          return\n        }\n      }\n    }\n    for (let i = outcome && outcome.sort_index ? outcome.sort_index : 0; i < this.mplOutputs.length; i++) {\n      let mplResult = this.mplOutputs[i]\n      mplResult.program_ref = this.program.id;\n      if (mplResult.result_ref) mplResult.result_ref = mplResult.result_ref.id;\n      else continue\n      mplResult.sort_index = i\n      if (mplResult.id) {\n        this.transport.put(\"mpl-outputs/\", mplResult.id, mplResult).then((res: MplOutputs) => {\n          this.mplOutputs[mplResult.sort_index] = res\n          if (res.name) {\n            let newMflOutput = new MflOutputs();\n            let found = this.mflOutputs.find(el => el.mpl_ref == res.id);\n            if (found) newMflOutput = found;\n            else newMflOutput.sort_index = this.mflOutputs.length\n            newMflOutput.indicator = mplResult.indicator;\n            newMflOutput.mpl_ref = res.id;\n            \n            if (!found)\n              this.mflOutputs.push(newMflOutput);\n            this.createMflOutput(newMflOutput);\n          }\n        });\n      } else {\n        this.transport.post(\"mpl-outputs/\", mplResult).then((res: MplOutputs) => {\n          this.mplOutputs[mplResult.sort_index] = res\n\n          let newMflOutput = new MflOutputs();\n          newMflOutput.indicator = mplResult.indicator;\n          newMflOutput.mpl_ref = res.id;\n          newMflOutput.sort_index = this.mflOutputs.length\n          this.mflOutputs.push(newMflOutput);\n          this.createMflOutput(newMflOutput);\n        });\n      }\n    }\n  }\n  createMplShortOutcome(outcome?, save?) { \n    if (save) {\n      for (let item of this.mplShortOutcomes) {\n        if (!item.result_ref) {\n          alert('Чтобы сохранить, заполните поле \"Результат\" во всех строках!')\n          return\n        }\n      }\n    }\n    for (let i = outcome && outcome.sort_index ? outcome.sort_index : 0; i < this.mplShortOutcomes.length; i++) {\n      let mplResult = this.mplShortOutcomes[i]\n      mplResult.program_ref = this.program.id;\n      if (mplResult.result_ref) mplResult.result_ref = mplResult.result_ref.id;\n      else continue\n      mplResult.sort_index = i\n      if (mplResult.id) {\n        this.transport.put(\"mpl-short-outcomes/\", mplResult.id, mplResult).then((res: MplShortOutcomes) => {\n          this.mplShortOutcomes[mplResult.sort_index] = res\n          if (res.name) {\n            let newMfl = new MflShortOutcomes();\n            let found = this.mflShortOutcomes.find(el => el.mpl_ref == res.id);\n            if (found) newMfl = found;\n            else newMfl.sort_index = this.mflShortOutcomes.length\n            newMfl.indicator = mplResult.indicator;\n            newMfl.mpl_ref = res.id;\n            \n            if (!found)\n              this.mflShortOutcomes.push(newMfl);\n            this.createMflShortOutcome(newMfl);\n          }\n        }).catch(error => console.log(error));\n      } else {\n        this.transport.post(\"mpl-short-outcomes/\", mplResult).then((res: MplShortOutcomes) => {\n          this.mplShortOutcomes[mplResult.sort_index] = res\n          let newMfl = new MflShortOutcomes();\n          newMfl.indicator = mplResult.indicator;\n          newMfl.mpl_ref = res.id;\n          newMfl.sort_index = this.mflShortOutcomes.length\n          this.mflShortOutcomes.push(newMfl);\n          this.createMflShortOutcome(newMfl);\n        }).catch(error => console.log(error));\n      }\n    }\n    // console.log(this.mplShortOutcomes)\n  }\n  createMplMidOutcome(outcome?, save?) { \n    if (save) {\n      for (let item of this.mplMidOutcomes) {\n        if (!item.result_ref) {\n          alert('Чтобы сохранить, заполните поле \"Результат\" во всех строках!')\n          return\n        }\n      }\n    }\n    for (let i = outcome && outcome.sort_index ? outcome.sort_index : 0; i < this.mplMidOutcomes.length; i++) {\n      let mplResult = this.mplMidOutcomes[i]\n      mplResult.program_ref = this.program.id;\n      if (mplResult.result_ref) mplResult.result_ref = mplResult.result_ref.id;\n      else continue\n      mplResult.sort_index = i\n      if (mplResult.id) {\n        this.transport.put(\"mpl-mid-outcomes/\", mplResult.id, mplResult).then((res: MplMidOutcomes) => {\n          this.mplMidOutcomes[mplResult.sort_index] = res\n          if (res.name) {\n            let newMfl = new MflMidOutcomes();\n            let found = this.mflMidOutcomes.find(el => el.mpl_ref == res.id);\n            if (found) newMfl = found;\n            else newMfl.sort_index = this.mflMidOutcomes.length\n            newMfl.indicator = mplResult.indicator;\n            newMfl.mpl_ref = res.id;\n            \n            if (!found)\n              this.mflMidOutcomes.push(newMfl);\n            this.createMflMidOutcome(newMfl);\n          }\n        }).catch(error => console.log(error));\n      } else {\n        this.transport.post(\"mpl-mid-outcomes/\", mplResult).then((res: MplMidOutcomes) => {\n          this.mplMidOutcomes[mplResult.sort_index] = res\n          \n          let newMfl = new MflMidOutcomes();\n          newMfl.indicator = mplResult.indicator;\n          newMfl.mpl_ref = res.id;\n          newMfl.sort_index = this.mflMidOutcomes.length\n          this.mflMidOutcomes.push(newMfl);\n          this.createMflMidOutcome(newMfl);\n        }).catch(error => console.log(error));\n      }\n    }\n  }\n  createMplImpact(outcome?, save?) {\n    if (save) {\n      for (let item of this.mplImpacts) {\n        if (!item.result_ref) {\n          alert('Чтобы сохранить, заполните поле \"Результат\" во всех строках!')\n          return\n        }\n      }\n    }\n    for (let i = outcome && outcome.sort_index ? outcome.sort_index : 0; i < this.mplImpacts.length; i++) {\n      let mplResult = this.mplImpacts[i]\n      mplResult.program_ref = this.program.id;\n      if (mplResult.result_ref) mplResult.result_ref = mplResult.result_ref.id;\n      else continue\n      mplResult.sort_index = i\n      if (mplResult.id) {\n\n\n        this.transport.put(\"mpl-impacts/\", mplResult.id, mplResult).then((res: MplImpacts) => {\n          this.mplImpacts[mplResult.sort_index] = res\n          if (res.name) {\n            let newMfl = new MflImpacts();\n            let found = this.mflImpacts.find(el => el.mpl_ref == res.id);\n            if (found) newMfl = found;\n            else newMfl.sort_index = this.mflImpacts.length\n\n            newMfl.indicator = mplResult.indicator;\n            newMfl.mpl_ref = res.id;\n            if (!found)\n              this.mflImpacts.push(newMfl);\n            this.createMflImpact(newMfl);\n          }\n        });\n      } else {\n        this.transport.post(\"mpl-impacts/\", mplResult).then((res: MplImpacts) => {\n          this.mplImpacts[mplResult.sort_index] = res\n          let newMfl = new MflImpacts();\n          newMfl.indicator = mplResult.indicator;\n          newMfl.mpl_ref = res.id;\n          newMfl.sort_index = this.mflImpacts.length\n          this.mflImpacts.push(newMfl);\n          this.createMflImpact(newMfl);\n        });\n      }\n    }\n    // this.transport.get(\"mpl-impacts/?program_ref=\" + this.id).then((mplImpactsData) => {\n    //   this.mplImpacts = mplImpactsData.results;\n    // });\n  }\n\n  createMflOutput(line?) {\n    for (let i = line && line.sort_index ? line.sort_index : 0; i < this.mflOutputs.length; i++) {\n      const mflResult = this.mflOutputs[i]\n      mflResult.sort_index = i\n      mflResult.program_ref = this.program.id;\n      if (mflResult.id) {\n        this.transport.put(\"mfl-outputs/\", String(mflResult.id), mflResult).then((res: MflOutputs) => {\n          this.mflOutputs[i] = res\n        });\n      } else {\n        this.transport.post(\"mfl-outputs/\", mflResult).then((res: MflOutputs) => {\n          this.mflOutputs[i] = res\n        });\n      }\n    }\n  }\n  createMflShortOutcome(line?) {\n    for (let i = line && line.sort_index ? line.sort_index : 0; i < this.mflShortOutcomes.length; i++) {\n      const mflResult = this.mflShortOutcomes[i]\n      mflResult.sort_index = i\n      mflResult.program_ref = this.program.id;\n      if (mflResult.id) {\n        this.transport.put(\"mfl-short-outcomes/\", String(mflResult.id), mflResult).then((res: MflShortOutcomes) => {\n          this.mflShortOutcomes[i] = res\n        });\n      } else {\n        this.transport.post(\"mfl-short-outcomes/\", mflResult).then((res: MflShortOutcomes) => {\n          this.mflShortOutcomes[i] = res\n        });\n      }\n    }\n  }\n  createMflMidOutcome(line?) {\n    for (let i = line && line.sort_index ? line.sort_index : 0; i < this.mflMidOutcomes.length; i++) {\n      const mflResult = this.mflMidOutcomes[i]\n      mflResult.sort_index = i\n      mflResult.program_ref = this.program.id;\n      if (mflResult.id) {\n        this.transport.put(\"mfl-mid-outcomes/\", String(mflResult.id), mflResult).then((res: MflMidOutcomes) => {\n          this.mflMidOutcomes[i] = res\n        });\n      } else {\n        this.transport.post(\"mfl-mid-outcomes/\", mflResult).then((res: MflMidOutcomes) => {\n          this.mflMidOutcomes[i] = res\n        });\n      }\n    }\n  }\n  createMflImpact(line?) {\n    for (let i = line && line.sort_index ? line.sort_index : 0; i < this.mflImpacts.length; i++) {\n      const mflResult = this.mflImpacts[i]\n      mflResult.sort_index = i\n      mflResult.program_ref = this.program.id;\n      if (mflResult.id) {\n        this.transport.put(\"mfl-short-outcomes/\", String(mflResult.id), mflResult).then((res: MflImpacts) => {\n          this.mflImpacts[i] = res\n        });\n      } else {\n        this.transport.post(\"mfl-short-outcomes/\", mflResult).then((res: MflImpacts) => {\n          this.mflImpacts[i] = res\n        });\n      }\n    }\n  }\n\n  changeOutputRef(mplResult, event, createUpdateFunction) {\n    for (var programOutput of this.programOutputs) {\n      if (programOutput.id == event.target.value) {\n        mplResult.result_ref = programOutput;\n        if (createUpdateFunction == \"output\")\n          this.createMplOutput(mplResult);\n        if (createUpdateFunction == \"shortoutcome\")\n          this.createMplShortOutcome(mplResult);\n        if (createUpdateFunction == \"midoutcome\")\n          this.createMplMidOutcome(mplResult);\n        return;\n      }\n    }\n  }\n\n  changeShortOutcomeRef(mplResult, event, createUpdateFunction) {\n    for (var programShortOutcome of this.programShortOutcomes) {\n      if (programShortOutcome.id == event.target.value) {\n        mplResult.result_ref = programShortOutcome;\n        if (createUpdateFunction == \"output\")\n          this.createMplOutput(mplResult);\n        if (createUpdateFunction == \"shortoutcome\")\n          this.createMplShortOutcome(mplResult);\n        if (createUpdateFunction == \"midoutcome\")\n          this.createMplMidOutcome(mplResult);\n        return;\n      }\n    }\n  }\n\n  changeMidOutcomeRef(mplResult, event, createUpdateFunction) {\n    for (var programMidOutcome of this.programMidOutcomes) {\n      if (programMidOutcome.id == event.target.value) {\n        mplResult.result_ref = programMidOutcome;\n        if (createUpdateFunction == \"output\")\n          this.createMplOutput(mplResult);\n        if (createUpdateFunction == \"shortoutcome\")\n          this.createMplShortOutcome(mplResult);\n        if (createUpdateFunction == \"midoutcome\")\n          this.createMplMidOutcome(mplResult);\n        return;\n      }\n    }\n  }\n\n  changeImpactRef(mplResult, event, createUpdateFunction) {\n    for (var programImpact of this.programImpacts) {\n      if (programImpact.id == event.target.value) {\n        mplResult.result_ref = programImpact;\n        if (createUpdateFunction == \"output\")\n          this.createMplOutput(mplResult);\n        if (createUpdateFunction == \"shortoutcome\")\n          this.createMplShortOutcome(mplResult);\n        if (createUpdateFunction == \"midoutcome\")\n          this.createMplMidOutcome(mplResult);\n        if (createUpdateFunction == \"impact\")\n          this.createMplImpact(mplResult);\n        return;\n      }\n    }\n  }\n\n  changeName(mplResult, event, createUpdateFunction) {\n    mplResult.name = event.target.value;\n    if (createUpdateFunction == \"output\")\n      this.createMplOutput(mplResult);\n    if (createUpdateFunction == \"shortoutcome\")\n      this.createMplShortOutcome(mplResult);\n    if (createUpdateFunction == \"midoutcome\")\n      this.createMplMidOutcome(mplResult);\n    if (createUpdateFunction == \"impact\")\n      this.createMplImpact(mplResult);\n  }\n\n  changeIndicator(mplResult, event, createUpdateFunction) {\n    mplResult.indicator = event.target.value;\n    if (createUpdateFunction == \"output\")\n      this.createMplOutput(mplResult);\n    if (createUpdateFunction == \"shortoutcome\")\n      this.createMplShortOutcome(mplResult);\n    if (createUpdateFunction == \"midoutcome\")\n      this.createMplMidOutcome(mplResult);\n    if (createUpdateFunction == \"impact\")\n      this.createMplImpact(mplResult);\n  }\n\n  changeMethod(mplResult, event, createUpdateFunction) {\n    mplResult.method = event.target.value;\n    if (createUpdateFunction == \"output\")\n      this.createMplOutput(mplResult);\n    if (createUpdateFunction == \"shortoutcome\")\n      this.createMplShortOutcome(mplResult);\n    if (createUpdateFunction == \"midoutcome\")\n      this.createMplMidOutcome(mplResult);\n    if (createUpdateFunction == \"impact\")\n      this.createMplImpact(mplResult);\n  }\n\n  changeTool(mplResult, event, createUpdateFunction) {\n    let value: any[] = event.target.value.split('$$$')\n    mplResult.tool = value[0];\n    mplResult.tool_type = value[1];\n    if (createUpdateFunction == \"output\")\n      this.createMplOutput(mplResult);\n    if (createUpdateFunction == \"shortoutcome\")\n      this.createMplShortOutcome(mplResult);\n    if (createUpdateFunction == \"midoutcome\")\n      this.createMplMidOutcome(mplResult);\n    if (createUpdateFunction == \"impact\")\n      this.createMplImpact(mplResult);\n  }\n\n  changeFrequency(mplResult, event, createUpdateFunction) {\n    mplResult.frequency = event.target.value;\n    if (createUpdateFunction == \"output\")\n      this.createMplOutput(mplResult);\n    if (createUpdateFunction == \"shortoutcome\")\n      this.createMplShortOutcome(mplResult);\n    if (createUpdateFunction == \"midoutcome\")\n      this.createMplMidOutcome(mplResult);\n    if (createUpdateFunction == \"impact\")\n      this.createMplImpact(mplResult);\n  }\n\n  changeReporting(mplResult, event, createUpdateFunction) {\n    mplResult.reporting = event.target.value;\n    if (createUpdateFunction == \"output\")\n      this.createMplOutput(mplResult);\n    if (createUpdateFunction == \"shortoutcome\")\n      this.createMplShortOutcome(mplResult);\n    if (createUpdateFunction == \"midoutcome\")\n      this.createMplMidOutcome(mplResult);\n    if (createUpdateFunction == \"impact\")\n      this.createMplImpact(mplResult);\n  }\n\n  setDisplayResultRef(result: any) {\n    result.displayResultRef = true;\n    result.displayName = false;\n    result.displayIndicator = false;\n    result.displayMethod = false;\n    result.displayTool = false;\n    result.displayFrequency = false;\n    result.displayReporting = false;\n  }\n\n  setDisplayName(result: any) {\n    result.displayResultRef = false;\n    result.displayName = true;\n    result.displayIndicator = false;\n    result.displayMethod = false;\n    result.displayTool = false;\n    result.displayFrequency = false;\n    result.displayReporting = false;\n  }\n\n  setDisplayIndicator(result: any) {\n    result.displayResultRef = false;\n    result.displayName = false;\n    result.displayIndicator = true;\n    result.displayMethod = false;\n    result.displayTool = false;\n    result.displayFrequency = false;\n    result.displayReporting = false;\n  }\n\n  setDisplayMethod(result: any) {\n    result.displayResultRef = false;\n    result.displayName = false;\n    result.displayIndicator = false;\n    result.displayMethod = true;\n    result.displayTool = false;\n    result.displayFrequency = false;\n    result.displayReporting = false;\n  }\n\n  setDisplayTool(result: any) {\n    if (result.tool_url) {\n      window.open(result.tool_url, \"_blank\");\n    }\n    result.displayResultRef = false;\n    result.displayName = false;\n    result.displayIndicator = false;\n    result.displayMethod = false;\n    result.displayTool = true;\n    result.displayFrequency = false;\n    result.displayReporting = false;\n  }\n\n  setDisplayFrequency(result: any) {\n    result.displayResultRef = false;\n    result.displayName = false;\n    result.displayIndicator = false;\n    result.displayMethod = false;\n    result.displayTool = false;\n    result.displayFrequency = true;\n    result.displayReporting = false;\n  }\n\n  setDisplayReporting(result: any) {\n    result.displayResultRef = false;\n    result.displayName = false;\n    result.displayIndicator = false;\n    result.displayMethod = false;\n    result.displayTool = false;\n    result.displayFrequency = false;\n    result.displayReporting = true;\n  }\n\n  indicatorChanged(result, event, resultName) {\n    result.indicator = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  planChanged(result, event, resultName) {\n    result.plan = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  period1Changed(result, event, resultName) {\n    result.period1 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  fact1Changed(result, event, resultName) {\n    result.fact1 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  period2Changed(result, event, resultName) {\n    result.period2 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  fact2Changed(result, event, resultName) {\n    result.fact2 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  period3Changed(result, event, resultName) {\n    result.period3 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  fact3Changed(result, event, resultName) {\n    result.fact3 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  period4Changed(result, event, resultName) {\n    result.period4 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n  fact4Changed(result, event, resultName) {\n    result.fact4 = event.target.value;\n    if (resultName == \"output\")\n      this.createMflOutput(result);\n    if (resultName == \"shortoutcome\")\n      this.createMflShortOutcome(result);\n    if (resultName == \"midoutcome\")\n      this.createMflMidOutcome(result);\n    if (resultName == \"impact\")\n      this.createMflImpact(result);\n\n  }\n\n  makeHighlighted(target) {\n    target.shouldBeHighlighted = true;\n\n    for (var activity of this.activities) {\n      if (activity.shouldBeHighlighted) continue;\n      if (activity.target_ref && activity.target_ref.id == target.id) {\n        activity.shouldBeHighlighted = true;\n        for (var output of this.programOutputs) {\n          if (output.shouldBeHighlighted) continue;\n          if (output.activity_ref && output.activity_ref.id == activity.id) {\n            output.shouldBeHighlighted = true;\n            for (var shortOutcome of this.programShortOutcomes) {\n              if (shortOutcome.shouldBeHighlighted) continue;\n              if (shortOutcome.program_output_many_refs && shortOutcome.program_output_many_refs.some(el => el.id == output.id)) {\n                shortOutcome.shouldBeHighlighted = true;\n                for (var midOutcome of this.programMidOutcomes) {\n                  if (midOutcome.shouldBeHighlighted) continue;\n                  if (midOutcome.program_short_outcome_many_refs && midOutcome.program_short_outcome_many_refs.some(el => el.id == shortOutcome.id)) {\n                    midOutcome.shouldBeHighlighted = true;\n                    for (var impact of this.programImpacts) {\n                      if (impact.shouldBeHighlighted) continue;\n                      if (impact.program_mid_outcome_many_refs && impact.program_mid_outcome_many_refs.some(el => el.id == midOutcome.id)) {\n                        impact.shouldBeHighlighted = true;\n                      }\n                      else {\n                        impact.shouldBeHighlighted = false;\n                      }\n                    }\n                  }\n                  else {\n                    midOutcome.shouldBeHighlighted = false;\n                  }\n                }\n              }\n              else {\n                shortOutcome.shouldBeHighlighted = false;\n              }\n            }\n          }\n          else {\n            output.shouldBeHighlighted = false;\n          }\n        }\n      } else {\n        activity.shouldBeHighlighted = false;\n      }\n    }\n  }\n  makeUnhighlighted(target) {\n    target.shouldBeHighlighted = false;\n\n    for (var activity of this.activities) {\n      activity.shouldBeHighlighted = false;\n    }\n    for (var output of this.programOutputs) {\n      output.shouldBeHighlighted = false;\n    }\n    for (var shortoutcome of this.programShortOutcomes) {\n      shortoutcome.shouldBeHighlighted = false;\n    }\n    for (var midoutcome of this.programMidOutcomes) {\n      midoutcome.shouldBeHighlighted = false;\n    }\n    for (var impact of this.programImpacts) {\n      impact.shouldBeHighlighted = false;\n    }\n  }\n\n  downloadProgram(event) {\n    event.preventDefault();\n    window.open(this.baseUrl+\"newpion/api/download?program_id=\" + this.id, \"_blank\");\n  }\n\n  downloadPlan(event) {\n    event.preventDefault();\n\n    window.open(this.baseUrl+\"newpion/api/download-plan?program_id=\" + this.id, \"_blank\");\n  }\n  downloadForm(event) {\n    event.preventDefault();\n\n    window.open(this.baseUrl+\"newpion/api/download-form?program_id=\" + this.id, \"_blank\");\n  }\n\n  downloadPlanAndForm(event) {\n    event.preventDefault();\n    window.open(this.baseUrl+\"newpion/api/download-plan?program_id=\" + this.id, \"_blank\");\n    window.open(this.baseUrl+\"newpion/api/download-form?program_id=\" + this.id, \"_blank\");\n\n\n  }\n\n  mplOutputDelete(event, mplOutput) {\n    event.preventDefault();\n    this.mplOutputs.splice(this.mplOutputs.indexOf(mplOutput), 1)\n    if (!mplOutput.id) return\n    this.transport.delete(\"mpl-outputs/\", String(mplOutput.id)).then(res => {\n      this.createMplOutput()\n      // for (let i = 0; i < this.mplOutputs.length; i++) {\n      //   this.mplOutputs[i].sort_index = i\n      //   this.mplOutputs[i].result_ref = this.mplOutputs[i].result_ref.id\n      //   this.mplOutputs[i].program_ref = this.id\n      //   this.transport.put('mpl-outputs/', this.mplOutputs[i].id, this.mplOutputs[i]).then(res => {\n      //     // console.log(res)\n      //   }).catch(error => console.log(error))\n      // }\n\n      // this.transport.get(\"mpl-outputs/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mplOutputs = mplOutputsData.results;\n      // });\n      // this.transport.get(\"mfl-outputs/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mflOutputs = mplOutputsData.results;\n      // });\n    }, error => { console.error(error) });\n  }\n  mplShortOutcomeDelete(event, mplShortOutcome) {\n    event.preventDefault();\n    this.mplShortOutcomes.splice(this.mplShortOutcomes.indexOf(mplShortOutcome), 1)\n    if (!mplShortOutcome.id) return\n    this.transport.delete(\"mpl-short-outcomes/\", String(mplShortOutcome.id)).then(res => {\n      this.createMplShortOutcome()\n      // for (let i = 0; i < this.mplShortOutcomes.length; i++) {\n      //   this.mplShortOutcomes[i].sort_index = i\n      //   this.mplShortOutcomes[i].result_ref = this.mplShortOutcomes[i].result_ref.id\n      //   this.mplShortOutcomes[i].program_ref = this.id\n      //   this.transport.put('mpl-short-outcomes/', String(this.mplShortOutcomes[i].id), this.mplShortOutcomes[i]).then(res => {\n      //     // console.log(res)\n      //   }).catch(error => console.log(error))\n      // }\n      // this.transport.get(\"mpl-short-outcomes/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mplShortOutcomes = mplOutputsData.results;\n      // });\n      // this.transport.get(\"mfl-short-outcomes/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mflShortOutcomes = mplOutputsData.results;\n      // });\n    }, error => { console.error(error) });\n  }\n  mplMidOutcomeDelete(event, mplMidOutcome) {\n    event.preventDefault();\n    this.mplMidOutcomes.splice(this.mplMidOutcomes.indexOf(mplMidOutcome), 1)\n    if (!mplMidOutcome.id) return\n    this.transport.delete(\"mpl-mid-outcomes/\", String(mplMidOutcome.id)).then(res => {\n      this.createMplMidOutcome()\n      // for (let i = 0; i < this.mplMidOutcomes.length; i++) {\n      //   this.mplMidOutcomes[i].sort_index = i\n      //   this.mplMidOutcomes[i].result_ref = this.mplMidOutcomes[i].result_ref.id\n      //   this.mplMidOutcomes[i].program_ref = this.id\n      //   this.transport.put('mpl-mid-outcomes/', this.mplMidOutcomes[i].id, this.mplMidOutcomes[i]).then(res => {\n      //     // console.log(res)\n      //   }).catch(error => console.log(error))\n      // }\n      // this.transport.get(\"mpl-mid-outcomes/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mplMidOutcomes = mplOutputsData.results;\n      // });\n      // this.transport.get(\"mfl-mid-outcomes/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mflMidOutcomes = mplOutputsData.results;\n      // });\n    }, error => { console.error(error) });\n  }\n  mplImpactDelete(event, mplImpact) {\n    event.preventDefault();\n    this.mplImpacts.splice(this.mplImpacts.indexOf(mplImpact), 1)\n    if (!mplImpact.id) return\n    this.transport.delete(\"mpl-impacts/\", String(mplImpact.id)).then(res => {\n      this.createMplImpact()\n      // for (let i = 0; i < this.mplImpacts.length; i++) {\n      //   this.mplImpacts[i].sort_index = i\n      //   this.mplImpacts[i].result_ref = this.mplImpacts[i].result_ref.id\n      //   this.mplImpacts[i].program_ref = this.id\n      //   this.transport.put('mpl-impacts/', this.mplImpacts[i].id, this.mplImpacts[i]).then(res => {\n      //     // console.log(res)\n      //   }).catch(error => console.log(error))\n      // }\n      // this.transport.get(\"mpl-impacts/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mplImpacts = mplOutputsData.results;\n      // });\n      // this.transport.get(\"mfl-impacts/?program_ref=\" + this.id).then((mplOutputsData) => {\n      //   this.mflImpacts = mplOutputsData.results;\n      // });\n    }, error => { console.error(error) });\n  }\n\n  mflOutputDelete(event, mflOutput?) {\n    if (!mflOutput) mflOutput = this.mplOutputs[this.mplOutputs.length - 1]\n    event.preventDefault();\n    this.mflOutputs.splice(this.mplOutputs.indexOf(mflOutput), 1)\n    if (!mflOutput.id) return\n    this.transport.delete(\"mfl-outputs/\", String(mflOutput.id)).then(res => {\n      this.createMflOutput()\n    }, error => { console.error(error) });\n  }\n  mflShortOutcomeDelete(event, mflShortOutcome?) {\n    if (!mflShortOutcome) mflShortOutcome = this.mplShortOutcomes[this.mplShortOutcomes.length - 1]\n    event.preventDefault();\n    this.mflShortOutcomes.splice(this.mflShortOutcomes.indexOf(mflShortOutcome), 1)\n    if (!mflShortOutcome.id) return\n    this.transport.delete(\"mfl-short-outcomes/\", String(mflShortOutcome.id)).then(res => {\n      this.createMflShortOutcome()\n    }, error => { console.error(error) });\n  }\n  mflMidOutcomeDelete(event, mflMidOutcome?) {\n    if (!mflMidOutcome) mflMidOutcome = this.mplMidOutcomes[this.mplMidOutcomes.length - 1]\n    event.preventDefault();\n    this.mflMidOutcomes.splice(this.mplMidOutcomes.indexOf(mflMidOutcome), 1)\n    if (!mflMidOutcome.id) return\n    this.transport.delete(\"mfl-mid-outcomes/\", String(mflMidOutcome.id)).then(res => {\n      this.createMflMidOutcome()\n    }, error => { console.error(error) });\n  }\n  mflImpactDelete(event, mflImpact?) {\n    if (!mflImpact) mflImpact = this.mplImpacts[this.mplImpacts.length - 1]\n    event.preventDefault();\n    this.mflImpacts.splice(this.mflImpacts.indexOf(mflImpact), 1)\n    if (!mflImpact.id) return\n    this.transport.delete(\"mfl-impacts/\", String(mflImpact.id)).then(res => {\n      this.createMflImpact()\n    }, error => { console.error(error) });\n  }\n\n  deleteLastMplOutput(event) {\n    this.mplOutputDelete(event, this.mplOutputs[this.mplOutputs.length - 1]);\n  }\n  deleteLastMplShortOutcome(event) {\n    this.mplShortOutcomeDelete(event, this.mplShortOutcomes[this.mplShortOutcomes.length - 1]);\n  }\n  deleteLastMplMidOutcome(event) {\n    this.mplMidOutcomeDelete(event, this.mplMidOutcomes[this.mplMidOutcomes.length - 1]);\n  }\n  deleteLastMplImpact(event) {\n    this.mplImpactDelete(event, this.mplImpacts[this.mplImpacts.length - 1]);\n  }\n\n  printAt(context , text, x, y, lineHeight, fitWidth) {\n    fitWidth = fitWidth || 0;\n    \n    if (fitWidth <= 0)\n    {\n         context.fillText( text, x, y );\n        return;\n    }\n    \n    for (var idx = 1; idx <= text.length; idx++)\n    {\n        var str = text.substr(0, idx);\n        console.log(str, context.measureText(str).width, fitWidth);\n        if (context.measureText(str).width > fitWidth)\n        {\n            context.fillText( text.substr(0, idx-1), x, y );\n            this.printAt(context, text.substr(idx-1), x, y + lineHeight, lineHeight,  fitWidth);\n            return;\n        }\n    }\n    context.fillText( text, x, y );\n  }\n\n  draw(scale, translatePos) {\n    if (this.toLoad > 0) {\n      setTimeout(() => { this.draw(scale, translatePos) }, 1000);\n      return;\n    }\n    // canvas sizes\n    var cwidth = 851;\n    var cheight = 500;\n\n    var ltpx = -(cwidth / 2.0);\n    var ltpy = -(cheight / 2.0);\n\n    // colors\n\n    // Целевая группа \n    var targetFill = \"#9ee8f4\";\n    var targetBorder = \"#45c6db\";\n\n    // Активность\n    var activityFill = \"#adfbdd\";\n    var activityBorder = \"#2ca978\";\n\n    // Непосредственный результат\n    var outputFill = \"#fee6b1\";\n    var outputBorder = \"#ee860b\";\n\n    // Краткосрочный социальный результат\n    var shortOutcomeFill = \"#f3c9ee\";\n    var shortOutcomeBorder = \"#bf44af\";\n\n    // Среднесрочный социальный результат\n    var midOutcomeFill = \"#c1b9f4\";\n    var midOutcomeBorder = \"#6a5faf\";\n\n    // Социальный эффект\n    var impactFill = \"#f4c2b9\";\n    var impactBorder = \"#ff330b\";\n\n    var canvas: any = document.getElementById(\"np-canvas\");\n    var context = canvas.getContext(\"2d\");\n\n    // clear canvas\n    // work with zooming, do not touch\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    context.save();\n    context.translate(translatePos.x, translatePos.y);\n    context.scale(scale, scale);\n    //  end of work with zooming, do not touch\n\n    // border of initiating canvas. for debug only\n    context.strokeStyle = \"#000000\";\n    context.strokeRect(ltpx - 1, ltpy - 1, cwidth + 2, cheight + 2);\n\n    var i = 0;\n    context.strokeStyle = impactBorder;\n    context.strokeRect(ltpx, ltpy + (cheight / 6.0) * i, cwidth, cheight / 6.0);\n    context.strokeRect(ltpx + (cheight / 18.0), ltpy + (cheight / 6.0) * i + (cheight / 18.0), cwidth - (cheight / 9.0), cheight / 18.0);\n    var impactY = ltpy + (cheight / 6.0) * i + (cheight / 18.0);\n\n    i += 1;\n    context.strokeStyle = midOutcomeBorder;\n    context.strokeRect(ltpx, ltpy + (cheight / 6.0) * i, cwidth, cheight / 6.0);\n    context.strokeRect(ltpx + (cheight / 18.0), ltpy + (cheight / 6.0) * i + (cheight / 18.0), cwidth - (cheight / 9.0), cheight / 18.0);\n    var midOutcomeY = ltpy + (cheight / 6.0) * i + (cheight / 18.0);\n\n    i += 1;\n    context.strokeStyle = shortOutcomeBorder;\n    context.strokeRect(ltpx, ltpy + (cheight / 6.0) * i, cwidth, cheight / 6.0);\n    context.strokeRect(ltpx + (cheight / 18.0), ltpy + (cheight / 6.0) * i + (cheight / 18.0), cwidth - (cheight / 9.0), cheight / 18.0);\n    var shortOutcomeY = ltpy + (cheight / 6.0) * i + (cheight / 18.0);\n\n    i += 1;\n    context.strokeStyle = outputBorder;\n    context.strokeRect(ltpx, ltpy + (cheight / 6.0) * i, cwidth, cheight / 6.0);\n    context.strokeRect(ltpx + (cheight / 18.0), ltpy + (cheight / 6.0) * i + (cheight / 18.0), cwidth - (cheight / 9.0), cheight / 18.0);\n    var outputY = ltpy + (cheight / 6.0) * i + (cheight / 18.0);\n\n    i += 1;\n    context.strokeStyle = activityBorder;\n    context.strokeRect(ltpx, ltpy + (cheight / 6.0) * i, cwidth, cheight / 6.0);\n    context.strokeRect(ltpx + (cheight / 18.0), ltpy + (cheight / 6.0) * i + (cheight / 18.0), cwidth - (cheight / 9.0), cheight / 18.0);\n    var activityY = ltpy + (cheight / 6.0) * i + (cheight / 18.0);\n\n    i += 1;\n    context.strokeStyle = targetBorder;\n    context.strokeRect(ltpx, ltpy + (cheight / 6.0) * i, cwidth, cheight / 6.0);\n    context.strokeRect(ltpx + (cheight / 18.0), ltpy + (cheight / 6.0) * i + (cheight / 18.0), cwidth - (cheight / 9.0), cheight / 18.0);\n    var targetY = ltpy + (cheight / 6.0) * i + (cheight / 18.0);\n    // end of border of initiating canvas. for debug only\n\n    // data\n\n    // var outcomes:Outcome[] = [\n    //   new Outcome() {name: 'Улучшение эмоционального состояния ребенка'},\n    //   {name: 'Повышен уровень социально-бытовой адаптации'},\n    //   {name: 'Улучшение внутрисемейных отношений, включая детско-родительские отношения'},\n    // ];\n\n    var anyX = ltpx + (cheight / 18.0);\n    var anyHeight = cheight / 18.0;\n    var lineWidth = cwidth - (cheight / 9.0);\n    // end of data\n\n    if (this.programImpacts) {\n      for (let index = 0; index < this.programImpacts.length; index++) {\n        const impact = this.programImpacts[index];\n        \n        context.strokeStyle = impactBorder;\n        context.fillStyle = impactFill;\n\n        var rectX = 5 + anyX + index * (lineWidth / this.programImpacts.length);\n        var rectY = impactY;\n        var rectHeight = anyHeight;\n        var rectWidth = (lineWidth / this.programImpacts.length)-10;\n\n        this.roundRect(context, rectX, rectY, rectWidth, rectHeight, 3, true, true);\n\n        context.textAlign=\"center\"; \n        context.textBaseline = \"top\";\n        context.fillStyle = \"#000000\";\n        context.font = \"3px sans-serif\";\n        // var fontSize = 24;\n        // while(fontSize > 1)\n        // {\n        //   context.font = \"\" + fontSize + \"px sans-serif\";\n        //   if (context.measureText(impact.name).width < rectWidth)\n        //   {\n        //     break;\n        //   }\n        //   fontSize -= 1;\n        // }\n\n        var textToFill = impact.name;\n\n        // if (fontSize == 1)\n        // {\n        //   while(context.measureText(textToFill).width > rectWidth) {\n        //     textToFill = textToFill.substr(0, textToFill.length - 1);\n        //   }\n        // }\n        this.printAt(context, textToFill, rectX+(rectWidth/2), rectY, rectHeight/7, rectWidth);\n        // context.fillText(textToFill/*.substr(0, 125/this.programImpacts.length)*/, rectX+(rectWidth/2),rectY+(rectHeight/2));\n      }\n    }\n\n    if (this.programMidOutcomes) {\n      for (let index = 0; index < this.programMidOutcomes.length; index++) {\n        const midOutcome = this.programMidOutcomes[index];\n\n        context.strokeStyle = midOutcomeBorder;\n        context.fillStyle = midOutcomeFill;\n        \n        var rectX = 5 + anyX + index * (lineWidth / this.programMidOutcomes.length);\n        var rectY = midOutcomeY;\n        var rectHeight = anyHeight;\n        var rectWidth = (lineWidth / this.programMidOutcomes.length)-10;\n\n        this.roundRect(context, rectX, rectY, rectWidth, rectHeight, 3, true, true);\n\n        context.textAlign=\"center\"; \n        //context.textBaseline = \"middle\";\n        context.fillStyle = \"#000000\";\n\n        // var fontSize = 24;\n        // while(fontSize > 1)\n        // {\n        //   context.font = \"\" + fontSize + \"px sans-serif\";\n        //   if (context.measureText(midOutcome.name).width < rectWidth)\n        //   {\n        //     break;\n        //   }\n        //   fontSize -= 1;\n        // }\n\n        var textToFill = midOutcome.name;\n\n        // if (fontSize == 1)\n        // {\n        //   while(context.measureText(textToFill).width > rectWidth) {\n        //     textToFill = textToFill.substr(0, textToFill.length - 1);\n        //   }\n        // }\n        this.printAt(context, textToFill, rectX+(rectWidth/2), rectY, rectHeight/7, rectWidth);\n\n        // context.fillText(textToFill/*.substr(0, 125/this.programMidOutcomes.length)*/, rectX+(rectWidth/2),rectY+(rectHeight/2));\n      }\n    }\n    \n    if (this.programShortOutcomes) {\n      for (let index = 0; index < this.programShortOutcomes.length; index++) {\n        const shortOutcome = this.programShortOutcomes[index];\n        \n        context.strokeStyle = shortOutcomeBorder;\n        context.fillStyle = shortOutcomeFill;\n        \n        var rectX = 5 + anyX + index * (lineWidth / this.programShortOutcomes.length);\n        var rectY = shortOutcomeY;\n        var rectHeight = anyHeight;\n        var rectWidth = (lineWidth / this.programShortOutcomes.length)-10;\n\n        this.roundRect(context, rectX, rectY, rectWidth, rectHeight, 3, true, true);\n\n        context.textAlign=\"center\"; \n        //context.textBaseline = \"middle\";\n        context.fillStyle = \"#000000\";\n\n        // var fontSize = 24;\n        // while(fontSize > 1)\n        // {\n        //   context.font = \"\" + fontSize + \"px sans-serif\";\n        //   if (context.measureText(shortOutcome.name).width < rectWidth)\n        //   {\n        //     break;\n        //   }\n        //   fontSize -= 1;\n        // }\n\n        var textToFill = shortOutcome.name;\n\n        // if (fontSize == 1)\n        // {\n        //   while(context.measureText(textToFill).width > rectWidth) {\n        //     textToFill = textToFill.substr(0, textToFill.length - 1);\n        //   }\n        // }\n        this.printAt(context, textToFill, rectX+(rectWidth/2), rectY, rectHeight/7, rectWidth);\n        // context.fillText(textToFill/*.substr(0, 125/this.programShortOutcomes.length)*/, rectX+(rectWidth/2),rectY+(rectHeight/2));\n      }\n    }\n    \n    for (let index = 0; index < this.programOutputs.length; index++) {\n      const output = this.programOutputs[index];\n      \n      context.strokeStyle = outputBorder;\n      context.fillStyle = outputFill;\n\n      var rectX = 5 + anyX + index * (lineWidth / this.programOutputs.length);\n      var rectY = outputY;\n      var rectHeight = anyHeight;\n      var rectWidth = (lineWidth / this.programOutputs.length)-10;\n\n      this.roundRect(context, rectX, rectY, rectWidth, rectHeight, 3, true, true);\n\n      context.textAlign=\"center\"; \n      //context.textBaseline = \"middle\";\n      context.fillStyle = \"#000000\";\n\n      // var fontSize = 24;\n      // while(fontSize > 1)\n      // {\n      //   context.font = \"\" + fontSize + \"px sans-serif\";\n      //   if (context.measureText(output.name).width < rectWidth)\n      //   {\n      //     break;\n      //   }\n      //   fontSize -= 1;\n      // }\n\n      var textToFill = output.name;\n\n      // if (fontSize == 1)\n      // {\n      //   while(context.measureText(textToFill).width > rectWidth) {\n      //     textToFill = textToFill.substr(0, textToFill.length - 1);\n      //   }\n      // }\n      this.printAt(context, textToFill, rectX+(rectWidth/2), rectY, rectHeight/7, rectWidth);\n      // context.fillText(textToFill/*.substr(0, 125/this.programOutputs.length)*/, rectX+(rectWidth/2),rectY+(rectHeight/2));\n    }\n    \n    if (this.activities) {\n      for (let index = 0; index < this.activities.length; index++) {\n        const activity = this.activities[index];\n        \n        context.strokeStyle = activityBorder;\n        context.fillStyle = activityFill;\n\n        var rectX = 5 + anyX + index * (lineWidth / this.activities.length);\n        var rectY = activityY;\n        var rectHeight = anyHeight;\n        var rectWidth = (lineWidth / this.activities.length)-10;\n\n        this.roundRect(context, rectX, rectY, rectWidth, rectHeight, 3, true, true);\n\n        context.textAlign=\"center\"; \n        //context.textBaseline = \"middle\";\n        context.fillStyle = \"#000000\";\n\n        // var fontSize = 24;\n        // while(fontSize > 1)\n        // {\n        //   context.font = \"\" + fontSize + \"px sans-serif\";\n        //   if (context.measureText(activity.name).width < rectWidth)\n        //   {\n        //     break;\n        //   }\n        //   fontSize -= 1;\n        // }\n\n        var textToFill = activity.name;\n\n        // if (fontSize == 1)\n        // {\n        //   while(context.measureText(textToFill).width > rectWidth) {\n        //     textToFill = textToFill.substr(0, textToFill.length - 1);\n        //   }\n        // }\n        this.printAt(context, textToFill, rectX+(rectWidth/2), rectY, rectHeight/7, rectWidth);\n        // context.fillText(textToFill/*.substr(0, 125/this.activities.length)*/, rectX+(rectWidth/2),rectY+(rectHeight/2));\n      }\n    }\n    \n    if (this.targets) {\n      for (let index = 0; index < this.targets.length; index++) {\n        const target = this.targets[index];\n        \n            context.strokeStyle = targetBorder;\n            context.fillStyle = targetFill;\n        \n        var rectX = 5 + anyX + index * (lineWidth / this.targets.length);\n        var rectY = targetY;\n        var rectHeight = anyHeight;\n        var rectWidth = (lineWidth / this.targets.length)-10;\n\n        this.roundRect(context, rectX, rectY, rectWidth, rectHeight, 3, true, true);\n\n        context.textAlign=\"center\"; \n        //context.textBaseline = \"middle\";\n        context.fillStyle = \"#000000\";\n\n        // var fontSize = 24;\n        // while(fontSize > 1)\n        // {\n        //   context.font = \"\" + fontSize + \"px sans-serif\";\n        //   if (context.measureText(target.name).width < rectWidth)\n        //   {\n        //     break;\n        //   }\n        //   fontSize -= 1;\n        // }\n\n        var textToFill = target.name;\n\n        // if (fontSize == 1)\n        // {\n        //   while(context.measureText(textToFill).width > rectWidth) {\n        //     textToFill = textToFill.substr(0, textToFill.length - 1);\n        //   }\n        // }\n        this.printAt(context, textToFill, rectX+(rectWidth/2), rectY, rectHeight/7, rectWidth);\n        // context.fillText(textToFill/*.substr(0, 125/this.targets.length)*/, rectX+(rectWidth/2),rectY+(rectHeight/2));\n      }\n    }\n\n\n    // context.strokeStyle = \"#0000ff\";\n    // context.fillStyle = \"#aaaaee\";\n\n    // this.roundRect(context, -10, -10, 20, 20, 1, true, true);\n\n    // context.fill();\n\n    // context.lineWidth = 5;\n    // context.strokeStyle = \"#0000ff\";\n    // context.stroke();\n    context.restore();\n  }\n\n  roundRect(ctx, x, y, width, height, radius, fill, stroke) {\n    if (typeof stroke === 'undefined') {\n      stroke = true;\n    }\n    if (typeof radius === 'undefined') {\n      radius = 5;\n    }\n    if (typeof radius === 'number') {\n      radius = { tl: radius, tr: radius, br: radius, bl: radius };\n    } else {\n      var defaultRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\n      for (var side in defaultRadius) {\n        radius[side] = radius[side] || defaultRadius[side];\n      }\n    }\n    ctx.beginPath();\n    ctx.moveTo(x + radius.tl, y);\n    ctx.lineTo(x + width - radius.tr, y);\n    ctx.quadraticCurveTo(x + width, y, x + width, y + radius.tr);\n    ctx.lineTo(x + width, y + height - radius.br);\n    ctx.quadraticCurveTo(x + width, y + height, x + width - radius.br, y + height);\n    ctx.lineTo(x + radius.bl, y + height);\n    ctx.quadraticCurveTo(x, y + height, x, y + height - radius.bl);\n    ctx.lineTo(x, y + radius.tl);\n    ctx.quadraticCurveTo(x, y, x + radius.tl, y);\n    ctx.closePath();\n    if (fill) {\n      ctx.fill();\n    }\n    if (stroke) {\n      ctx.stroke();\n    }\n  }\n\n  select(outcome) {\n    let elSelectNative: any = document.getElementsByClassName(\"js-selectNative\")[0];\n    let elSelectCustom: any = document.getElementsByClassName(\"js-selectCustom\")[0];\n    let elSelectCustomBox: any = elSelectCustom.children[0];\n    let elSelectCustomOpts: any = elSelectCustom.children[1];\n    let customOptsList: any[] = Array.from(elSelectCustomOpts.children);\n\n    let optionChecked = \"\";\n    let optionHoveredIndex = -1;\n\n    \n    const isClosed = !elSelectCustom.classList.contains(\"isActive\");\n\n    if (isClosed) {\n      openSelectCustom();\n    } else {\n      closeSelectCustom();\n    }\n    \n\n    function openSelectCustom() {\n      elSelectCustom.classList.add(\"isActive\");\n      elSelectCustom.setAttribute(\"aria-hidden\", 'false');\n      if (optionChecked) {\n        const optionCheckedIndex = customOptsList.findIndex(\n        (el: any) => el.getAttribute(\"data-value\") === optionChecked);\n        updateCustomSelectHovered(optionCheckedIndex);\n      }\n      document.addEventListener(\"click\", watchClickOutside);\n    }\n\n    function closeSelectCustom() {\n      elSelectCustom.classList.remove(\"isActive\");\n      elSelectCustom.setAttribute(\"aria-hidden\", 'true');\n      updateCustomSelectHovered(-1);\n      document.removeEventListener(\"click\", watchClickOutside);\n    }\n\n    function updateCustomSelectHovered(newIndex) {\n      const prevOption = elSelectCustomOpts.children[optionHoveredIndex];\n      const option = elSelectCustomOpts.children[newIndex];\n\n      if (prevOption)prevOption.classList.remove(\"isHover\");\n      if (option) option.classList.add(\"isHover\");\n\n      optionHoveredIndex = newIndex;\n    }\n\n    function updateCustomSelectChecked(value, text) {\n      const prevValue = optionChecked;\n\n      const elPrevOption = elSelectCustomOpts.querySelector(`[data-value=\"${prevValue}\"`);\n\n      const elOption = elSelectCustomOpts.querySelector(`[data-value=\"${value}\"`);\n\n      if (elPrevOption) elPrevOption.classList.remove(\"isActive\");\n    \n      if (elOption) elOption.classList.add(\"isActive\");\n      elSelectCustomBox.textContent = text;\n      optionChecked = value;\n    }\n\n    function watchClickOutside(e: any) {\n      const didClickedOutside: any = !elSelectCustom.contains(event.target);\n      if (didClickedOutside) {\n        closeSelectCustom();\n      }\n    }\n\n    // // Update selectCustom value when selectNative is changed.\n    elSelectNative.addEventListener(\"change\", (e: any) => {\n      const value = e.target.value ? e.target.value :  elSelectNative.value ? elSelectNative.value : outcome.method;\n      const elRespectiveCustomOption = elSelectCustomOpts.querySelector(\n      `[data-value=\"${value}\"]`);\n\n      updateCustomSelectChecked(value, elRespectiveCustomOption ? elRespectiveCustomOption.textContent : 'null');\n    });\n\n    // Update selectCustom value when an option is clicked or hovered\n    customOptsList.forEach(function (elOption: any, index) {\n      elOption.addEventListener(\"click\", (e: any) => {\n        const value = e.target.getAttribute(\"data-value\");\n        // Sync native select to have the same value\n        elSelectNative.value = value;\n        elSelectNative.dispatchEvent(new Event('change'))\n        unselect()\n        updateCustomSelectChecked(value, e.target.textContent);\n        closeSelectCustom();\n      });\n\n      elOption.addEventListener(\"mouseenter\", e => {\n        updateCustomSelectHovered(index);\n      });\n\n      // TODO: Toggle these event listeners based on selectCustom visibility\n    });\n\n    function unselect() {\n      elSelectCustom = elSelectCustom.cloneNode(true);\n      elSelectNative = elSelectNative.cloneNode(true);\n      elSelectCustomBox = elSelectCustomBox.cloneNode(true);\n      elSelectCustomOpts = elSelectCustomOpts.cloneNode(true);\n      for (let element of customOptsList) element = element.cloneNode(true);\n    }\n  }\n\n  showShadow() {\n    const elements = document.querySelectorAll('textarea.shadow_program_label, input.shadow_program_label')\n    for (let i = 0; i < elements.length; i++) elements[i].classList.add('shadow_program')\n  }\n\n  hideShadow() {\n    const elements = document.querySelectorAll('textarea.shadow_program_label, input.shadow_program_label')\n    for (let i = 0; i < elements.length; i++) elements[i].classList.remove('shadow_program')\n  }\n  \n  openNotification(isError) {\n    const modalFactory = this.resolver.resolveComponentFactory(ShowModalComponent)\n\n    this.refDir.containerRef.clear()\n    const component = this.refDir.containerRef.createComponent(modalFactory)\n\n    component.instance.error = isError\n\n    component.instance.close.subscribe(ans => {\n      if (ans) this.refDir.containerRef.clear()\n    })\n  }\n}","<div class=\"fixed_block\" *ngIf=\"program && program.name\">\n\t<div class=\"title_fixed_block\">{{program.name}}</div>\n</div>\n\n<section class=\"help_block\" #help_block>\n\t<div class=\"full-width\" style=\"text-align: center;\">\n\t\tНажмите на текстовый блок для начала его редактирования\n\t</div>\n</section>\n\n<section class=\"menu_block\" *ngIf=\"displayProgressLine\">\n    <div class=\"full-width\"> \n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum1\" [class]=\"{'active': itemNum1Active || programForm.value.name}\"><div>Название программы</div></div>\n            <div class=\"desc_item3\">\n                Введите название программы. Если программа (практика) проходила верификацию и/или включена в реестр доказательных практик, и/или в другой реестр (банк) практик, используйте то же название, что и ранее.\n            </div>\n        </div> \n\n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum2\" [class]=\"{'active': itemNum2Active || programForm.value.period}\"><div>Введите сроки реализации программы</div></div>\n            <div class=\"desc_item3\">\n                Укажите год начала реализации программы и год окончания. Если программа продолжается, напишите н.в. Например, 2017 – н.в.\n            </div>\n        </div> \n\n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum3\" [class]=\"{'active': itemNum3Active || programForm.value.description}\"><div>Введите описание программы</div></div>\n            <div class=\"desc_item3\">\n                Введите  краткий текст с доступным описанием программы. Выделите самое главное и уникальное. Желательно, чтобы объем текста не превышал 300 символов с пробелами. \n            </div>\n        </div> \n\n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum4\" [class]=\"{'active': itemNum4Active || programForm.value.practice_refs.length > 0}\"><div>Выберите тип практики</div></div>\n            <div class=\"desc_item3\">\n                В перечне практик отметьте галочкой пункты, которые точно и однозначно характеризуют основную деятельность по  программе.  Можно выбрать как один пункт, так и несколько. Предпочтительно выбирать 1-2 пункта.\n            </div>\n        </div> \n\n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum5\" [class]=\"{'active': itemNum5Active || programForm.value.target_refs.length > 0}\"><div>Выберите целевые группы</div></div>\n            <div class=\"desc_item3\">\n                Отметьте галочкой в перечне ниже целевую группу или группы программы.  Для каждой отмеченной целевой группы далее необходимо будет построить цепочку социальных результатов. Добавить целевую группу или убрать выбранную можно будет в процессе работы. Для этого необходимо поставить или убрать галочку в списке, нажать кнопку «Сохранить», выйти и снова зайти в программу.  \n            </div>\n        </div>  \n\n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum6\" [class]=\"{'active': itemNum6Active || id}\"><div>Сохраните программу</div></div>\n            <div class=\"desc_item3\">\n                Нажмите кнопку «Сохранить». После сохранения программы часть информации будет скрыта. Для изменения данных раскройте карточку программы полностью, нажав на галочку в правом верхнем углу.\n            </div>\n        </div>   \n\n        <div class=\"photo\">\n            <div class=\"item_text\" id=\"itemNum7\" [class]=\"{'active': itemNum7Active || displayChain}\"><div>Переходите к ЦСР</div></div>\n            <div class=\"desc_item3\">\n                Все готово для работы над цепочкой социальных результатов. Постепенно раскрывайте блоки и вносите необходимую информации.  Двигайтесь сверху вниз, тогда все внесенные данные автоматически будут появляться на своих местах в блоках ниже.\n            </div>\n        </div>   \n        <p (click)=\"displayProgressLine = false\" class=\"item_Close\"><span><img src=\"/newpion/static/pionfront/assets/img/arrow_open.png\"></span></p>\n    </div>\n</section>\n\n<section class=\"block_program\">\n    <div>\n        <form [formGroup]=\"programForm\" (ngSubmit)=\"onSubmit()\">\n            <div class=\"row head_result\">\n                <div class=\"col-4 blue_item\">                    \n                    <h1 class=\"uppercase\" >\n                        <!-- <p (click)=\"displayProgressLine = true\"><span><img src=\"/newpion/static/pionfront/assets/img/book.png\"></span></p> -->\n                        <img src=\"/newpion/static/pionfront/assets/img/book.png\" (click)=\"displayProgressLine = true\"> \n                        Программа\n                    </h1>\n                </div>\n                <div class=\"col-4\"> \n                    <ng-container *ngIf=\"currentUserRequest\">\n                        <p class=\"name_program\">{{currentUserRequest.organization}}</p>\n                        <p class=\"desc_program\">{{currentUserRequest.region}}</p>\n                    </ng-container>\n                </div>\n                <div class=\"col-4 right\">\n                    <div class=\"desc_itemHelp desc_itemHelp_pencil\" #helpItem2>\n                        Нажмите для редактирования \n                    </div>\n                    <button (click)=\"displayProgramDetails = !displayProgramDetails; hideHelpItem(2)\" class=\"open_button op_btn\" type=\"button\"\n                        sost=\"close\" openItem=\".op_num1\"><img\n                            src=\"/newpion/static/pionfront/assets/img/arrow_open.png\"></button>\n                    <!-- <button class=\"open_button orange_inform\"><img src=\"/newpion/static/pionfront/assets/img/pencil_white.png\"></button>\t\t -->\n                </div>\n            </div>\n            <div class=\"block_programDesc\" (mouseover)=\"showShadow()\" (mouseout)=\"hideShadow()\">\n\n                <div class=\"row\">\n                    <div class=\"col-9 border_right\">\n                        <textarea autosize [minRows]=\"1\" class=\"name\" placeholder=\"Название вашей программы\" class=\"shadow_program_label\"\n                            formControlName=\"name\" (click)=\"hideHelpBlock()\"></textarea>\n                        <textarea autosize [minRows]=\"1\" class=\"shadow_program_label\"\n                            placeholder=\"Опишите суть практики «простым языком», доступным для не-специалистов. Если применимо, опишите суть практики так, чтобы она была понятна вашим благополучателям.\"\n                            formControlName=\"description\" (click)=\"hideHelpBlock()\"></textarea>\n                    </div>\n                    <div class=\"col-3\">\n                        <input type=\"text\" name=\"\" placeholder=\"дд.мм.гг - дд.мм.гг\" formControlName=\"period\" class=\"shadow_program_label\"\n                        (click)=\"hideHelpBlock()\">\n                    </div>\n                </div>\n                <div class=\"row op_num1\" *ngIf=\"displayProgramDetails && practices && targets\">\n                    <div class=\"col-7 user_info\">\n                        <h3>Практики</h3>\n\n                        <label class=\"container_checked\" *ngFor=\"let practice of practices\">{{practice.name}}\n                            <input [checked]=\"practiceShouldBeChecked(practice)\" type=\"checkbox\" [value]=\"practice.id\"\n                                (change)=\"onCheckChange ('practice_refs', $event)\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                    </div>\n                    <div class=\"col-1 inter_link\"></div>\n                    <div class=\"col-4 inter_link\">\n                        <h3>Целевые группы</h3>\n\n                        <label class=\"container_checked\" *ngFor=\"let target of targets\">{{target.name}}\n                            <input [checked]=\"targetShouldBeChecked(target)\" type=\"checkbox\" [value]=\"target.id\"\n                                (change)=\"onCheckChange('target_refs', $event)\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                    </div>\n                </div>\n\n            </div>\n            <!-- <div class=\"row op_num1 btn_newProg\" style=\"display: none;\">\n            <div class=\"col-6 center\"> \n                <button class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/graf.png\"><p>Цепочка социальных результатов</p></button> \n            </div>\n            <div class=\"col-6 center\">\n                <button class=\"add_button open_download\"><img src=\"/newpion/static/pionfront/assets/img/cloud_save2.png\"><p>Продукты для скачивания</p></button> \n            </div>\n        </div> -->\n            <div class=\"row op_num1 btn_newProg\">\n                <div class=\"col-12 center\">\n                    <input type=\"hidden\" name=\"\" formControlName=\"user_ref\">\n                    <button type=\"submit\" [disabled]=\"!programForm.valid\" class=\"add_button\">\n                        <p>Сохранить</p>\n                    </button>\n                </div>\n\n            </div>\n        </form>\n    </div>\n</section>\n\n\n\n<section class=\"block_chain\" *ngIf=\"this.id\">\n    <div>\n        <form [formGroup]=\"programEdit\">\n            <div class=\"row head_chain\">\n                <div class=\"col-8\">\n                    <h2 class=\"uppercase\">Цепочка социальных результатов (таблица)</h2>\n                </div> \n                <div class=\"col-4 right r_btn\">\n                    <button (click)=\"downloadProgram($event)\" class=\"add_button save_button\"><img\n                            src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">\n                        <p>Скачать</p>\n                    </button>\n                    <button style=\"width: auto;\" class=\"open_button op_btn min-btn\">\n                        <img \n                            src=\"/newpion/static/pionfront/assets/img/play_btn.png\"></button>\n                    <button (click)=\"displayChain = !displayChain\" style=\"width: auto;\" class=\"open_button op_btn z_color min-btn\"\n                        sost=\"close\" openItem=\".op_num5\" (click)=\"hideHelpItem(1)\"><img\n                            src=\"/newpion/static/pionfront/assets/img/arrow_open2.png\"></button>\n                    <div class=\"desc_itemHelp\" #helpItem1>\n                        Нажмите для редактирования \n                    </div>\n                </div>\n            </div>\n            <div class=\"desc_chain op_num5\" *ngIf=\"displayChain && assumptions\" formArrayName=\"assumptions\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n                        <p>Предположения <span>{{assumptions.length}}</span></p>\n                        <div class=\"desc_item3\">\n                            Предположения программы – это убеждения о программе, о том, как она будет происходить, которые не нашли отражения в цепочке социальных результатов.\n                        </div>\n                    </div>\n                    <div class=\"col-1 arrow right\">\n                        <!-- <button style=\"width: auto;\" class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num2\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button> -->\n                    </div>\n                    <div (click)=\"openAssumptionAdd()\" class=\"col-2 open_kontst\">\n                        <img src=\"/newpion/static/pionfront/assets/img/pencil.png\">\n                        <p>Добавить</p>\n                    </div>\n                </div>\n                <div class=\"row table_chain_gruppe op_num2\" *ngIf=\"assumptions.length == 0\">\n                    <p>Не заполнено</p>\n                </div>\n                <div class=\"table_chain_gruppe op_num2 uline\" *ngFor=\"let assumption of assumptions; index as i\" [formGroupName]=\"i\">\n                    <p>{{assumption.text}}</p>\n                    <textarea *ngIf=\"programEdit.value.assumptions[i].assumption_edit\" formControlName=\"assumption_name\"></textarea>\n                    <button *ngIf=\"programEdit.value.assumptions[i].assumption_edit\" class=\"add_button\" (click)=\"onAssumptionEdit(i)\">Обновить</button>\n                    <div class=\"row\" *ngIf=\"!programEdit.value.assumptions[i].assumption_edit\">\n                        <button class=\"add_button\" (click)=\"clickEditAssumption(i)\">Редактировать</button>\n                        <button class=\"add_button\" (click)=\"deleteAssumption(i)\">Удалить</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"desc_chain op_num5\" *ngIf=\"displayChain && contexts\" formArrayName=\"contexts\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n                        <p>Контексты <span>{{contexts.length}}</span></p>\n                        <div class=\"desc_item3\">\n                            Контекст – это среда (включая социальную, культурную и физическую среду), в которой будет осуществляться программа. Укажите, характеристики среды, важные для реализации программы.\n                        </div>\n                    </div>\n                    <div class=\"col-1 arrow right\">\n                        <!-- <button style=\"width: auto;\" class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num3\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button> -->\n                    </div>\n                    <div (click)=\"openContextAdd()\" class=\"col-2 open_pr\">\n                        <img src=\"/newpion/static/pionfront/assets/img/pencil.png\">\n                        <p>Добавить</p>\n                    </div>\n                </div>\n                <div class=\"row table_chain_gruppe op_num2\" *ngIf=\"contexts.length == 0\">\n                    <p>Не заполнено</p>\n                </div>\n                <div class=\"table_chain_gruppe op_num2 uline\" *ngFor=\"let context of contexts; index as i\" [formGroupName]=\"i\">                  \n                    <p>{{context.text}}</p>\n                    <textarea *ngIf=\"programEdit.value.contexts[i].context_edit\" formControlName=\"context_name\"></textarea>\n                    <button *ngIf=\"programEdit.value.contexts[i].context_edit\" class=\"add_button\" (click)=\"onContextEdit(i)\">Обновить</button>\n                    <div class=\"row\" *ngIf=\"!programEdit.value.contexts[i].context_edit\">\n                        <button class=\"add_button\" (click)=\"clickEditContext(i)\">Редактировать</button>\n                        <button class=\"add_button\" (click)=\"deleteContext(i)\">Удалить</button>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"desc_chain op_num5\" *ngIf=\"displayChain\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <a target=\"_blank\" href=\"{{baseUrl + 'manual/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                        <p>Целевые группы, активности, результаты</p>\n                        <div class=\"desc_item3\">\n                            Основные элементы  цепочки социальных результатов – целевые группы,  осуществляемая деятельность, а также результаты – непосредственные и социальные (изменения, которые происходят благодаря осуществляемой деятельности).\n                            Цепочка социальных результатов – это наглядное описание того, что составляет суть программы; за счет чего происходят позитивные изменения в жизни благополучателей (участников, партнеров) программы.<br>\n                            Нажмите на этот значок, чтобы получить дополнительную информацию.\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <!-- <img src=\"/newpion/static/pionfront/assets/img/pencil.png\">\n                            <p>Редактировать</p> -->\n                    </div>\n                    <div class=\"col-1 arrow right\">\n                        <button (click)=\"displayInnerChain = !displayInnerChain\" style=\"width: auto;\"\n                            class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num4\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                    </div>\n                </div>\n                <div class=\"row table_chain_gruppe op_num4\" *ngIf=\"displayInnerChain && program && activities && programOutputs && programShortOutcomes && programMidOutcomes && programImpacts\">\n                    <div class=\"col-2\">\n                        <div>\n                            <div class=\"row_name hintblock\">\n                                <a target=\"_blank\" href=\"{{baseUrl + 'manual/1/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                                <p>Целевые группы</p>\n                                <div class=\"desc_item3\">\n                                    Целевые группы – это основные группы участников, благополучателей программы. Это те, ради кого осуществляется программа.<br>\n                                    Нажмите на этот значок, чтобы получить дополнительную информацию. <br>Чтобы добавить целевую группу, вернитесь в описание программы и  выберите новую целевую группу из списка.\n                                </div>\n                            </div>\n                            <div class=\"white_block\">\n                                <div class=\"item\" *ngFor=\"let target of program.target_refs\"\n                                    (mouseenter)=\"makeHighlighted(target)\" (mouseleave)=\"makeUnhighlighted(target)\"\n                                    [class]=\"{'highlighted': target.shouldBeHighlighted}\"\n                                    (click)=\"openTargetDescriptionEdit(target)\">\n                                    <p class=\"center\">{{target.name}}</p>\n                                </div>\n                            </div>\n                            <div class=\"center\">\n                                <!-- <button class=\"add_button open_prgrouppe\"><img\n                                        src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                                    <p>Добавить</p>\n                                </button> -->\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <div>\n                            <div class=\"row_name hintblock\">\n                                <a target=\"_blank\" href=\"{{baseUrl + 'manual/3/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                                <p>Активности</p>\n                                <div class=\"desc_item3\">\n                                    Активности - конкретные действия, осуществляемые в рамках программы для достижения ее целей и задач.<br>\n                                    Нажмите на этот значок, чтобы получить дополнительную информацию.\n                                </div>\n                            </div>\n                            <div class=\"white_block\">\n                                <div class=\"item\" *ngFor=\"let activity of activities\" (click)=\"openActivityEdit(activity)\"\n                                    [class]=\"{'highlighted': activity.shouldBeHighlighted}\">\n                                    <p class=\"center\">{{activity.name}}</p>\n                                    <div class=\"desc_item\">\n                                        {{activity.info}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"center\">\n                                <button (click)=\"openActivityAdd()\" class=\"add_button open_TargetActive\">\n                                    <!-- <img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\"> -->\n                                    Добавить\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <div>\n                            <div class=\"row_name hintblock\">\n                                <a target=\"_blank\" href=\"{{baseUrl + 'manual/4/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                                <p>Непосредственные результаты</p>\n                                <div class=\"desc_item3\">\n                                    Непосредственные результаты – всё то, что непосредственно производится в процессе реализации  действий по программе.\n                                    Нажмите на этот значок, чтобы получить дополнительную информацию.\n                                </div>\n                            </div>\n                            <div class=\"white_block\">\n                                <div class=\"item\" *ngFor=\"let programOutput of programOutputs\"\n                                    (click)=\"openProgramOutputEdit(programOutput)\"\n                                    [class]=\"{'highlighted': programOutput.shouldBeHighlighted}\">\n                                    <p class=\"center\">{{programOutput.name}}</p>\n                                    <div class=\"desc_item\">\n                                        {{programOutput.info}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"center\">\n                                <button (click)=\"openProgramOutputAdd()\" class=\"add_button open_Direct \">\n                                    <!-- <img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\"> -->\n                                    Добавить\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <div>\n                            <div class=\"row_name hintblock\">\n                                <a target=\"_blank\" href=\"{{baseUrl + 'manual/5/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                                <p>Краткосрочные социальные результаты</p>\n                                <div class=\"desc_item3\">\n                                    Краткосрочные социальные результаты – это изменения в жизни участников программы, которые логически и непосредственно вытекают из деятельности по программе. \n                                    Нажмите на этот значок, чтобы получить дополнительную информацию.\n                                </div>\n                            </div>\n                            <div class=\"white_block\">\n                                <div class=\"item\" *ngFor=\"let programShortOutcome of programShortOutcomes\"\n                                    (click)=\"openShortProgramOutcomeEdit(programShortOutcome)\"\n                                    [class]=\"{'highlighted': programShortOutcome.shouldBeHighlighted}\">\n                                    <p class=\"center\">{{programShortOutcome.name}}</p>\n                                    <div class=\"desc_item\">\n                                        {{programShortOutcome.info}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"center\">\n                                <button (click)=\"openShortProgramOutcomeAdd()\" class=\"add_button open_ShortRez\">\n                                    <!-- <img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\"> -->\n                                    Добавить\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <div>\n                            <div class=\"row_name hintblock\">\n                                <a target=\"_blank\" href=\"{{baseUrl + 'manual/5/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                                <p>Среднесрочные социальные результаты</p>\n                                <div class=\"desc_item3\">\n                                    Среднесрочные социальные результаты – это последствия для участников программы, которые непосредственно и логически возникают после достижения краткосрочных социальных результатов программы.\n                                    Нажмите на этот значок, чтобы получить дополнительную информацию.\n                                </div>\n                            </div>\n                            <div class=\"white_block\">\n                                <div class=\"item\" *ngFor=\"let programMidOutcome of programMidOutcomes\"\n                                    (click)=\"openMidProgramOutcomeEdit(programMidOutcome)\"\n                                    [class]=\"{'highlighted': programMidOutcome.shouldBeHighlighted}\">\n                                    <p class=\"center\">{{programMidOutcome.name}}</p>\n                                    <div class=\"desc_item\">\n                                        {{programMidOutcome.info}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"center\">\n                                <button (click)=\"openMidProgramOutcomeAdd()\" class=\"add_button open_MidRez\">\n                                    <!-- <img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\"> -->\n                                    Добавить\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <div>\n                            <div class=\"row_name hintblock\">\n                                <a target=\"_blank\" href=\"{{baseUrl + 'manual/6/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                                <p>Социальный эффект</p>\n                                <div class=\"desc_item3\">\n                                    Социальные эффекты - позитивные изменения, которые ожидаются от реализации программы. Последствия для участников программы, их окружения (сообществ) или общества в целом, которые логически вытекают из среднесрочных социальных результатов.\n                                    Нажмите на этот значок, чтобы получить дополнительную информацию.\n                                </div>\n                            </div>\n                            <div class=\"white_block\">\n                                <div class=\"item\" *ngFor=\"let programImpact of programImpacts\"\n                                    (click)=\"openProgramImpactEdit(programImpact)\"\n                                    [class]=\"{'highlighted': programImpact.shouldBeHighlighted}\">\n                                    <p class=\"center\">{{programImpact.name}}</p>\n                                    <div class=\"desc_item\">\n                                        {{programImpact.info}}\n                                    </div>\n                                </div>\n                            </div>\n                            <div class=\"center\">\n                                <button (click)=\"openProgramImpactAdd()\" class=\"add_button open_FinEffect\">\n                                    <!-- <img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\"> -->\n                                    Добавить\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</section>\n\n<!-- <section class=\"block_chain\" *ngIf=\"false\">\n    <div>\n        <div class=\"row head_chain\">\n            <div class=\"col-9\">\n                <h2 class=\"uppercase\">Цепочка социальных результатов (схема)</h2>\n            </div>\n            <div class=\"col-2 right\">\n                 <button class=\"add_button save_button\"><img src=\"/newpion/static/pionfront/assets/img/cloud_save.png\"><p>Скачать</p></button> \n            </div>\n\n            <div class=\"col-1 right\">\n                <button style=\"width: auto;\" class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num6\"><img\n                        src=\"/newpion/static/pionfront/assets/img/arrow_open.png\"></button>\n            </div>\n        </div>\n        <div class=\"table_head op_num6\" style=\"display:none\">\n            <h3>Дизайн:</h3>\n            <div class=\"row\">\n                <div class=\"col-4\">\n                    <p>Ширина: </p>\n                    <select>\n                        <option>Никакой предел</option>\n                        <option>Никакой предел 1</option>\n                        <option>Никакой предел 2</option>\n                        <option>Никакой предел 3</option>\n                    </select>\n                </div>\n                <div class=\"col-3\">\n                    <p>Размер шрифта: </p>\n                    <select>\n                        <option>10</option>\n                        <option>12</option>\n                        <option>14</option>\n                        <option>16</option>\n                    </select>\n                </div>\n                <div class=\"col-3\">\n                    <p>Расположение: </p>\n                    <select>\n                        <option>Нормальное</option>\n                        <option>Нормальное 1</option>\n                        <option>Нормальное 2</option>\n                        <option>Нормальное 3</option>\n                    </select>\n                </div>\n                <div class=\"col-2\">\n                    <p>Цвет: </p>\n                    <select>\n                        <option>Есть</option>\n                        <option>Нет</option>\n                    </select>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-9 block_img_list\">\n                    <p class=\"font_500\">Экспорт:</p>\n                    <img src=\"/newpion/static/pionfront/assets/img/imp.png\">\n                    <img src=\"/newpion/static/pionfront/assets/img/gif.png\">\n                    <img src=\"/newpion/static/pionfront/assets/img/jpeg.png\">\n                    <img src=\"/newpion/static/pionfront/assets/img/pdf.png\">\n                    <img src=\"/newpion/static/pionfront/assets/img/png.png\">\n                    <img src=\"/newpion/static/pionfront/assets/img/svg.png\">\n                    <img src=\"/newpion/static/pionfront/assets/img/tiff.png\">\n\n                </div>\n                <div class=\"col-3 right button_block\">\n                    <button class=\"open_button orange_inform\"><img\n                            src=\"/newpion/static/pionfront/assets/img/reload.png\"></button>\n                    <button class=\"open_button orange_inform\"><img\n                            src=\"/newpion/static/pionfront/assets/img/pencil_white.png\"></button>\n                    <button class=\"open_button orange_inform\"><img\n                            src=\"/newpion/static/pionfront/assets/img/discet.png\"></button>\n                </div>\n            </div>\n        </div>\n        <div class=\"dia_generator op_num6\">\n            <div class=\"row\">\n                <div class=\"col-9 border_right\">\n                    <h2 class=\"center\">Диаграмма путей</h2>\n                    <div id=\"np-scheme-wrapper\">\n                        <canvas id=\"np-canvas\" width=\"851\" height=\"500\">\n                        </canvas>\n                        <div id=\"np-button-wrapper\">\n                            <input class='np-button' type=\"button\" id=\"plus\" value=\"+\"><input class='np-button' type=\"button\" id=\"minus\" value=\"-\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"col-3 info_dia\">\n                    <p class=\"font_500\">Легенда:</p>\n                    <p class=\"font_500\"><span style=\"background: #9ee8f4;border-color: #45c6db;\"></span>Целевая группа\n                    </p>\n                    <p class=\"font_500\"><span style=\"background: #adfbdd;border-color: #2ca978;\"></span>Активность</p>\n                    <p class=\"font_500\"><span style=\"background: #fee6b1;border-color: #ee860b;\"></span>Непосредственный\n                        результат</p>\n                    <p class=\"font_500\"><span style=\"background: #f3c9ee;border-color: #bf44af;\"></span>Краткосрочный\n                        социальный результат</p>\n                    <p class=\"font_500\"><span style=\"background: #c1b9f4;border-color: #6a5faf;\"></span>Среднесрочный\n                        социальный результат</p>\n                    <p class=\"font_500\"><span style=\"background: #f4c2b9;border-color: #ff330b;\"></span>Социальный\n                        эффект</p>\n                </div>\n            </div>\n        </div>\n    </div>\n</section> -->\n\n<section class=\"block_chain\" *ngIf=\"this.id\">\n    <div>\n        <div class=\"row head_chain\">\n            <div class=\"col-8\">\n                <h2 class=\"uppercase\">Показатели и план мониторинга</h2>\n            </div>\n\n\n            <div class=\"col-4 right r_btn\">\n                <button (click)=\"downloadPlanAndForm($event)\" class=\"add_button save_button\"><img\n                        src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">\n                    <p>Скачать</p>\n                </button>\n                <button style=\"width: auto;\" class=\"open_button op_btn min-btn\">\n                    <img \n                        src=\"/newpion/static/pionfront/assets/img/play_btn.png\"></button>\n                <button (click)=\"displayPlanForm = !displayPlanForm\" style=\"width: auto;\" class=\"open_button op_btn z_color min-btn\"\n                    sost=\"close\" openItem=\".op_num5\"><img\n                        src=\"/newpion/static/pionfront/assets/img/arrow_open2.png\"></button>\n            </div> \n        </div>\n\n\n        <ng-container *ngIf=\"displayPlanForm\">\n            <div class=\"desc_chain op_num9\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n                        <p>План мониторинга</p>\n                        <div class=\"desc_item3\">\n                            План мониторинга – документ, которым руководствуются при проведении мониторинга достижений результатов программы. Он включает ключевые оценочные вопросы и стратегию получения на них ответов (показатели, методы, инструменты, частоту сбора и правила использования собранной информации). Оценочные вопросы – это то, что вы хотите узнать о программе, они должны исходить из модели программы (например, приводит ли действие Х к результату У)\n                        </div>\n                    </div>\n                    <div class=\"col-2\">\n                        <button (click)=\"downloadPlan($event)\" class=\"add_button save_button\"><img\n                                src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">\n                            <p>Скачать</p>\n                        </button>\n                    </div>\n                    <div class=\"col-1 arrow right\">\n                        <button (click)=\"displayPlan = !displayPlan\" style=\"width: auto;\" class=\"open_button op_btn\"\n                            sost=\"close\" openItem=\".op_num30\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"desc_chain act_m_line op_num30\" *ngIf=\"displayPlan\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <a target=\"_blank\" href=\"{{baseUrl + 'manual/4/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                        <p>Непосредственные результаты</p>\n                        <div class=\"desc_item3\">\n                            Измерение непосредственных результатов, как правило, осуществляется через подсчет числа проведенных мероприятий (деятельности), их участников.\n                        </div>\n                    </div>\n                    <div class=\"col-2\"></div>\n                    <div class=\"col-1 arrow right\">\n                        <button (click)=\"displayPlanOutput = !displayPlanOutput\" style=\"width: auto;\"\n                            class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num28\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                    </div>\n                </div>\n                <div class=\"table_chain op_num28\" *ngIf=\"displayPlanOutput && mplOutputs && programOutputs\">\n                    <table class=\"num10_table\">\n                        <app-thead-plan></app-thead-plan>\n                        <div class=\"tbody\">\n                            <tbody>\n                                <ng-container *ngFor=\"let mplOutput of mplOutputs; index as i\">\n                                    <tr class=\"block_qw\">\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayResultRef(mplOutput)\"><span\n                                                *ngIf=\"mplOutput.result_ref\">{{mplOutput.result_ref.name}}</span></td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayName(mplOutput)\">\n                                            {{mplOutput.name}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayIndicator(mplOutput)\">\n                                            {{mplOutput.indicator}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayMethod(mplOutput)\">\n                                            {{mplOutput.method}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayTool(mplOutput)\">\n                                            {{mplOutput.tool}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayFrequency(mplOutput)\">\n                                            {{mplOutput.frequency}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayReporting(mplOutput)\">\n                                            {{mplOutput.reporting}}</td>\n                                        <td>\n                                            <button class=\"add_button\" (click)=\"mplOutputDelete($event, mplOutput)\">Удалить</button>\n                                            <button class=\"add_button\" (click)=\"addMplOutput(i)\">Добавить</button>\n                                            <!-- <button class=\"add_button\" (click)=\"addMplOutput(i+1)\">Добавить строку снизу</button> -->\n                                        </td>\n                                    </tr>\n                                    <tr class=\"block_select\">\n                                        <td style=\"word-wrap: break-word;\" colspan=\"8\">\n                                            <div *ngIf=\"mplOutput.displayResultRef\">\n                                                <select (change)=\"changeOutputRef(mplOutput, $event, 'output')\"\n                                                    class=\"no-border\">\n                                                    <option value=\"\" disabled\n                                                        [selected]=\"outputShouldBeSelected(mplOutput, null)\"\n                                                        style='display:none;'>Выберите данные из\n                                                        списка</option>\n                                                    <option *ngFor=\"let programOutput of programOutputs\"\n                                                        [selected]=\"outputShouldBeSelected(mplOutput, programOutput)\"\n                                                        value=\"{{programOutput.id}}\">{{programOutput.name}}</option>\n                                                </select>\n                                            </div>\n\n                                            <div *ngIf=\"mplOutput.displayName\">\n                                                <textarea (focusout)=\"changeName(mplOutput, $event, 'output')\" rows=\"1\"\n                                                    placeholder=\"Что именно вы хотите измерить?\"\n                                                    value='{{mplOutput.name}}'>{{mplOutput.Name}}</textarea>\n                                            </div>\n\n                                            <div class=\"one_btn\" *ngIf=\"mplOutput.displayIndicator\">\n                                                <textarea (focusout)=\"changeIndicator(mplOutput, $event, 'output')\" rows=\"1\"\n                                                    placeholder=\"Введите данные или выберите из библиотеки\"\n                                                    value='{{mplOutput.indicator}}'></textarea>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplOutput.displayMethod\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeMethod(mplOutput, $event, 'output')\"\n                                                            rows=\"1\" placeholder=\"Введите данные\"\n                                                            value='{{mplOutput.method}}'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"display: none;\" class=\"js-selectNative\" \n                                                            (change)=\"changeMethod(mplOutput, $event, 'output')\">\n                                                                <option value=\"null\" disabled selected style='display:none;'>\n                                                                    Выберите из списка\n                                                                </option>\n                                                                <option *ngFor=\"let method of methods\" [value]=\"method.name\">\n                                                                    {{method.name}}\n                                                                </option>\n                                                        </select>\n                                                        <div class=\"selectCustom js-selectCustom\" aria-hidden=\"true\" (click)=\"select(mplOutput)\">\n                                                            <div class=\"selectCustom-trigger\" data-value=\"null\">Выберите из списка</div>\n                                                            <div class=\"selectCustom-options\">\n                                                                <div class=\"selectCustom-option\" *ngFor=\"let method of methods\" (mouseover)=\"method.showInfo = true\" (mouseout)=\"method.showInfo = false\">\n                                                                    <div [attr.data-value]=\"method.name\">{{method.name}}</div>\n                                                                    <div *ngIf=\"method.info && method.showInfo\" style=\"font-size: 13px;\"> - {{method.info}}</div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div *ngIf=\"mplOutput.displayTool\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeTool(mplOutput, $event, 'output')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            [value]='mplOutput.tool'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\" (change)=\"changeTool(mplOutput, $event, 'output')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span *ngIf=\"(!mplOutput.suitable_tools || mplOutput.suitable_tools.length == 0) && (!mplOutput.suitable_from_tools || mplOutput.suitable_from_tools.length == 0)\">Ничего не найдено</span>\n                                                                <span *ngIf=\"mplOutput.suitable_tools && mplOutput.suitable_tools.length > 0 || mplOutput.suitable_from_tools && mplOutput.suitable_from_tools.length > 0\">Выберите из списка</span></option>\n                                                                <ng-container *ngIf=\"mplOutput.suitable_tools && mplOutput.suitable_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_tool of mplOutput.suitable_tools\" [value]=\"suitable_tool + '$$$' + 'OutcomeMethods'\">{{suitable_tool}}</option>\n                                                                </ng-container>\n                                                                <ng-container *ngIf=\"mplOutput.suitable_from_tools && mplOutput.suitable_from_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_from_tool of mplOutput.suitable_from_tools\" [value]=\"suitable_from_tool + '$$$' + 'Tools'\">{{suitable_from_tool}}</option>\n                                                                </ng-container>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div>\n                                        <div><img src=\"/newpion/static/pionfront/assets/img/clip.png\"></div> -->\n                                            </div>\n\n                                            <div class=\"one_btn\" *ngIf=\"mplOutput.displayFrequency\">\n                                                <textarea (focusout)=\"changeFrequency(mplOutput, $event, 'output')\" rows=\"1\"\n                                                    placeholder=\"Введите данные\" value='{{mplOutput.frequency}}'></textarea>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/date.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplOutput.displayReporting\">\n                                                <textarea (focusout)=\"changeReporting(mplOutput, $event, 'output')\" rows=\"1\"\n                                                    placeholder=\"Введите данные\" value='{{mplOutput.reporting}}'></textarea>\n                                            </div>\n\n                                        </td>\n                                    </tr>\n                                </ng-container>\n                            </tbody>\n                        </div>\n                    </table>\n                    <div class=\"center add_tableline\">\n                        <button (click)=\"createMplOutput(null, true)\" name=\"num3_table\" *ngIf=\"mplOutputs && mplOutputs.length > 0\"\n                            class=\"add_button\">\n                            <p>Сохранить</p>\n                        </button>\n                        <button (click)=\"addMplOutput()\" name=\"num10_table\" class=\"add_button\"><img\n                                src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                            <p>Добавить строку</p>\n                        </button>\n                        <a *ngIf=\"mplOutputs && mplOutputs.length > 0\" (click)=\"deleteLastMplOutput($event)\"\n                            class=\"delete-mpl-line\">Удалить последнюю строку</a>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"desc_chain act_m_line op_num30\" *ngIf=\"displayPlan\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <a target=\"_blank\" href=\"{{baseUrl + 'manual/5/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                        <p>Краткосрочные социальные результаты</p>\n                        <div class=\"desc_item3\">\n                            Краткосрочные социальные результаты – это изменения в жизни участников программы, которые логически и непосредственно вытекают из деятельности по программе. \n                        </div>\n                    </div>\n                    <div class=\"col-2\"></div>\n                    <div class=\"col-1 arrow right\">\n                        <button (click)=\"displayPlanShortOutcome = !displayPlanShortOutcome\" style=\"width: auto;\"\n                            class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num26\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                    </div>\n                </div>\n                <div class=\"table_chain op_num26\" *ngIf=\"displayPlanShortOutcome && mplShortOutcomes && programShortOutcomes\">\n                    <table class=\"num9_table\">\n                        <app-thead-plan></app-thead-plan>\n                        <tbody>\n                            <div class=\"tbody\">\n                                <ng-container *ngFor=\"let mplShortOutcome of mplShortOutcomes; index as i\">\n                                    <tr class=\"block_qw\">\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayResultRef(mplShortOutcome)\">\n                                            <span\n                                                *ngIf=\"mplShortOutcome.result_ref\">{{mplShortOutcome.result_ref.name}}</span>\n                                        </td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayName(mplShortOutcome)\">\n                                            {{mplShortOutcome.name}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayIndicator(mplShortOutcome)\">\n                                            {{mplShortOutcome.indicator}}\n                                        </td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayMethod(mplShortOutcome)\">\n                                            {{mplShortOutcome.method}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayTool(mplShortOutcome)\">\n                                            {{mplShortOutcome.tool}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayFrequency(mplShortOutcome)\">\n                                            {{mplShortOutcome.frequency}}\n                                        </td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayReporting(mplShortOutcome)\">\n                                            {{mplShortOutcome.reporting}}\n                                        </td>\n                                        <td>\n                                            <button class=\"add_button\" (click)=\"mplShortOutcomeDelete($event, mplShortOutcome)\">Удалить</button>\n                                            <button class=\"add_button\" (click)=\"addMplShortOutcome(i)\">Добавить</button>\n                                            <!-- <button class=\"add_button\" (click)=\"addMplShortOutcome(i+1)\">Добавить строку снизу</button> -->\n                                        </td>\n                                    </tr>\n                                    <tr class=\"block_select\">\n                                        <td style=\"word-wrap: break-word;\" colspan=\"8\">\n                                            <div *ngIf=\"mplShortOutcome.displayResultRef\">\n                                                <select\n                                                    (change)=\"changeShortOutcomeRef(mplShortOutcome, $event, 'shortoutcome')\"\n                                                    class=\"no-border\">\n                                                    <option value=\"\" disabled\n                                                        [selected]=\"outputShouldBeSelected(mplShortOutcome, null)\"\n                                                        style='display:none;'>Выберите данные из\n                                                        списка</option>\n                                                    <option *ngFor=\"let programOutput of programShortOutcomes\"\n                                                        [selected]=\"outputShouldBeSelected(mplShortOutcome, programOutput)\"\n                                                        value=\"{{programOutput.id}}\">{{programOutput.name}}</option>\n                                                </select>\n                                            </div>\n\n                                            <div *ngIf=\"mplShortOutcome.displayName\">\n                                                <textarea (focusout)=\"changeName(mplShortOutcome, $event, 'shortoutcome')\"\n                                                    rows=\"1\" placeholder=\"Что именно вы хотите измерить?\"\n                                                    value='{{mplShortOutcome.name}}'>{{mplShortOutcome.Name}}</textarea>\n                                            </div>\n\n                                            <div *ngIf=\"mplShortOutcome.displayIndicator\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea\n                                                            (focusout)=\"changeIndicator(mplShortOutcome, $event, 'shortoutcome')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            value='{{mplShortOutcome.indicator}}'></textarea></div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\"\n                                                            (change)=\"changeIndicator(mplShortOutcome, $event, 'shortoutcome')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span\n                                                                    *ngIf=\"!mplShortOutcome.suitable_indicators || mplShortOutcome.suitable_indicators.length == 0\">Ничего\n                                                                    не найдено</span>\n                                                                <span\n                                                                    *ngIf=\"mplShortOutcome.suitable_indicators && mplShortOutcome.suitable_indicators.length > 0\">Выберите\n                                                                    из списка</span></option>\n                                                            <option\n                                                                *ngFor=\"let suitable_tool of mplShortOutcome.suitable_indicators\"\n                                                                value=\"{{suitable_tool}}\">{{suitable_tool}}</option>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplShortOutcome.displayMethod\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea\n                                                            (focusout)=\"changeMethod(mplShortOutcome, $event, 'shortoutcome')\"\n                                                            rows=\"1\" placeholder=\"Введите данные\"\n                                                            value='{{mplShortOutcome.method}}'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select (change)=\"changeMethod(mplShortOutcome, $event, 'shortoutcome')\"\n                                                         style=\"display: none;\" class=\"js-selectNative\">\n                                                            <option value=\"null\" disabled selected style='display:none;'>\n                                                                Выберите из списка\n                                                            </option>\n                                                            <option *ngFor=\"let method of methods\" [value]=\"method.name\">\n                                                                {{method.name}}\n                                                            </option>\n                                                        </select>\n                                                        <div class=\"selectCustom js-selectCustom\" aria-hidden=\"true\" (click)=\"select(mplShortOutcome)\">\n                                                            <div class=\"selectCustom-trigger\" data-value=\"null\">Выберите из списка</div>\n                                                            <div class=\"selectCustom-options\">\n                                                                <div *ngFor=\"let method of methods\" class=\"selectCustom-option\" (mouseover)=\"method.showInfo = true\" (mouseout)=\"method.showInfo = false\">\n                                                                    <div [attr.data-value]=\"method.name\">{{method.name}} </div>\n                                                                    <div *ngIf=\"method.info && method.showInfo\" style=\"font-size: 13px;\"> - {{method.info}}</div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div *ngIf=\"mplShortOutcome.displayTool\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeTool(mplShortOutcome, $event, 'shortoutcome')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            [value]=\"mplShortOutcome.tool\"></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\" (change)=\"changeTool(mplShortOutcome, $event, 'shortoutcome')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span *ngIf=\"(!mplShortOutcome.suitable_tools || mplShortOutcome.suitable_tools.length == 0) && (!mplShortOutcome.suitable_from_tools || mplShortOutcome.suitable_from_tools.length == 0)\">Ничего не найдено</span>\n                                                                <span *ngIf=\"mplShortOutcome.suitable_tools && mplShortOutcome.suitable_tools.length > 0 || mplShortOutcome.suitable_from_tools && mplShortOutcome.suitable_from_tools.length > 0\">Выберите из списка</span></option>\n                                                                <ng-container *ngIf=\"mplShortOutcome.suitable_tools && mplShortOutcome.suitable_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_tool of mplShortOutcome.suitable_tools\" [value]=\"suitable_tool + '$$$' + 'OutcomeMethods'\">{{suitable_tool}}</option>\n                                                                </ng-container>\n                                                                <ng-container *ngIf=\"mplShortOutcome.suitable_from_tools && mplShortOutcome.suitable_from_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_from_tool of mplShortOutcome.suitable_from_tools\" [value]=\"suitable_from_tool + '$$$' + 'Tools'\">{{suitable_from_tool}}</option>\n                                                                </ng-container>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div>\n                                            <div><img src=\"/newpion/static/pionfront/assets/img/clip.png\"></div> -->\n                                            </div>\n\n                                            <div class=\"one_btn\" *ngIf=\"mplShortOutcome.displayFrequency\">\n                                                <textarea\n                                                    (focusout)=\"changeFrequency(mplShortOutcome, $event, 'shortoutcome')\"\n                                                    rows=\"1\" placeholder=\"Введите данные\"\n                                                    value='{{mplShortOutcome.frequency}}'></textarea>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/date.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplShortOutcome.displayReporting\">\n                                                <textarea\n                                                    (focusout)=\"changeReporting(mplShortOutcome, $event, 'shortoutcome')\"\n                                                    rows=\"1\" placeholder=\"Введите данные\"\n                                                    value='{{mplShortOutcome.reporting}}'></textarea>\n                                            </div>\n\n                                        </td>\n                                    </tr>\n                                </ng-container>\n                            </div>\n                        </tbody>\n                    </table>\n                    <div class=\"center add_tableline\">\n                        <button (click)=\"createMplShortOutcome(null, true)\" name=\"num3_table\" *ngIf=\"mplShortOutcomes && mplShortOutcomes.length > 0\"\n                            class=\"add_button\">\n                            <p>Сохранить</p>\n                        </button>\n                        <button (click)=\"addMplShortOutcome(mplShortOutcomes.length)\" name=\"num9_table\"\n                            class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                            <p>Добавить строку</p>\n                        </button>\n                        <a *ngIf=\"mplShortOutcomes && mplShortOutcomes.length > 0\"\n                            (click)=\"deleteLastMplShortOutcome($event)\" class=\"delete-mpl-line\">Удалить последнюю\n                            строку</a>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"desc_chain act_m_line op_num30\" *ngIf=\"displayPlan\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <a target=\"_blank\" href=\"{{baseUrl + 'manual/6/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                        <p>Среднесрочные социальные результаты</p>\n                        <div class=\"desc_item3\">\n                            Среднесрочные социальные результаты – это последствия для участников программы, которые непосредственно и логически возникают после достижения краткосрочных социальных результатов программы.\n                        </div>\n                    </div>\n                    <div class=\"col-2\"></div>\n                    <div class=\"col-1 arrow right\">\n                        <button (click)=\"displayPlanMidOutcome = !displayPlanMidOutcome\" style=\"width: auto;\"\n                            class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num25\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                    </div>\n                </div>\n                <div class=\"table_chain op_num25\" *ngIf=\"displayPlanMidOutcome && mplMidOutcomes && programMidOutcomes\">\n                    <table class=\"num8_table\">\n                        <app-thead-plan></app-thead-plan>\n                        <tbody>\n                            <div class=\"tbody\">\n                                <ng-container *ngFor=\"let mplMidOutcome of mplMidOutcomes; index as i\">\n                                    <tr class=\"block_qw\">\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayResultRef(mplMidOutcome)\">\n                                            <span *ngIf=\"mplMidOutcome.result_ref\">{{mplMidOutcome.result_ref.name}}</span>\n                                        </td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayName(mplMidOutcome)\">\n                                            {{mplMidOutcome.name}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayIndicator(mplMidOutcome)\">\n                                            {{mplMidOutcome.indicator}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayMethod(mplMidOutcome)\">\n                                            {{mplMidOutcome.method}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayTool(mplMidOutcome)\">\n                                            {{mplMidOutcome.tool}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayFrequency(mplMidOutcome)\">\n                                            {{mplMidOutcome.frequency}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayReporting(mplMidOutcome)\">\n                                            {{mplMidOutcome.reporting}}</td>\n                                        <td>\n                                            <button class=\"add_button\" (click)=\"mplMidOutcomeDelete($event, mplMidOutcome)\">Удалить</button>\n                                            <button class=\"add_button\" (click)=\"addMplMidOutcome(i)\">Добавить</button>\n                                            <!-- <button class=\"add_button\" (click)=\"addMplMidOutcome(i+1)\">Добавить строку снизу</button> -->\n                                        </td>\n                                    </tr>\n                                    <tr class=\"block_select\">\n                                        <td style=\"word-wrap: break-word;\" colspan=\"8\">\n                                            <div *ngIf=\"mplMidOutcome.displayResultRef\">\n                                                <select (change)=\"changeMidOutcomeRef(mplMidOutcome, $event, 'midoutcome')\"\n                                                    class=\"no-border\">\n                                                    <option value=\"\" disabled\n                                                        [selected]=\"outputShouldBeSelected(mplMidOutcome, null)\"\n                                                        style='display:none;'>Выберите данные из\n                                                        списка</option>\n                                                    <option *ngFor=\"let programOutput of programMidOutcomes\"\n                                                        [selected]=\"outputShouldBeSelected(mplMidOutcome, programOutput)\"\n                                                        value=\"{{programOutput.id}}\">{{programOutput.name}}</option>\n                                                </select>\n                                            </div>\n\n                                            <div *ngIf=\"mplMidOutcome.displayName\">\n                                                <textarea (focusout)=\"changeName(mplMidOutcome, $event, 'midoutcome')\"\n                                                    rows=\"1\" placeholder=\"Что именно вы хотите измерить?\"\n                                                    value='{{mplMidOutcome.name}}'>{{mplMidOutcome.Name}}</textarea>\n                                            </div>\n\n                                            <div *ngIf=\"mplMidOutcome.displayIndicator\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea\n                                                            (focusout)=\"changeIndicator(mplMidOutcome, $event, 'midoutcome')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            value='{{mplMidOutcome.indicator}}'></textarea>\n                                                    </div>\n\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\"\n                                                            (change)=\"changeIndicator(mplMidOutcome, $event, 'midoutcome')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span\n                                                                    *ngIf=\"(!mplMidOutcome.suitable_indicators || mplMidOutcome.suitable_indicators.length == 0)\">Ничего\n                                                                    не найдено</span>\n                                                                <span\n                                                                    *ngIf=\"mplMidOutcome.suitable_indicators && mplMidOutcome.suitable_indicators.length > 0\">Выберите\n                                                                    из списка</span></option>\n                                                            <option\n                                                                *ngFor=\"let suitable_tool of mplMidOutcome.suitable_indicators\"\n                                                                value=\"{{suitable_tool}}\">{{suitable_tool}}</option>\n                                                                \n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplMidOutcome.displayMethod\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea\n                                                            (focusout)=\"changeMethod(mplMidOutcome, $event, 'midoutcome')\"\n                                                            rows=\"1\" placeholder=\"Введите данные\"\n                                                            value='{{mplMidOutcome.method}}'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\" >\n                                                        <select style=\"display: none;\" class=\"js-selectNative\"\n                                                        (change)=\"changeMethod(mplMidOutcome, $event, 'midoutcome')\">\n                                                            <option value=\"null\" disabled selected style='display:none;'>\n                                                                Выберите из списка\n                                                            </option>\n                                                            <option *ngFor=\"let method of methods\" [value]=\"method.name\">\n                                                                {{method.name}}\n                                                            </option>\n                                                    </select>\n                                                    <div class=\"selectCustom js-selectCustom\" aria-hidden=\"true\" (click)=\"select(mplMidOutcome)\">\n                                                        <div class=\"selectCustom-trigger\" data-value=\"null\">Выберите из списка</div>\n                                                        <div class=\"selectCustom-options\">\n                                                            <div *ngFor=\"let method of methods\" class=\"selectCustom-option\" (mouseover)=\"method.showInfo = true\" (mouseout)=\"method.showInfo = false\">\n                                                                <div [attr.data-value]=\"method.name\">{{method.name}}</div>\n                                                                <div *ngIf=\"method.info && method.showInfo\" style=\"font-size: 13px;\"> - {{method.info}}</div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div *ngIf=\"mplMidOutcome.displayTool\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeTool(mplMidOutcome, $event, 'midoutcome')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            [value]='mplMidOutcome.tool'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\" (change)=\"changeTool(mplMidOutcome, $event, 'midoutcome')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span *ngIf=\"(!mplMidOutcome.suitable_tools || mplMidOutcome.suitable_tools.length == 0) && (!mplMidOutcome.suitable_from_tools || mplMidOutcome.suitable_from_tools.length == 0)\">Ничего не найдено</span>\n                                                                <span *ngIf=\"mplMidOutcome.suitable_tools && mplMidOutcome.suitable_tools.length > 0 || mplMidOutcome.suitable_from_tools && mplMidOutcome.suitable_from_tools.length > 0\">Выберите из списка</span></option>\n                                                                <ng-container *ngIf=\"mplMidOutcome.suitable_tools && mplMidOutcome.suitable_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_tool of mplMidOutcome.suitable_tools\" [value]=\"suitable_tool + '$$$' + 'OutcomeMethods'\">{{suitable_tool}}</option>\n                                                                </ng-container>\n                                                                <ng-container *ngIf=\"mplMidOutcome.suitable_from_tools && mplMidOutcome.suitable_from_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_from_tool of mplMidOutcome.suitable_from_tools\" [value]=\"suitable_from_tool + '$$$' + 'Tools'\">{{suitable_from_tool}}</option>\n                                                                </ng-container>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div>\n                                            <div><img src=\"/newpion/static/pionfront/assets/img/clip.png\"></div> -->\n                                            </div>\n\n                                            <div class=\"one_btn\" *ngIf=\"mplMidOutcome.displayFrequency\">\n                                                <textarea (focusout)=\"changeFrequency(mplMidOutcome, $event, 'midoutcome')\"\n                                                    rows=\"1\" placeholder=\"Введите данные\"\n                                                    value='{{mplMidOutcome.frequency}}'></textarea>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/date.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplMidOutcome.displayReporting\">\n                                                <textarea (focusout)=\"changeReporting(mplMidOutcome, $event, 'midoutcome')\"\n                                                    rows=\"1\" placeholder=\"Введите данные\"\n                                                    value='{{mplMidOutcome.reporting}}'></textarea>\n                                            </div>\n\n                                        </td>\n                                    </tr>\n                                </ng-container>\n                            </div>\n                        </tbody>\n                    </table>\n                    <div class=\"center add_tableline\">\n                        <button (click)=\"createMplMidOutcome(null, true)\" name=\"num3_table\" *ngIf=\"mplMidOutcomes && mplMidOutcomes.length > 0\"\n                            class=\"add_button\">\n                            <p>Сохранить</p>\n                        </button>\n                        <button (click)=\"addMplMidOutcome()\" name=\"num8_table\"\n                            class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                            <p>Добавить строку</p>\n                        </button>\n                        <a *ngIf=\"mplMidOutcomes && mplMidOutcomes.length > 0\" (click)=\"deleteLastMplMidOutcome($event)\"\n                            class=\"delete-mpl-line\">Удалить последнюю строку</a>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"desc_chain act_m_line op_num30\" *ngIf=\"displayPlan\">\n                <div class=\"row\">\n                    <div class=\"col-9 hintblock\">\n                        <a target=\"_blank\" href=\"{{baseUrl + 'manual/6/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                        <p>Социальные эффекты</p>\n                        <div class=\"desc_item3\">\n                            Социальные эффекты - позитивные изменения, которые ожидаются от реализации программы. Последствия для участников программы, их окружения (сообществ) или общества в целом, которые логически вытекают из среднесрочных социальных результатов.\n                        </div>\n                    </div>\n                    <div class=\"col-2\"></div>\n                    <div class=\"col-1 arrow right\">\n                        <button (click)=\"displayPlanImpact = !displayPlanImpact\" style=\"width: auto;\"\n                            class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num24\"><img\n                                src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                    </div>\n                </div>\n                <div class=\"table_chain op_num24\" *ngIf=\"displayPlanImpact && mplImpacts && programImpacts\">\n                    <table class=\"num7_table\">\n                        <app-thead-plan></app-thead-plan>\n                        <tbody>\n                            <div class=\"tbody\">\n                                <ng-container *ngFor=\"let mplImpact of mplImpacts; index as i\">\n                                    <tr class=\"block_qw\">\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayResultRef(mplImpact)\"><span\n                                                *ngIf=\"mplImpact.result_ref\">{{mplImpact.result_ref.name}}</span></td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayName(mplImpact)\">\n                                            {{mplImpact.name}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayIndicator(mplImpact)\">\n                                            {{mplImpact.indicator}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayMethod(mplImpact)\">\n                                            {{mplImpact.method}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayTool(mplImpact)\">\n                                            {{mplImpact.tool}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayFrequency(mplImpact)\">\n                                            {{mplImpact.frequency}}</td>\n                                        <td style=\"word-wrap: break-word;\" (click)=\"setDisplayReporting(mplImpact)\">\n                                            {{mplImpact.reporting}}</td>\n                                        <td>\n                                            <button class=\"add_button\" (click)=\"mplImpactDelete($event, mplImpact)\">Удалить</button>\n                                            <button class=\"add_button\" (click)=\"addMplImpact(i)\">Добавить</button>\n                                            <!-- <button class=\"add_button\" (click)=\"addMplImpact(i+1)\">Добавить строку снизу</button> -->\n                                        </td>\n                                        \n                                    </tr>\n                                    <tr class=\"block_select\">\n                                        <td style=\"word-wrap: break-word;\" colspan=\"8\">\n                                            <div *ngIf=\"mplImpact.displayResultRef\">\n                                                <select (change)=\"changeImpactRef(mplImpact, $event, 'impact')\"\n                                                    class=\"no-border\">\n                                                    <option value=\"\" disabled\n                                                        [selected]=\"outputShouldBeSelected(mplImpact, null)\"\n                                                        style='display:none;'>Выберите данные из\n                                                        списка</option>\n                                                    <option *ngFor=\"let programOutput of programImpacts\"\n                                                        [selected]=\"outputShouldBeSelected(mplImpact, programOutput)\"\n                                                        value=\"{{programOutput.id}}\">{{programOutput.name}}</option>\n                                                </select>\n                                            </div>\n\n                                            <div *ngIf=\"mplImpact.displayName\">\n                                                <textarea (focusout)=\"changeName(mplImpact, $event, 'impact')\" rows=\"1\"\n                                                    placeholder=\"Что именно вы хотите измерить?\"\n                                                    value='{{mplImpact.name}}'>{{mplImpact.Name}}</textarea>\n                                            </div>\n\n                                            <div *ngIf=\"mplImpact.displayIndicator\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeIndicator(mplImpact, $event, 'impact')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            value='{{mplImpact.indicator}}'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\"\n                                                            (change)=\"changeIndicator(mplImpact, $event, 'impact')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span\n                                                                    *ngIf=\"!mplImpact.suitable_indicators || mplImpact.suitable_indicators.length == 0\">Ничего\n                                                                    не найдено</span>\n                                                                <span\n                                                                    *ngIf=\"mplImpact.suitable_indicators && mplImpact.suitable_indicators.length > 0\">Выберите\n                                                                    из списка</span></option>\n                                                            <option\n                                                                *ngFor=\"let suitable_tool of mplImpact.suitable_indicators\"\n                                                                value=\"{{suitable_tool}}\">{{suitable_tool}}</option>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div *ngIf=\"mplImpact.displayMethod\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeMethod(mplImpact, $event, 'impact')\"\n                                                            rows=\"1\" placeholder=\"Введите данные\"\n                                                            value='{{mplImpact.method}}'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"display: none;\" class=\"js-selectNative\"\n                                                            (change)=\"changeMethod(mplImpact, $event, 'impact')\">\n                                                            <option value=\"null\" disabled selected style='display:none;'>\n                                                                Выберите из списка\n                                                            </option>\n                                                            <option *ngFor=\"let method of methods\" [value]=\"method.name\">\n                                                                {{method.name}}\n                                                            </option>\n                                                    </select>\n                                                    <div class=\"selectCustom js-selectCustom\" aria-hidden=\"true\" (click)=\"select(mplImpact)\">\n                                                        <div class=\"selectCustom-trigger\" data-value=\"null\">Выберите из списка</div>\n                                                        <div class=\"selectCustom-options\">\n                                                            <div *ngFor=\"let method of methods\" class=\"selectCustom-option\" (mouseover)=\"method.showInfo = true\" (mouseout)=\"method.showInfo = false\">\n                                                                <div [attr.data-value]=\"method.name\">{{method.name}}</div>\n                                                                <div [hidden]=\"!method.info || !method.showInfo\" style=\"font-size: 13px;\"> - {{method.info}}</div>\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <div *ngIf=\"mplImpact.displayTool\">\n                                                <div class=\"row\">\n                                                    <div class=\"border_right col-6\">\n                                                        <textarea (focusout)=\"changeTool(mplImpact, $event, 'impact')\"\n                                                            rows=\"1\" placeholder=\"Введите данные или выберите из библиотеки\"\n                                                            [value]='mplImpact.tool'></textarea>\n                                                    </div>\n                                                    <div class=\"col-6\">\n                                                        <select style=\"height: 59px;border: none;\" (change)=\"changeTool(mplImpact, $event, 'impact')\">\n                                                            <option value=\"\" disabled selected style='display:none;'>\n                                                                <span *ngIf=\"(!mplImpact.suitable_tools || mplImpact.suitable_tools.length == 0) && (!mplImpact.suitable_from_tools || mplImpact.suitable_from_tools.length == 0)\">Ничего не найдено</span>\n                                                                <span *ngIf=\"mplImpact.suitable_tools && mplImpact.suitable_tools.length > 0 || mplImpact.suitable_from_tools && mplImpact.suitable_from_tools.length > 0\">Выберите из списка</span></option>\n                                                                <ng-container *ngIf=\"mplImpact.suitable_tools && mplImpact.suitable_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_tool of mplImpact.suitable_tools\" [value]=\"suitable_tool + '$$$' + 'OutcomeMethods'\">{{suitable_tool}}</option>\n                                                                </ng-container>\n                                                                <ng-container *ngIf=\"mplImpact.suitable_from_tools && mplImpact.suitable_from_tools.length > 0\">\n                                                                    <option *ngFor=\"let suitable_from_tool of mplImpact.suitable_from_tools\" [value]=\"suitable_from_tool + '$$$' + 'Tools'\">{{suitable_from_tool}}</option>\n                                                                </ng-container>\n                                                        </select>\n                                                    </div>\n                                                </div>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/hamburger.png\"></div>\n                                            <div><img src=\"/newpion/static/pionfront/assets/img/clip.png\"></div> -->\n                                            </div>\n\n                                            <div class=\"one_btn\" *ngIf=\"mplImpact.displayFrequency\">\n                                                <textarea (focusout)=\"changeFrequency(mplImpact, $event, 'impact')\" rows=\"1\"\n                                                    placeholder=\"Введите данные\" value='{{mplImpact.frequency}}'></textarea>\n                                                <!-- <div><img src=\"/newpion/static/pionfront/assets/img/date.png\"></div> -->\n                                            </div>\n\n                                            <div *ngIf=\"mplImpact.displayReporting\">\n                                                <textarea (focusout)=\"changeReporting(mplImpact, $event, 'impact')\" rows=\"1\"\n                                                    placeholder=\"Введите данные\" value='{{mplImpact.reporting}}'></textarea>\n                                            </div>\n\n                                        </td>\n                                    </tr>\n                                </ng-container>\n                            </div>\n                        </tbody>\n                    </table>\n                    <div class=\"center add_tableline\">\n                        <button (click)=\"createMplImpact(null, true)\" name=\"num3_table\" *ngIf=\"mplImpacts && mplImpacts.length > 0\"\n                            class=\"add_button\">\n                            <p>Сохранить</p>\n                        </button>\n                        <button (click)=\"addMplImpact()\" name=\"num7_table\"\n                            class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                            <p>Добавить строку</p>\n                        </button>\n                        <a *ngIf=\"mplImpacts && mplImpacts.length > 0\" (click)=\"deleteLastMplImpact($event)\"\n                            class=\"delete-mpl-line\">Удалить последнюю строку</a></div>\n                </div>\n            </div>\n\n        </ng-container>\n\n        <!-- Рабочая форма мониторинга -->\n        <div class=\"desc_chain op_num9\" *ngIf=\"displayPlanForm\">\n            <div class=\"row\">\n                <div class=\"col-9 hintblock\">\n                    <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n                    <p>Рабочая форма мониторинга</p>\n                    <div class=\"desc_item3\">\n                        Рабочая форма мониторинга – документ, который формируется на основе разработанного плана мониторинга и предназначен для фиксации данных,  помогает оценить степень расхождения фактических значений с плановыми. \n                    </div>\n                </div>\n                <div (click)=\"downloadForm($event)\" class=\"col-2\"><button class=\"add_button save_button\"><img\n                            src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">\n                        <p>Скачать</p>\n                    </button></div>\n                <div class=\"col-1 arrow right\">\n                    <button (click)=\"displayForm = !displayForm\" style=\"width: auto;\" class=\"open_button op_btn\"\n                        sost=\"close\" openItem=\".op_num31\"><img\n                            src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"desc_chain act_m_line op_num31\" *ngIf=\"displayForm && displayPlanForm\">\n            <div class=\"row\">\n                <div class=\"col-9 hintblock\">\n                    <a target=\"_blank\" href=\"{{baseUrl + 'manual/4/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                    <p>Непосредственные результаты</p>\n                    <div class=\"desc_item3\">\n                        Измерение непосредственных результатов, как правило, осуществляется через подсчет числа проведенных мероприятий (деятельности), их участников.\n                    </div>\n                </div>\n                <div class=\"col-2\"></div>\n                <div class=\"col-1 arrow right\">\n                    <button (click)=\"displayFormOutput = !displayFormOutput\" style=\"width: auto;\"\n                        class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num23\"><img\n                            src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                </div>\n            </div>\n            <div class=\"table_chain op_num23\" *ngIf=\"displayFormOutput\">\n                <table class=\"num6_table\">\n                    <app-thead-form></app-thead-form>\n                    <tbody>\n                        <div class=\"tbody\">\n                            <tr *ngFor=\"let mflOutput of mflOutputs; index as i\">\n                                <td><textarea class=\"td-textarea-indicator\" placeholder=\"Введите данные\"\n                                        (focusout)=\"indicatorChanged(mflOutput, $event, 'output')\"\n                                        value=\"{{mflOutput.indicator}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"planChanged(mflOutput, $event, 'output')\" value=\"{{mflOutput.plan}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period1Changed(mflOutput, $event, 'output')\"\n                                        value=\"{{mflOutput.period1}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact1Changed(mflOutput, $event, 'output')\" value=\"{{mflOutput.fact1}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period2Changed(mflOutput, $event, 'output')\"\n                                        value=\"{{mflOutput.period2}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact2Changed(mflOutput, $event, 'output')\" value=\"{{mflOutput.fact2}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period3Changed(mflOutput, $event, 'output')\"\n                                        value=\"{{mflOutput.period3}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact3Changed(mflOutput, $event, 'output')\" value=\"{{mflOutput.fact3}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period4Changed(mflOutput, $event, 'output')\"\n                                        value=\"{{mflOutput.period4}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact4Changed(mflOutput, $event, 'output')\" value=\"{{mflOutput.fact4}}\">\n                                </td>\n                                <td>\n                                    <button class=\"add_button\" (click)=\"mflOutputDelete($event, mflOutput)\">Удалить</button>\n                                    <button class=\"add_button\" (click)=\"addMflOutput(i)\">Добавить</button>\n                                    <!-- <button class=\"add_button\" (click)=\"addMflOutput(i+1)\">Добавить строку снизу</button> -->\n                                </td>\n                            </tr>\n                        </div>\n                    </tbody>\n                </table>\n                <div class=\"center add_tableline\">\n                    <button (click)=\"createMflOutput()\" name=\"num3_table\" *ngIf=\"mflOutputs && mflOutputs.length > 0\"\n                        class=\"add_button\">\n                        <p>Сохранить</p>\n                    </button>\n                    <button (click)=\"addMflOutput(mflOutputs.length)\" name=\"num6_table\"\n                    class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                    <p>Добавить строку</p>\n                </button>\n                <a *ngIf=\"mflOutputs && mflOutputs.length > 0\"\n                    (click)=\"mflOutputDelete($event)\" class=\"delete-mpl-line\">Удалить последнюю\n                    строку</a>\n            </div>\n            </div>\n        </div>\n\n        <div class=\"desc_chain act_m_line op_num31\" *ngIf=\"displayForm && displayPlanForm\">\n            <div class=\"row\">\n                <div class=\"col-9 hintblock\">\n                    <a target=\"_blank\" href=\"{{baseUrl + 'manual/5/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                    <p>Краткосрочные социальные результаты</p>\n                    <div class=\"desc_item3\">\n                        Краткосрочные социальные результаты – это изменения в жизни участников программы, которые логически и непосредственно вытекают из деятельности по программе. \n                    </div>\n                </div>\n                <div class=\"col-2\"></div>\n                <div class=\"col-1 arrow right\">\n                    <button (click)=\"displayFormShortOutcome = !displayFormShortOutcome\" style=\"width: auto;\"\n                        class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num8\"><img\n                            src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                </div>\n            </div>\n            <div class=\"table_chain op_num8\" *ngIf=\"displayFormShortOutcome\">\n                <table class=\"num5_table\">\n                    <app-thead-form></app-thead-form>\n                    <tbody>\n                        <div class=\"tbody\">\n                            <tr *ngFor=\"let mflShortOutcome of mflShortOutcomes; index as i\" class=\"block_qw\">\n                                <td><textarea class=\"td-textarea-indicator\" placeholder=\"Введите данные\"\n                                        (focusout)=\"indicatorChanged(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.indicator}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"planChanged(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.plan}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period1Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.period1}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact1Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.fact1}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period2Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.period2}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact2Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.fact2}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period3Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.period3}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact3Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.fact3}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period4Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.period4}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact4Changed(mflShortOutcome, $event, 'shortoutcome')\"\n                                        value=\"{{mflShortOutcome.fact4}}\">\n                                </td>\n                                <td>\n                                    <button class=\"add_button\" (click)=\"mflShortOutcomeDelete($event, mflShortOutcome)\">Удалить</button>\n                                    <button class=\"add_button\" (click)=\"addMflShortOutcome(i)\">Добавить</button>\n                                    <!-- <button class=\"add_button\" (click)=\"addMflShortOutcome(i+1)\">Добавить строку снизу</button> -->\n                                </td>\n                            </tr>\n                        </div>\n                    </tbody>\n                </table>\n                <div class=\"center add_tableline\">\n                    <button (click)=\"createMflShortOutcome()\" name=\"num3_table\" *ngIf=\"mflShortOutcomes && mflShortOutcomes.length > 0\"\n                        class=\"add_button\">\n                        <p>Сохранить</p>\n                    </button>\n                    <button (click)=\"addMflShortOutcome(mflShortOutcomes.length)\" name=\"num5_table\"\n                        class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                        <p>Добавить строку</p>\n                    </button>\n                    <a *ngIf=\"mflShortOutcomes && mflShortOutcomes.length > 0\"\n                        (click)=\"mflShortOutcomeDelete($event)\" class=\"delete-mpl-line\">Удалить последнюю\n                        строку</a>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"desc_chain act_m_line op_num31\" *ngIf=\"displayForm && displayPlanForm\">\n            <div class=\"row\">\n                <div class=\"col-9 hintblock\">\n                    <a target=\"_blank\" href=\"{{baseUrl + 'manual/5/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                    <p>Среднесрочные социальные результаты</p>\n                    <div class=\"desc_item3\">\n                        Среднесрочные социальные результаты – это последствия для участников программы, которые непосредственно и логически возникают после достижения краткосрочных социальных результатов программы.\n                    </div>\n                </div>\n                <div class=\"col-2\"></div>\n                <div class=\"col-1 arrow right\">\n                    <button (click)=\"displayFormMidOutcome = !displayFormMidOutcome\" style=\"width: auto;\"\n                        class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num21\"><img\n                            src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\"></button>\n                </div>\n            </div>\n            <div class=\"table_chain op_num21\" *ngIf=\"displayFormMidOutcome\">\n                <table class=\"num4_table\">\n                    <app-thead-form></app-thead-form>\n                    <tbody>\n                        <div class=\"tbody\">\n                            <tr *ngFor=\"let mflMidOutcome of mflMidOutcomes; index as i\">\n                                <td><textarea class=\"td-textarea-indicator\" placeholder=\"Введите данные\"\n                                        (focusout)=\"indicatorChanged(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.indicator}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"planChanged(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.plan}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period1Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.period1}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact1Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.fact1}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period2Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.period2}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact2Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.fact2}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period3Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.period3}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact3Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.fact3}}\"></td>\n                                <td><textarea placeholder=\"дата\"\n                                        (focusout)=\"period4Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.period4}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact4Changed(mflMidOutcome, $event, 'midoutcome')\"\n                                        value=\"{{mflMidOutcome.fact4}}\">\n                                </td>\n                                <td>\n                                    <button class=\"add_button\" (click)=\"mflMidOutcomeDelete($event, mflMidOutcome)\">Удалить</button>\n                                    <button class=\"add_button\" (click)=\"addMflMidOutcome(i)\">Добавить</button>\n                                    <!-- <button class=\"add_button\" (click)=\"addMflMidOutcome(i+1)\">Добавить строку снизу</button> -->\n                                </td>\n                            </tr>\n                        </div>\n                    </tbody>\n                </table>\n                <div class=\"center add_tableline\">\n                    <button (click)=\"createMflMidOutcome()\" name=\"num3_table\" *ngIf=\"mflMidOutcomes && mflMidOutcomes.length > 0\"\n                        class=\"add_button\">\n                        <p>Сохранить</p>\n                    </button>\n                    <button (click)=\"addMflMidOutcome(mflMidOutcomes.length)\" name=\"num4_table\"\n                        class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                        <p>Добавить строку</p>\n                    </button>\n                    <a *ngIf=\"mflMidOutcomes && mflMidOutcomes.length > 0\"\n                        (click)=\"mflMidOutcomeDelete($event)\" class=\"delete-mpl-line\">Удалить последнюю\n                        строку</a>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"desc_chain act_m_line op_num31\" *ngIf=\"displayForm && displayPlanForm\">\n            <div class=\"row\">\n                <div class=\"col-9 hintblock\">\n                    <a target=\"_blank\" href=\"{{baseUrl + 'manual/6/'}}\"><img src=\"/newpion/static/pionfront/assets/img/book.png\"></a>\n                    <p>Социальные эффекты</p>\n                    <div class=\"desc_item3\">\n                        Социальные эффекты - позитивные изменения, которые ожидаются от реализации программы. Последствия для участников программы, их окружения (сообществ) или общества в целом, которые логически вытекают из среднесрочных социальных результатов.\n                    </div>\n                </div>\n                <div class=\"col-2\"></div>\n                <div class=\"col-1 arrow right\">\n                    <button (click)=\"displayFormImpact = !displayFormImpact\" style=\"width: auto;\"\n                        class=\"open_button op_btn\" sost=\"close\" openItem=\".op_num22\">\n                        <img src=\"/newpion/static/pionfront/assets/img/arrow_blue_bottom.png\">\n                    </button>\n                </div>\n            </div>\n            <div class=\"table_chain op_num22\" *ngIf=\"displayFormImpact\">\n                <table class=\"num3_table\">\n                    <app-thead-form></app-thead-form>\n                    <tbody>\n                        <div class=\"tbody\">\n                            <tr *ngFor=\"let mflImpact of mflImpacts; index as i\">\n                                <td><textarea class=\"td-textarea-indicator\" placeholder=\"Введите данные\"\n                                        (focusout)=\"indicatorChanged(mflImpact, $event, 'impact')\"\n                                        value=\"{{mflImpact.indicator}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"planChanged(mflImpact, $event, 'impact')\" value=\"{{mflImpact.plan}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period1Changed(mflImpact, $event, 'impact')\"\n                                        value=\"{{mflImpact.period1}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact1Changed(mflImpact, $event, 'impact')\" value=\"{{mflImpact.fact1}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period2Changed(mflImpact, $event, 'impact')\"\n                                        value=\"{{mflImpact.period2}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact2Changed(mflImpact, $event, 'impact')\" value=\"{{mflImpact.fact2}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period3Changed(mflImpact, $event, 'impact')\"\n                                        value=\"{{mflImpact.period3}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact3Changed(mflImpact, $event, 'impact')\" value=\"{{mflImpact.fact3}}\">\n                                </td>\n                                <td><textarea placeholder=\"дата\" (focusout)=\"period4Changed(mflImpact, $event, 'impact')\"\n                                        value=\"{{mflImpact.period4}}\"></textarea></td>\n                                <td><input type=\"number\" name=\"\" placeholder=\"- %\"\n                                        (focusout)=\"fact4Changed(mflImpact, $event, 'impact')\" value=\"{{mflImpact.fact4}}\">\n                                </td>\n                                <td>\n                                    <button class=\"add_button\" (click)=\"mflImpactDelete($event, mflImpact)\">Удалить</button>\n                                    <button class=\"add_button\" (click)=\"addMflImpact(i)\">Добавить</button>\n                                    <!-- <button class=\"add_button\" (click)=\"addMflImpact(i+1)\">Добавить строку снизу</button> -->\n                                </td>\n                            </tr>\n                        </div>\n                    </tbody>\n                </table>\n                <div class=\"center add_tableline\">\n                    <button (click)=\"createMflImpact()\" name=\"num3_table\" *ngIf=\"mflImpacts && mflImpacts.length > 0\"\n                        class=\"add_button\">\n                        <p>Сохранить</p>\n                    </button>\n                    <button (click)=\"addMflImpact(mflImpacts.length)\" name=\"num3_table\"\n                        class=\"add_button\"><img src=\"/newpion/static/pionfront/assets/img/plus_orange.png\">\n                        <p>Добавить строку</p>\n                    </button>\n                    <a *ngIf=\"mflImpacts && mflImpacts.length > 0\"\n                        (click)=\"mflImpactDelete($event)\" class=\"delete-mpl-line\">Удалить последнюю\n                        строку</a>\n                </div>\n            </div>\n        </div>\n        <!-- Рабочая форма мониторинга конец -->\n\n\n\n    </div>\n</section>\n\n\n\n<div class=\"popap_download dark_block blue_head\" *ngIf=\"displayDownloader\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\"><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Продукты для скачивания</p>\n        </div>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img1.png\">\n            <p>Цепочка социальных результатов (таблица)</p>\n        </div>\n        <!-- <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img2.png\">\n            <p>Цепочка социальных результатов (схема)</p>\n        </div> -->\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img3.png\">\n            <p>План мониторинга</p>\n        </div>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/ower_img4.png\">\n            <p>Рабочая форма мониторинга</p>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_Direct dark_block blue_head\" *ngIf=\"showProgramOutputAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeProgramOutputAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\"><span *ngIf=\"!editingProgramOutput\">Добавить</span><span\n                    *ngIf=\"editingProgramOutput\">Изменить</span> непосредственный результат</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"programOutputAddForm\" (ngSubmit)=\"onProgramOutputAdd()\">\n                <p class=\"line_descSel\">Выбрать активность:</p>\n                <select formControlName=\"activity_ref\" class=\"select-styling\">\n                    <option value=\"\" [selected]=\"!editingProgramOutput || !editingProgramOutput.activity_ref\">Выберите\n                        из списка</option>\n                    <option *ngFor=\"let activity of activities\" value=\"{{activity.id}}\"\n                        [selected]=\"editingProgramOutput && editingProgramOutput.activity_ref && editingProgramOutput.activity_ref.id == activity.id\">\n                        {{activity.name}}</option>\n                </select>\n                <p class=\"line_descSel\">Формулировка:</p>\n                <input type=\"text\" formControlName=\"name\">\n                <p class=\"line_descSel\">Описание:</p>\n                <textarea formControlName=\"info\" class=\"assumption-context-textarea\"></textarea>\n                <button type=\"submit\" style=\"width: auto;\" class=\"add_button\"><span\n                        *ngIf=\"!editingProgramOutput\">Добавить</span><span\n                        *ngIf=\"editingProgramOutput\">Изменить</span></button>\n                <br><a class=\"del-but\" href=\"\" *ngIf=\"editingProgramOutput\"\n                    (click)=\"deleteOutput(editingProgramOutput, $event)\">Удалить</a>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_ShortRez dark_block blue_head\" *ngIf=\"showShortProgramOutcomeAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeShortProgramOutcomeAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\"><span *ngIf=\"!editingShortProgramOutcome\">Добавить</span><span\n                    *ngIf=\"editingShortProgramOutcome\">Изменить</span> краткосрочный социальный результат</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"programShortOutcomeAddForm\" (ngSubmit)=\"onProgramShortOutcomeAdd()\">\n                <p class=\"line_descSel\">Выбрать непосредственный результат:</p>\n                <select formControlName=\"program_output_ref\" class=\"select-styling\" disabled>\n                    <option value=\"\"\n                        [selected]=\"!editingShortProgramOutcome || !editingShortProgramOutcome.program_output_ref\">\n                        Выберите из списка</option>\n                    <option *ngFor=\"let programOutput of programOutputs\" value=\"{{programOutput.id}}\"\n                        [selected]=\"editingShortProgramOutcome && editingShortProgramOutcome.program_output_ref && (editingShortProgramOutcome.program_output_ref == programOutput.id || editingShortProgramOutcome.program_output_ref.id == programOutput.id)\">\n                        {{programOutput.name}}</option>\n                </select>\n\n                <label class=\"checker-inbox container_checked\" *ngFor=\"let programOutput of programOutputs\">{{programOutput.name}}\n                    <input [checked]=\"programOutputShouldBeChecked(programOutput)\" type=\"checkbox\" value=\"{{programOutput.id}}\"\n                        (change)=\"onCheckChange('program_output_many_refs', $event)\">\n                    <span class=\"checkmark\"></span>\n                </label>\n\n                <div (click)='goToLibrary(\"program-short-outcomes\")' class=\"add_toLib\">\n                    <img src=\"/newpion/static/pionfront/assets/img/hamburger.png\">\n                    <p>Выбрать результаты из библиотеки</p>\n                </div>\n                <p class=\"line_descSel\">Формулировка:</p>\n                <input type=\"text\" formControlName=\"name\">\n                <p class=\"line_descSel\">Описание:</p>\n                <textarea formControlName=\"info\" class=\"assumption-context-textarea\"></textarea>\n                <button type=\"submit\" style=\"width: auto;\" class=\"add_button\"><span\n                        *ngIf=\"!editingShortProgramOutcome\">Добавить</span><span\n                        *ngIf=\"editingShortProgramOutcome\">Изменить</span></button>\n                <br><a class=\"del-but\" href=\"\" *ngIf=\"editingShortProgramOutcome\"\n                    (click)=\"deleteShortOutcome(editingShortProgramOutcome, $event)\">Удалить</a>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_MidRez dark_block blue_head\" *ngIf=\"showTargetDescription\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeTargetDescription()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\"><span *ngIf=\"!editingTargetDescription\">Добавить</span><span\n                    *ngIf=\"editingTargetDescription\">Изменить</span> описание целевой группы</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"targetDescriptionAddForm\" (ngSubmit)=\"onTargetDescriptionAdd()\">\n                <p class=\"line_descSel\">Формулировка:</p>\n                <input type=\"text\" value=\"{{editingTargetDescriptionSubject.name}}\" disabled>\n                <input type=\"hidden\" formControlName=\"target_ref\">\n                <p class=\"line_descSel\">Описание:</p>\n                <textarea formControlName=\"info\" class=\"assumption-context-textarea\"></textarea>\n                <button style=\"width: auto;\" class=\"add_button\"><span\n                        *ngIf=\"!editingTargetDescription\">Добавить</span><span\n                        *ngIf=\"editingTargetDescription\">Изменить</span></button>\n                <br><a class=\"del-but\" href=\"\" *ngIf=\"editingTargetDescription\"\n                    (click)=\"deleteTargetDescription(editingTargetDescription, $event)\">Удалить</a>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_MidRez dark_block blue_head\" *ngIf=\"showMidProgramOutcomeAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeMidProgramOutcomeAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\"><span *ngIf=\"!editingMidProgramOutcome\">Добавить</span><span\n                    *ngIf=\"editingMidProgramOutcome\">Изменить</span> среднесрочный социальный результат</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"programMidOutcomeAddForm\" (ngSubmit)=\"onProgramMidOutcomeAdd()\">\n                <p class=\"line_descSel\">Выбрать краткосрочный социальный результат:</p>\n\n                <select formControlName=\"program_short_outcome_ref\" class=\"select-styling\" disabled>\n                    <option value=\"\"\n                        [selected]=\"!editingMidProgramOutcome || !editingMidProgramOutcome.program_short_outcome_ref\">\n                        Выберите из списка</option>\n                    <option *ngFor=\"let programShortOutcome of programShortOutcomes\" value=\"{{programShortOutcome.id}}\"\n                        [selected]=\"editingMidProgramOutcome && editingMidProgramOutcome.program_short_outcome_ref && editingMidProgramOutcome.program_short_outcome_ref.id == programShortOutcome.id\">\n                        {{programShortOutcome.name}}</option>\n                </select>\n\n                <label class=\"checker-inbox container_checked\" *ngFor=\"let programShortOutcome of programShortOutcomes\">{{programShortOutcome.name}}\n                    <input [checked]=\"programShortOutcomeShouldBeChecked(programShortOutcome)\" type=\"checkbox\" value=\"{{programShortOutcome.id}}\"\n                        (change)=\"onCheckChange('program_short_outcome_many_refs', $event)\">\n                    <span class=\"checkmark\"></span>\n                </label>\n\n                <div (click)='goToLibrary(\"program-mid-outcomes\")' class=\"add_toLib\">\n                    <img src=\"/newpion/static/pionfront/assets/img/hamburger.png\">\n                    <p>Выбрать результаты из библиотеки</p>\n                </div>\n                <p class=\"line_descSel\">Формулировка:</p>\n                <input type=\"text\" formControlName=\"name\">\n                <p class=\"line_descSel\">Описание:</p>\n                <textarea formControlName=\"info\" class=\"assumption-context-textarea\"></textarea>\n                <button style=\"width: auto;\" class=\"add_button\"><span\n                        *ngIf=\"!editingMidProgramOutcome\">Добавить</span><span\n                        *ngIf=\"editingMidProgramOutcome\">Изменить</span></button>\n                <br><a class=\"del-but\" href=\"\" *ngIf=\"editingMidProgramOutcome\"\n                    (click)=\"deleteMidOutcome(editingMidProgramOutcome, $event)\">Удалить</a>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_FinEffect dark_block blue_head\" *ngIf=\"showProgramImpactAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeProgramImpactAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\"><span *ngIf=\"!editingProgramImpact\">Добавить</span><span\n                    *ngIf=\"editingProgramImpact\">Изменить</span> социальный эффект</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"programImpactAddForm\" (ngSubmit)=\"onProgramImpactAdd()\">\n                <p class=\"line_descSel\">Выбрать среднесрочный социальный результат:</p>\n\n                <select formControlName=\"program_mid_outcome_ref\" class=\"select-styling\">\n                    <option value=\"\" [selected]=\"!editingProgramImpact || editingProgramImpact.program_mid_outcome_ref\">\n                        Выберите из списка</option>\n                    <option *ngFor=\"let programMidOutcome of programMidOutcomes\" value=\"{{programMidOutcome.id}}\"\n                        [selected]=\"editingProgramImpact && editingProgramImpact.program_mid_outcome_ref && editingProgramImpact.program_mid_outcome_ref.id == programMidOutcome.id\">\n                        {{programMidOutcome.name}}</option>\n                </select>\n\n                <label class=\"checker-inbox container_checked\" *ngFor=\"let programMidOutcome of programMidOutcomes\">{{programMidOutcome.name}}\n                    <input [checked]=\"programMidOutcomeShouldBeChecked(programMidOutcome)\" type=\"checkbox\" value=\"{{programMidOutcome.id}}\"\n                        (change)=\"onCheckChange('program_mid_outcome_many_refs', $event)\">\n                    <span class=\"checkmark\"></span>\n                </label>\n\n                <div (click)='goToLibrary(\"program-impacts\")' class=\"add_toLib\">\n                    <img src=\"/newpion/static/pionfront/assets/img/hamburger.png\">\n                    <p>Выбрать результаты из библиотеки</p>\n                </div>\n                <p class=\"line_descSel\">Формулировка:</p>\n                <input type=\"text\" formControlName=\"name\">\n                <p class=\"line_descSel\">Описание:</p>\n                <textarea formControlName=\"info\" class=\"assumption-context-textarea\"></textarea>\n                <button type=\"submit\" style=\"width: auto;\" class=\"add_button\"><span\n                        *ngIf=\"!editingProgramImpact\">Добавить</span><span\n                        *ngIf=\"editingProgramImpact\">Изменить</span></button>\n                <br><a class=\"del-but\" href=\"\" *ngIf=\"editingProgramImpact\"\n                    (click)=\"deleteImpact(editingProgramImpact, $event)\">Удалить</a>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_TargetActive dark_block blue_head\" *ngIf=\"showActivityAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeActivityAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\"><span *ngIf=\"!editingActivity\">Добавить</span><span\n                    *ngIf=\"editingActivity\">Изменить</span> активности</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"activityAddForm\" (ngSubmit)=\"onActivityAdd()\">\n                <p class=\"line_descSel\">Выберите целевую группу:</p>\n                <select formControlName=\"target_ref\" class=\"select-styling\">\n                    <option value=\"\"\n                        [selected]=\"!editingActivity || editingActivity.target_ref == null || editingActivity.target_ref == undefined\">\n                        Выберите из списка</option>\n                    <option *ngFor=\"let target of program.target_refs\" value=\"{{target.id}}\"\n                        [selected]=\"editingActivity && editingActivity.target_ref && (editingActivity.target_ref == target.id || editingActivity.target_ref.id == target.id)\">\n                        {{target.name}}</option>\n                </select>\n                <p class=\"line_descSel\">Название:</p>\n                <input type=\"text\" formControlName=\"name\">\n                <p class=\"line_descSel\">Описание:</p>\n                <textarea formControlName=\"info\" class=\"assumption-context-textarea\"></textarea>\n                <button type=\"submit\" style=\"width: auto;\" class=\"add_button\"><span\n                        *ngIf=\"!editingActivity\">Добавить</span><span *ngIf=\"editingActivity\">Изменить</span></button>\n                <br><a class=\"del-but\" href=\"\" *ngIf=\"editingActivity\"\n                    (click)=\"deleteActivity(editingActivity, $event)\">Удалить</a>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"showAssumptionAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeAssumptionAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Добавить предположение</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"assumptionAddForm\" (ngSubmit)=\"onAssumptionAdd()\">\n                <textarea formControlName=\"text\" class=\"assumption-context-textarea\"></textarea>\n                <button style=\"width: auto;\" class=\"add_button\">Добавить</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_pr dark_block blue_head\" *ngIf=\"showContextAdd\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeContextAdd()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Добавить контексты</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"contextAddForm\" (ngSubmit)=\"onContextAdd()\">\n                <textarea formControlName=\"text\" class=\"assumption-context-textarea\"></textarea>\n                <button style=\"width: auto;\" class=\"add_button\">Добавить</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<!-- <div class=\"popap_accessadd dark_block\" style=\"display: none;\">\n    <div>\n        <p class=\"close_btn\"><img src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>«Включить в личную библиотеку социальных результатов?</p>\n            <button style=\"width: auto;\" class=\"add_button\">Включить</button>\n        </div>\n    </div>\n</div> -->\n<ng-template appRef></ng-template>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-thead-form',\n  templateUrl: './thead-form.component.html',\n  styleUrls: ['./thead-form.component.scss', './../program.component.scss']\n})\nexport class TheadFormComponent {\n\n}\n","<thead>\n    <tr>\n        <td>Показатель</td>\n        <td>Плановое значение</td>\n        <td>Период сбора (1)</td>\n        <td>Фактическое значение (1)</td>\n        <td>Период сбора (2)</td>\n        <td>Фактическое значение (2)</td>\n        <td>Период сбора (3)</td>\n        <td>Фактическое значение (3)</td>\n        <td>Период сбора (4)</td>\n        <td>Фактическое значение (4)</td>\n        <td>Действия</td>\n    </tr>\n</thead>\n","import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-thead-plan',\n  templateUrl: './thead-plan.component.html',\n  styleUrls: ['./thead-plan.component.scss', './../program.component.scss']\n})\nexport class TheadPlanComponent  {\n\n\n}\n","<thead>\n    <tr>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Результат</p>\n            <div class=\"desc_item3\">\n                Выберите результат из списка. В план мониторинга могут быть включены результаты, имеющиеся в цепочке социальных результатов. Не нашли нужный результат, добавьте его в цепочку социальных результатов.  \n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Вопрос</p>\n            <div class=\"desc_item3\">\n                Сформулируйте оценочный вопрос о том, что именно необходимо узнать для оценки достижения результата.\n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Показатель</p>\n            <div class=\"desc_item3\">\n                Начните формулировать показатель со слов «Число», «Количество»,  «Доля» и продолжите, опираясь на оценочный вопрос.\n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Метод</p>\n            <div class=\"desc_item3\">\n                Выберите метод из списка. В данном пункте указывается именно метод, не инструмент.\n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Инструмент</p>\n            <div class=\"desc_item3\">\n                Выберите инструмент из списка. Если не нашли подходящий, напишите название своего. Добавьте инструмент в личную библиотеку инструментов. \n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Частота сбора</p>\n            <div class=\"desc_item3\">\n                Укажите, как часто необходимо собирать данные.  Например, еженедельно/ежемесячно/ежегодно.  Или - при входе и выходе из программы. Или - на первом и последнем занятии. \n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <img src=\"/newpion/static/pionfront/assets/img/book.png\">\n            <p>Отчетность и использование</p>\n            <div class=\"desc_item3\">\n                Укажите, в каких отчетах и в каких целях будет использованы данные подсчета показателя.\n            </div>\n        </td>\n        <td class=\"hintblock relative\">\n            <p>Действия</p>\n        </td>\n    </tr>\n</thead>\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { TransportService } from '../services/transport.service';\nimport { Router } from '@angular/router';\nimport { Program } from '../models/program';\nimport { UserRequest } from '../models/userrequest';\nimport { User } from '../models/user';\n\n@Component({\n  selector: 'app-programs-monitor',\n  templateUrl: './programs-monitor.component.html',\n  styleUrls: ['./programs-monitor.component.scss']\n})\nexport class ProgramsMonitorComponent implements OnInit {\n\n  constructor(public fb: FormBuilder,\n    public transport: TransportService,\n    public router: Router) { }\n\n  toLoad: number = 2;\n  programs: Program[];\n  userRequests: UserRequest[];\n\n  ngOnInit(): void {\n    this.transport.get(\"programs/\").then((programsData) => {\n      this.programs = programsData.results;\n\n      this.toLoad -= 1;\n    });\n    this.transport.get(\"user-requests/\").then((userRequestsData) => {\n      this.userRequests = userRequestsData.results;\n      this.toLoad -= 1;\n    });\n  }\n\n  programsForUser(user_ref: User) {\n    return this.programs.filter(el => el.user_ref && el.user_ref.id == user_ref.id);\n  }\n\n}\n","<section class=\"block_form\">\n    <div>\n        <div class=\"row head_result\">\n            <div class=\"col-4 blue_item\">\n                <h1>Панель мониторинга программ</h1>\n            </div>\n        </div>\n        <div class=\"container\">\n            <div class=\"row user-row\" *ngFor=\"let userRequest of userRequests\">\n                <div class=\"col-5 border-right\" [class]=\"{'disabled': !userRequest.user_ref}\">{{userRequest.lastname}} {{userRequest.firstname}} {{userRequest.middlename}} ({{userRequest.organization}})</div>\n                <div class=\"col-7\">\n                    <ul *ngIf=\"userRequest.user_ref\">\n                        <li *ngFor=\"let programForUser of programsForUser(userRequest.user_ref)\"><a [routerLink]=\"['/program', programForUser.id]\">{{programForUser.name}}</a></li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>","<section class=\"block_form \" *ngIf=\"toLoad <= 0\">\n    <div>\n        <div class=\"row head_result\">\n            <div class=\"col-4 blue_item\"><h1>ОТЧЁТ ОБ ОЦЕНКЕ</h1></div>\n            <div class=\"col-4 back_btn\"><a class=\"cursor_pointer\" (click)=\"goBack($event)\">Назад</a></div>\n        </div>\n        <div class=\"content_block\">\n            <div class=\"row\">\n                <div class=\"col-5 border_right\">\n                    <h3 class=\"marg_h_top\">Вид оценки:</h3>\n                    <p *ngFor=\"let et of evaluationTypes\" class=\"line_include\" [ngClass]=\"{'check': et.current}\"><span>{{et.name}}</span></p>\n\n                    <h3 class=\"marg_h_top\">Метод:</h3>\n                    <ng-container *ngFor=\"let method of methods\" >\n                        <p class=\"line_include\" [ngClass]=\"{'check': method.checked}\" *ngIf=\"!method.parent_ref\">\n                            <span>{{method.name}}</span>\n                        </p>\n                        <div *ngFor=\"let child of methods\" style=\"padding-left: 3rem;\" >\n                            <p class=\"line_include\" [ngClass]=\"{'check': child.checked}\" *ngIf=\"child.parent_ref == method.id && !method.parent_ref\">\n                                <span>{{child.name}}</span>\n                            </p>\n                        </div>\n                    </ng-container>\n\n                    <h3 class=\"marg_h_top\">Метод анализа данных:</h3>\n                    <p *ngFor=\"let el of analysisMethods\" class=\"line_include\" [ngClass]=\"{'check': el.current}\"><span>{{el.name}}</span></p>\n\n                    <h3 class=\"marg_h_top\">Вид представления данных в отчете:</h3>\n                    <p *ngFor=\"let el of representationMethods\" class=\"line_include\" [ngClass]=\"{'check': el.current}\"><span>{{el.name}}</span></p>\n\n\n                </div>\n                <div class=\"col-7\">\n                    <h3 class=\"marg_h_top uppercase\">Тип оценки</h3> \n                        <p>{{report.type}}</p>\n\n                    <h3 class=\"marg_h_top uppercase\">Ключевые вопросы оценки</h3> \n                        <p>{{report.key_questions}}</p>\n\n                    <h3 class=\"marg_h_top uppercase\">Социальные результаты</h3> \n                        <p *ngFor=\"let outcome of report.outcome_refs\" class=\"arrow_right\"><a [routerLink]=\"['/result', outcome.id]\">{{outcome.name}}</a></p>\n\n                    <h3 class=\"marg_h_top uppercase\">Другие результаты, включенные в оценку</h3> \n                        <p>{{report.other_results}}</p>\n\n                    <button *ngIf=\"report.evaluation_file && authenticated\" class=\"add_button\" (click)=\"downloadFile()\">Скачать отчёт</button> \n                    <button *ngIf=\"authenticated && report.case_ref.createdby.id == transport.user.id\" class=\"add_button\" (click)=\"editReport($event)\">Редактировать отчёт</button> \n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n\n<div class=\"popap_kontst dark_block blue_head big_form\" *ngIf=\"formPage == 1\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">Редактирование отчёта об оценке</p>\n        </div>\n        <div class=\"text_block\">\n            <form [formGroup]=\"editReportForm\">\n                <p class=\"line_descSel\">Название кейса:</p>\n                <br><span class=\"font_500\">\n                    {{report.case_ref.name}}\n                </span>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Оценка внешняя или внутренняя <span>(1)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <select class=\"big_sellect\" formControlName=\"type\"> \n                    <option value=\"\" disabled>Выберите</option>\n                    <option value=\"Внешняя\">Внешняя</option>\n                    <option value=\"Внутренняя\">Внутренняя</option>\n                </select>\n              \n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Вид оценки <span>(2)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <select class=\"big_sellect\" formControlName=\"evaluation_type_ref\" (change)=\"changeEvType()\"> \n                    <option value=\"\" disabled>Выберите вид оценки</option>\n                    <option *ngFor=\"let et of evaluationTypes\" [value]=\"et.id\">{{et.name}}</option>\n                </select>\n                <ng-container *ngIf=\"otherEvType\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_evaluation_type\"></textarea>\n                </ng-container>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Ключевые вопросы оценки <span>(3)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <textarea class=\"text_item\" formControlName=\"key_questions\"></textarea>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Социальный результат <span>(4)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"outcome_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let outcome of outcomes; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{outcome.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                \n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Другие результаты <span>(5)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <textarea class=\"text_item\" formControlName=\"other_results\"></textarea>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Методы <span>(6)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\">\n                    <div class=\"row\" formArrayName=\"method_refs\" style=\"text-align: left;\">\n                        <div class=\"col-12\">\n                            <ng-container *ngFor=\"let method of methods; index as i\"> \n                                <label class=\"container_checked\" style=\"text-align: left;\" *ngIf=\"!method.parent_ref\">\n                                    {{method.name}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\" (change)=\"changeMethod()\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"editReportForm.value.method_refs[i] && !methods[i].parent_ref\">\n                                    <div *ngFor=\"let child of methods; index as j\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == methods[i].id\">\n                                            <label class=\"container_checked\" style=\"text-align: left;\">\n                                                {{child.name}}\n                                                <input type=\"checkbox\" [formControlName]=\"j\" (change)=\"changeMethod()\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"otherMethod\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_method\"></textarea>\n                </ng-container>\n\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Метод анализа данных <span>(7)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"analysis_method_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let am of analysisMethods; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{am.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\" (change)=\"changeAnMethod()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"otherAnMethod\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_analysis_method\"></textarea>\n                </ng-container>\n\n                <div class=\"item_wDesc\">\n                    <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Вид представления данных в отчете <span>(8)</span>:</p>\n                    <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                </div>\n                <div class=\"check_block\" style=\"text-align: left;\">\n                    <div class=\"row\" formArrayName=\"representation_method_refs\">\n                        <div class=\"col-md-12\">\n                            <label *ngFor=\"let rm of representationMethods; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                {{rm.name}}\n                                <input type=\"checkbox\" [formControlName]=\"i\" (change)=\"changeRepMethod()\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </div>\n                    </div>\n                </div>\n                <ng-container *ngIf=\"otherRepMethod\">\n                    <p class=\"line_descSel\">Укажите другое:</p>\n                    <textarea class=\"text_item\" formControlName=\"other_representation_method\"></textarea>\n                </ng-container>\n\n                <div class=\"row class_btns\">\n                    <div class=\"col-12\">\n                        <input type=\"file\" style=\"display: none;\" #file_rep (change)=\"repFileUpload($event)\">\n                        <button (click)=\"triggerRepFile()\" class=\"center\"\n                        [ngClass]=\"{'selected_file': repFile || report.evaluation_file, 'no_file': !repFile && !report.evaluation_file}\"\n                        >Загрузить отчёт </button>\n                    </div>\n                </div>\n\n                <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"methodsSubmit($event)\" [disabled]=\"editReportForm.disabled || editReportForm.invalid\">Сохранить</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormArray, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AnalysisMethod } from '../models/analysismethod';\nimport { EvaluationReport } from '../models/evaluationreport';\nimport { EvaluationType } from '../models/evaluationtype';\nimport { Method } from '../models/method';\nimport { Outcome } from '../models/outcome';\nimport { RepresentationMethod } from '../models/representationmethod';\nimport { TransportService } from '../services/transport.service';\n\n@Component({\n  selector: 'app-report',\n  templateUrl: './report.component.html',\n  styleUrls: ['./report.component.scss']\n})\nexport class ReportComponent implements OnInit {\n\n  id: string;\n  case: string\n  report: EvaluationReport\n  authenticated: boolean = false;\n  toLoad = 5\n  evaluationTypes: EvaluationType[]\n  methods: Method[]\n  analysisMethods: AnalysisMethod[]\n  representationMethods: RepresentationMethod[]\n  editReportForm: FormGroup\n  outcomes: Outcome[]\n  formPage = 0\n\n  otherRepMethod: boolean\n  otherAnMethod: boolean\n  otherMethod: boolean\n  otherEvType: boolean\n  newParentRef: number\n  repFile: File\n\n  @ViewChild('file_rep') file_rep\n\n  constructor(private activateRoute: ActivatedRoute,\n    public transport: TransportService,\n    public router: Router) {\n    this.id = this.activateRoute.snapshot.params['id'];\n    this.activateRoute.queryParams.subscribe(\n      params => this.case = params['case'])\n  }\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n    if (!this.id) this.router.navigate(['cases']) \n\n    this.transport.get(\"outcomes/\", !this.authenticated).then((data) => {\n      this.outcomes = data.results;    \n    })\n\n    this.transport.get(\"evaluation-reports/\"+this.id+'/', !this.authenticated).then(report => {\n      this.report = report\n      this.toLoad -= 1\n\n      this.load()\n    }).catch(e => {\n      console.log(e)\n      this.router.navigate(['/cases']) \n    })\n  }\n\n  load() {\n    this.transport.get(\"analysis-methods/\", !this.authenticated).then((data) => {\n      this.analysisMethods = data.results;\n      for (let am of this.report.analysis_method_refs) {\n        if (!this.analysisMethods.find(el => am.id == el.id)) this.analysisMethods.push(am)\n      }\n      for (var element in this.analysisMethods) {\n        this.analysisMethods[element].current = this.report.analysis_method_refs.some(el => el.id == this.analysisMethods[element].id);\n      }   \n      this.toLoad -= 1\n    })\n\n    this.transport.get(\"evaluation-types/\", !this.authenticated).then((data) => {\n      this.evaluationTypes = data.results; \n\n      let index = this.evaluationTypes.indexOf(this.evaluationTypes.find(el => this.report.evaluation_type_ref.id == el.id))\n      if (index > -1) this.evaluationTypes[index].current = true\n      else {\n        this.report.evaluation_type_ref.current = true\n        this.evaluationTypes.push(this.report.evaluation_type_ref)\n      }  \n      this.toLoad -= 1\n    })\n\n    this.transport.get(\"representation-methods/\", !this.authenticated).then((data) => {\n      this.representationMethods= data.results;  \n      for (let re of this.report.representation_method_refs) {\n        if (!this.representationMethods.find(el => re.id == el.id)) this.representationMethods.push(re)\n      }  \n      for (var element in this.representationMethods) {\n        this.representationMethods[element].current = this.report.representation_method_refs.some(el => el.id == this.representationMethods[element].id);\n      }   \n      this.toLoad -= 1\n    })\n\n    this.transport.get(\"methods/\", !this.authenticated).then((data) => {\n      this.methods = data.results;\n      for (let method of this.methods) {\n        if (typeof method.parent_ref == 'string') {\n          let data = method.parent_ref.split('/')\n          method.parent_ref = +data[data.length - 2]\n        }\n      }\n      for (let m of this.report.method_refs) {\n        if (!this.methods.find(el => m.id == el.id)) this.methods.push(m)\n      }\n      for (var element in this.methods) {\n        this.methods[element].checked = this.report.method_refs.some(el => el.id == this.methods[element].id);\n      }         \n      this.toLoad -= 1\n    })\n  }\n\n  goBack(event) {\n    event.preventDefault();\n    this.router.navigate([\"/cases\"], {queryParams: {id: this.case ? this.case : this.report.case_ref.id}});\n  }\n\n  downloadFile() {\n    let link = document.createElement(\"a\");\n    link.download = \"filename\";\n    link.href = this.report.evaluation_file;\n    link.click();\n    link.remove();\n  }\n\n  editReport(event) {\n    event.preventDefault()\n\n    const mFormControls = () => {\n      let arr: FormControl[] = []\n      for (let m of this.methods) arr.push(new FormControl(this.report.method_refs.find(el => +el.id == +m.id) ? true : false))\n      return arr\n    }\n\n    const rmFormControls = () => {\n      let arr: FormControl[] = []\n      for (let rm of this.representationMethods) arr.push(new FormControl(this.report.representation_method_refs.find(el => +el.id == +rm.id) ? true : false))\n      return arr\n    }\n\n    const amFormControls = () => {\n      let arr: FormControl[] = []\n      for (let am of this.analysisMethods) arr.push(new FormControl(this.report.analysis_method_refs.find(el => +el.id == +am.id) ? true : false))\n      return arr\n    }\n    const oFormControls = () => {\n      let arr: FormControl[] = []\n      for (let o of this.outcomes) arr.push(new FormControl(this.report.outcome_refs.find(el => +el.id == +o.id) ? true : false))\n      return arr\n    }\n    this.editReportForm = new FormGroup({\n      type: new FormControl(this.report.type, Validators.required), //\n      key_questions: new FormControl(this.report.key_questions, Validators.required), //\n      other_results: new FormControl(this.report.other_results, Validators.required), //\n      evaluation_type_ref: new FormControl(this.report.evaluation_type_ref.id, Validators.required),//\n      method_refs: new FormArray(mFormControls()),\n      representation_method_refs: new FormArray(rmFormControls()),\n      analysis_method_refs: new FormArray(amFormControls()),\n      outcome_refs: new FormArray(oFormControls()),\n      other_analysis_method: new FormControl(''), //\n      other_evaluation_type: new FormControl(''), //\n      other_representation_method: new FormControl(''), //\n      other_method: new FormControl('')\n    })\n    this.formPage = 1\n  }\n\n  changeMethod() {\n    let valArr = this.editReportForm.value.method_refs\n    for (let i = 0; i < this.methods.length; i++) {\n      if (valArr[i]) {\n        let name = this.methods[i].name\n        if (name.trim().toLocaleLowerCase() == \"другое\") {\n          this.otherMethod = true\n          this.newParentRef = this.methods[i].parent_ref\n          return\n        }\n      }\n    }\n    this.otherMethod = false\n    this.newParentRef = null\n    this.editReportForm.patchValue({other_method: ''})\n  }\n  changeRepMethod() {\n    let valArr = this.editReportForm.value.representation_method_refs\n    for (let i = 0; i < this.representationMethods.length; i++) {\n      if (valArr[i]) {\n        let name = this.representationMethods[i].name\n        if (name.trim().toLocaleLowerCase() == \"другое\") {\n          this.otherRepMethod = true\n          return\n        }\n      }\n    }\n    this.otherRepMethod = false\n    this.editReportForm.patchValue({other_representation_method: ''})\n  }\n  changeAnMethod() {\n    let valArr = this.editReportForm.value.analysis_method_refs\n    for (let i = 0; i < this.analysisMethods.length; i++) {\n      if (valArr[i]) {\n        let name = this.analysisMethods[i].name\n        if (name.trim().toLocaleLowerCase() == \"другое\") {\n          this.otherAnMethod = true\n          return\n        }\n      }\n    }\n    this.otherAnMethod = false\n    this.editReportForm.patchValue({other_analysis_method: ''})\n  }\n  changeEvType() {\n    let id = this.editReportForm.value.evaluation_type_ref\n    let name = this.evaluationTypes.find(el => el.id == id).name\n    if (name.trim().toLocaleLowerCase() == \"другое\") {\n      this.otherEvType = true\n      return\n    }\n    this.otherEvType = false\n    this.editReportForm.patchValue({other_evaluation_type: ''})\n  }\n  closeForm() {\n    this.formPage = 0\n  }\n\n  async methodsSubmit(event) {\n    event.preventDefault()\n    let newMethod = null\n    let newAnMethod = null\n    let newRepMethod = null\n    let newEvType = null\n    let other_method = this.editReportForm.value.other_method\n    let other_representation_method = this.editReportForm.value.other_representation_method\n    let other_analysis_method = this.editReportForm.value.other_analysis_method\n    let other_evaluation_type = this.editReportForm.value.other_evaluation_type\n    try {\n      if (other_method) {\n        newMethod = await this.transport.post(\"methods/\", {\n          name: other_method,\n          parent_ref: +this.newParentRef\n        })\n      }\n      if (other_analysis_method) {\n        newAnMethod = await this.transport.post(\"analysis-methods/\", {\n          name: other_analysis_method\n        })\n      }\n      if (other_representation_method) {\n        newRepMethod  = await this.transport.post(\"representation-methods/\", {\n          name: other_representation_method\n        })\n      }\n      if (other_evaluation_type) {\n        newEvType  = await this.transport.post(\"evaluation-types/\", {\n          name: other_evaluation_type\n        })\n      }\n    } catch (e) {\n      console.log(e)\n    }\n    this.onSubmit(newMethod, newAnMethod, newRepMethod, newEvType)\n  }\n\n  onSubmit(newMethod, newAnMethod, newRepMethod, newEvType) {\n    const data = {...this.editReportForm.value}\n    const boolToObjM = () => {\n      let resNum: any[] = []\n      let valArr = this.editReportForm.value.method_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && !this.methods[i].parent_ref) resNum.push(+this.methods[i].id)\n        else if (valArr[i] && this.methods[i].parent_ref) {\n          const parent_index = this.methods.indexOf(this.methods.find(item => item.id == this.methods[i].parent_ref))\n          if (valArr[parent_index]) resNum.push(+this.methods[i].id)\n        }\n      }\n      if (newMethod) resNum.push(+newMethod.id)\n      return resNum\n    }\n    const boolToObjAM = () => {\n      let resNum: any[] = []\n      let valArr = this.editReportForm.value.analysis_method_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.analysisMethods[i].id)\n      }\n      if (newAnMethod) resNum.push(+newAnMethod.id)\n      return resNum\n    }\n    const boolToObjRM = () => {\n      let resNum: any[] = []\n      let valArr = this.editReportForm.value.representation_method_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(+this.representationMethods[i].id)\n      }\n      if (newRepMethod) resNum.push( +newRepMethod.id)\n      return resNum\n    }\n    const boolToObjO = () => {\n      let resNum: any[] = []\n      let valArr = this.editReportForm.value.outcome_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.outcomes[i].id)\n      }\n      return resNum\n    }\n    data.evaluation_type_ref = newEvType ? +newEvType.id : +this.editReportForm.value.evaluation_type_ref\n    data.outcome_refs = boolToObjO()\n    data.representation_method_refs = boolToObjRM()\n    data.method_refs = boolToObjM()\n    data.analysis_method_refs = boolToObjAM()\n    data.case_ref = this.report.case_ref.id\n    if (this.report.case_ref.add_public_confirm) {\n      data.add_public_confirm = false\n      data.add_public_will = true\n      this.request(data)\n    } else {\n      data.add_public_confirm = true\n      data.add_public_will = false\n      this.udpate(data)\n    }\n  }\n  udpate(data) {\n    this.transport.put(\"evaluation-reports/\", String(this.report.id), data).then(report => {\n      let fd = new FormData()\n      this.report = report\n      if (this.repFile) fd.append('evaluation_file', this.repFile, this.repFile.name)\n      this.transport.patch(\"evaluation-reports/\", String(report.id), fd)\n        .then(file => {\n          this.report = {...report, ...file}\n          this.formPage = 0\n          this.toLoad += 4\n          this.load()\n        })\n        .catch(error => {\n          this.formPage = 0\n          console.log(error)\n        })\n        .finally(() => this.repFile = null)\n    })\n  }\n\n  request(values) {\n    let saveArr = []\n    for (let field in values) {\n      if (['method_refs', 'representation_method_refs', 'analysis_method_refs', 'outcome_refs'].includes(field)) {\n        if (this.report[field].length != values[field].length) saveArr.push(field)\n        else for (let item of this.report[field]) {\n          if (!values[field].includes(+item.id)) {\n            saveArr.push(field); \n            break\n          }\n        }\n      }\n      else if (['evaluation_type_ref'].includes(field)) {\n        if (+this.report[field].id != +values[field]) saveArr.push(field)\n      } \n      else if (this.report[field] != values[field]) saveArr.push(field)\n    }\n    \n    for (let field in values) \n      if (!saveArr.includes(field)) values[field]= ['method_refs', 'representation_method_refs', 'analysis_method_refs', 'outcome_refs'].includes(field) ? [] : null\n\n    values.evalution_report_ref = this.report.id\n    this.transport.put(\"evaluation-report-change-requests/\", String(this.report.id), values).then(report => {\n      let fd = new FormData()\n      if (this.repFile) fd.append('evaluation_file', this.repFile, this.repFile.name)\n      this.transport.patch(\"evaluation-report-change-requests/\", String(this.report.id), fd)\n        .then(file => {\n          this.transport.post(\"evaluation-report-change-requests/\" + this.report.id + \"/add_public_confirm/\", {}).then(\n            (result) => {\n              alert(\"Запрос на добавление отчёта об оценке успешно отправлен\")\n            }).catch(err => {\n              console.log(err)\n            }).finally(() => this.formPage = 0)\n        })\n        .catch(error => {\n          this.formPage = 0\n          console.log(error)\n        })\n        .finally(() => this.repFile = null)\n    })\n  }\n\n  triggerRepFile() {\n    this.file_rep.nativeElement.click()\n  }\n  repFileUpload(event) {\n    this.repFile = event.target.files[0]\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TransportService } from '../services/transport.service';\nimport { Outcome } from '../models/outcome';\nimport { OutcomeName } from '../models/outcomename';\nimport { Target } from '../models/target';\nimport { Practice } from '../models/practice';\nimport { OutcomeIndicator } from '../models/outcomeindicator';\nimport { OutcomeMethod } from '../models/outcomemethod';\nimport { Tool } from '../models/tool';\nimport { EvaluationReport } from '../models/evaluationreport';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Program } from '../models/program';\nimport { ThematicGroup } from '../models/thematicgroup';\n\n@Component({\n  selector: 'app-result',\n  templateUrl: './result.component.html',\n  styleUrls: ['./result.component.scss']\n})\nexport class ResultComponent implements OnInit {\n\n  id: string;\n  outcome: Outcome;\n  outcomeNames: OutcomeName[];\n  outcomeIndicators: OutcomeIndicator[];\n  targets: Target[];\n  practices: Practice[];\n  outcomeMethods: OutcomeMethod[];\n  toLoad: number = 9;\n  tools: Tool[]\n  allTools: Tool[]\n  reports: EvaluationReport[]\n  thematicGroups: ThematicGroup[]\n\n  programId: string;\n  programBackReferenceId: string;\n  programResultLevel:string;\n\n  authenticated: boolean = false;\n\n  indicatorForm: FormGroup\n  toolForm: FormGroup\n  programs: Program[]\n  form: number = 0\n\n  results = []\n  mpl = []\n\n  constructor(private activateRoute: ActivatedRoute,\n    public transport: TransportService,\n    public router: Router) {\n    this.id = activateRoute.snapshot.params['id'];\n  }\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n\n    this.activateRoute.queryParamMap.subscribe(queryParams => {\n      this.programId = queryParams.get('programid');\n      this.programBackReferenceId = queryParams.get('programbackreferenceid');\n      this.programResultLevel = queryParams.get('programresultlevel');\n    })\n    this.transport.getExact(\"outcomes\", this.id, !this.authenticated).then((outcomeResult) => {\n      this.outcome = outcomeResult;\n      this.toLoad -= 1;\n      this.transport.get(\"outcome-names/?outcome_ref=\" + this.id, !this.authenticated).then((outcomeNames) => {\n        this.outcomeNames = outcomeNames.results;\n        this.toLoad -= 1;\n      });\n      this.transport.get(\"targets/\", !this.authenticated).then((targetsResult) => {\n        this.targets = targetsResult.results;\n        for (var target in this.targets) {\n          this.targets[target].current = this.outcome.target_refs.some(el => el.id == this.targets[target].id);\n        }\n        this.toLoad -= 1;\n      });\n      this.transport.get(\"practices/\", !this.authenticated).then((practicesResult) => {\n        this.practices = practicesResult.results;\n\n        for (var practice in this.practices) {\n          this.practices[practice].current = this.outcome.practice_refs.some(el => el.id == this.practices[practice].id);\n        }\n        this.toLoad -= 1;\n      });\n      this.transport.get(\"outcome-indicators/?outcome_ref=\" + this.id, !this.authenticated).then((indicatorsResult) => {\n        this.outcomeIndicators = indicatorsResult.results;\n\n        this.toLoad -= 1;\n      });\n\n      this.transport.get(\"outcome-methods/?outcome_ref=\" + this.id, !this.authenticated).then((methodsResult) => {\n        this.outcomeMethods = methodsResult.results;\n        this.toLoad -= 1;\n      });\n      this.transport.get(\"tools/?outcome_refs=\" + this.id, !this.authenticated).then((toolsResult) => {\n        this.tools = toolsResult.results;\n        this.toLoad -= 1;\n      });\n      this.transport.get(\"evaluation-reports/?outcome_refs=\" + this.id, !this.authenticated).then((reportsResult) => {\n        this.reports = reportsResult.results;\n        this.toLoad -= 1;\n      })\n      this.transport.get(\"thematic-groups/\", !this.authenticated).then((thematicGroupsData) => {\n        this.thematicGroups = thematicGroupsData.results;   \n        for (var tg in this.thematicGroups) {\n          this.thematicGroups[tg].current = this.outcome.thematic_group_refs.some(el => el.id == this.thematicGroups[tg].id);\n        } \n        this.toLoad -= 1\n      })\n      \n    },\n      (error) => {\n        this.router.navigate([\"/outcomes\"]);\n      });\n  }\n\n  addToLibrary() {\n    this.transport.post(\"outcomes/\" + this.id + \"/add_to_library/\", {}).then((addToLibraryResult) => {\n      this.outcome.current_user_library = true;\n    }, (error) => {});\n  }\n\n  removeFromLibrary() {\n    this.transport.post(\"outcomes/\" + this.id + \"/remove_from_library/\", {}).then((addToLibraryResult) => {\n      this.outcome.current_user_library = false;\n    }, (error) => {});\n  }\n\n  goBack(event) {\n    event.preventDefault();\n\n    if (!this.programId)\n    this.router.navigate([\"outcomes\"]);\n    else {\n      var link = '/outcomes?programid='+this.programId+'&programresultlevel='+this.programResultLevel;\n\n      var backReferenceId:string = null;\n      if (this.programBackReferenceId)\n        backReferenceId = this.programBackReferenceId;\n\n      if (backReferenceId)\n        link += \"&programbackreferenceid=\" + backReferenceId;\n      \n      this.router.navigateByUrl(link);\n    }\n  }\n\n  addTool() {\n    this.toolForm = new FormGroup({\n      tool: new FormControl('', Validators.required)\n    })\n    this.transport.get(\"tools/\").then((toolsResult) => {\n      this.allTools = toolsResult.results;\n      this.form = 1\n    });\n  }\n\n  addIndicator() {\n    this.indicatorForm = new FormGroup({\n      program: new FormControl('', Validators.required),\n      level: new FormControl('', Validators.required),\n      indicator: new FormControl('', Validators.required),\n      result:  new FormControl('', Validators.required)\n    })\n    this.transport.get(\"programs/\").then((programsData) => {\n      this.programs = programsData.results\n      this.form = 2\n    })\n  }\n\n  toolFormSubmit() {\n    this.transport.post('tools/'+ this.toolForm.value.tool + '/add_outcome/?outcome_ref=' + this.outcome.id, {}).then(resInd =>{\n      let tool = this.allTools.find(t => t.id == this.toolForm.value.tool)\n      this.tools.push(tool)\n      this.closeForm()\n    }).catch(e => console.log(e))\n  }\n\n  indicatorFormSubmit() {\n    let dataInd = {name: this.indicatorForm.value.indicator, outcome_ref: this.outcome.id}\n    this.transport.post('outcome-indicators/', dataInd).then(resInd => {\n      this.outcomeIndicators.push(resInd)\n      this.closeForm()\n    }).catch(e => console.log(e))\n  }\n\n  closeForm() {\n    this.form = 0\n  }\n\n  isToolSelected(id) {\n    return !!this.tools.find(tool => tool.id == id)\n  }\n\n  isIndicatorSelected(item) {\n    return !!this.outcomeIndicators.find(i => i.name.trim() == item.trim())\n  }\n\n  changeLevel() {\n    if (!this.indicatorForm.value.level || !this.indicatorForm.value.program) this.results = []\n    else {\n      this.transport.get(\"program-\"+ this.indicatorForm.value.level +\"/?program_ref=\" + this.indicatorForm.value.program).then(result => {\n        this.results = result.results \n        this.indicatorForm.patchValue({result: ''})\n      })\n    }\n  }\n\n  changeResult() {\n    this.transport.get(\"mpl-\" + this.indicatorForm.value.level + \"/?program_ref=\" + this.indicatorForm.value.program).then((mpl) => {\n      this.mpl = mpl.results.filter(e => e.indicator);\n    })\n  }\n}\n","<section class=\"block_form \" *ngIf=\"toLoad <= 0\">\n    <div>\n        <div class=\"row head_result\">\n            <div class=\"col-4 blue_item\"><h1>СОЦИАЛЬНЫЙ РЕЗУЛЬТАТ</h1></div>\n            <div class=\"col-4 back_btn\"><a class=\"cursor_pointer\" (click)=\"goBack($event)\">Назад</a></div>\n            <div class=\"col-4 right\">\n                <button *ngIf=\"!outcome.current_user_library && authenticated\" (click)=\"addToLibrary()\" style=\"width: auto;\" class=\"add_button open_accessadd add_tolib\"><img src=\"/newpion/static/pionfront/assets/img/check_white.png\"><span>Добавить в мою библиотеку</span></button>\n                <button *ngIf=\"outcome.current_user_library && authenticated\" (click)=\"removeFromLibrary()\" style=\"width: auto;\" class=\"add_button open_accessadd add_tolib remove\"><img src=\"/newpion/static/pionfront/assets/img/check_white.png\"><span>Убрать из моей библиотеки</span></button>\n            </div>\n        </div>\n        <div class=\"content_block\">\n            <div class=\"row \">\n                <div class=\"col-5 border_right\">\n                  <h3 class=\"marg_h_top\">Тематические группы:</h3>\n                    <p *ngFor=\"let tg of thematicGroups\" class=\"line_include\" [ngClass]=\"{'check': tg.current}\"><span>{{tg.name}}</span></p>\n\n                    <h3 class=\"marg_h_top\">Целевые группы:</h3>\n\n                    <ng-container *ngFor=\"let target of targets\" >\n                      <p class=\"line_include\" [ngClass]=\"{'check': target.current}\" *ngIf=\"!target.parent_ref\">\n                          <span>{{target.name}}</span>\n                      </p>\n                      <div *ngFor=\"let child of targets\" style=\"padding-left: 3rem;\" >\n                          <p class=\"line_include\" [ngClass]=\"{'check': child.current}\" *ngIf=\"child.parent_ref == target.id && !target.parent_ref\">\n                              <span>{{child.name}}</span>\n                          </p>\n                      </div>\n                    </ng-container>\n\n                    <h3 class=\"marg_h_top\">Практика:</h3>\n                    <p *ngFor=\"let practice of practices\" class=\"line_include\" [ngClass]=\"{'check': practice.current}\"><span>{{practice.name}}</span></p>\n                </div>\n                <div class=\"col-7\">\n                    <h2 class=\"marg_h_top\">{{outcome.name}}</h2>\n                    <p class=\"sub_line\">(Общая формулировка)</p>\n\n                    <h3 class=\"marg_h_top uppercase\">Частные формулировки</h3>\n                    <ul class=\"border_botton marg_h_bottom\">\n                        <li *ngFor=\"let outcomeName of outcomeNames\">{{outcomeName.name}}</li>\n                    </ul> \n\n                    <h3 class=\"marg_h_top uppercase\">Показатели</h3> \n                        <p *ngFor=\"let outcomeIndicator of outcomeIndicators\" class=\"arrow_right\">{{outcomeIndicator.name}}</p>\n                        <div *ngIf=\"outcome.createdby && transport.user.id == outcome.createdby.id\" class=\"col-2 add_block\" \n                        (click)=\"addIndicator()\"\n                        style=\"padding: 20px 20px 20px 47px !important; background-position: left 7px center !important; color: black; font-weight: 400; cursor: pointer;\"> \n                            Добавить \n                        </div>\n\n                    <h3 class=\"marg_h_top uppercase\">Методы и инструменты сбора данных</h3> \n                        <p *ngFor=\"let outcomeMethod of outcomeMethods\" class=\"arrow_right\"><a target=\"_blank\" href=\"{{outcomeMethod.url}}\">{{outcomeMethod.name}}</a></p>\n                        <p *ngFor=\"let tool of tools\" class=\"arrow_right\"><a target=\"_blank\" [routerLink]=\"['/tools']\" [queryParams]=\"{id: tool.id}\">{{tool.name}}</a></p>\n                        <div *ngIf=\"outcome.createdby && transport.user.id == outcome.createdby.id\" class=\"col-2 add_block\" \n                        (click)=\"addTool()\"\n                        style=\"padding: 20px 20px 20px 47px !important; background-position: left 7px center !important; color: black; font-weight: 400; cursor: pointer;\"> \n                            Добавить \n                        </div>\n\n                    <h3 class=\"marg_h_top uppercase\">Отчёты об оценке</h3> \n                    <p *ngFor=\"let report of reports\" class=\"arrow_right\"><a [routerLink]=\"['/report', report.id]\">{{report.case_ref.name}}</a></p>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>\n\n<div class=\"popap_kontst dark_block blue_head big_form\" *ngIf=\"form == 1\">\n    <div>\n      <div class=\"head\">\n        <p class=\"close_btn\" (click)=\"closeForm()\">\n          <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\">\n        </p>\n        <p class=\"center font_500\">Социальный результат</p>\n      </div>\n      <div class=\"text_block\">\n        <form [formGroup]=\"toolForm\">\n          <p class=\"line_descSel\">Общая формулировка:</p>\n          <textarea class=\"text_item\" [value]=\"outcome.name\" disabled></textarea>\n\n          <p class=\"line_descSel\">Инструмент:</p>\n          <select class=\"big_sellect\" formControlName=\"tool\">\n            <option value=\"\" disabled>Выберите инструмент</option>\n            <option *ngFor=\"let tool of allTools\" [value]=\"tool.id\" [disabled]=\"isToolSelected(tool.id)\">{{tool.name}}</option>\n          </select>\n  \n  \n          <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" [disabled]=\"toolForm.invalid || toolForm.disabled\" (click)=\"toolFormSubmit()\">Добавить</button>\n        </form>\n      </div>\n    </div>\n</div>\n\n\n<div class=\"popap_kontst dark_block blue_head big_form\"  *ngIf=\"form == 2\">\n    <div>\n      <div class=\"head\">\n        <p class=\"close_btn\" (click)=\"closeForm()\">\n          <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\">\n        </p>\n        <p class=\"center font_500\">Социальный результат</p>\n      </div>\n      <div class=\"text_block\">\n        <form [formGroup]=\"indicatorForm\">\n          <p class=\"line_descSel\">Общая формулировка:</p>\n          <textarea class=\"text_item\" [value]=\"outcome.name\" disabled></textarea>\n  \n          <p class=\"line_descSel\">Название программы:</p>\n          <select  class=\"big_sellect\" formControlName=\"program\" (change)=\"changeLevel()\">\n            <option value=\"\">Выберите из списка</option>\n            <option [value]=\"program.id\" *ngFor=\"let program of programs\">{{program.name}}</option>\n          </select>\n  \n          <p class=\"line_descSel\">Уровень социального результата:</p>\n            <select  class=\"big_sellect\" formControlName=\"level\" (change)=\"changeLevel()\">\n                <option value=\"\">Выберите из списка</option>\n                <option value=\"short-outcomes\">Краткосрочные</option>\n                <option value=\"mid-outcomes\">Среднесрочные</option>\n                <option value=\"impacts\">Социальный эффект</option>\n            </select>\n\n            <p class=\"line_descSel\">Результат:</p>\n            <select  class=\"big_sellect\" formControlName=\"result\" (change)=\"changeResult()\">\n                <option value=\"\">Выберите из списка</option>\n                <option [value]=\"result.id\" *ngFor=\"let result of results\">{{result.name}}</option>\n            </select>\n  \n          <p class=\"line_descSel\">Показатель:</p>\n            <select  class=\"big_sellect\" formControlName=\"indicator\" (change)=\"changeResult()\">\n                <option value=\"\">Выберите из списка</option>\n                <option [value]=\"mplItem.indicator\" *ngFor=\"let mplItem of mpl\" [disabled]=\"isIndicatorSelected(mplItem.indicator)\">{{mplItem.indicator}}</option>\n            </select>\n\n          <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" [disabled]=\"indicatorForm.invalid || indicatorForm.disabled\" (click)=\"indicatorFormSubmit()\">Добавить</button>\n        </form>\n      </div>\n    </div>\n  </div>\n\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { TransportService } from '../services/transport.service';\n\n@Component({\n  selector: 'app-select-library',\n  templateUrl: './select-library.component.html',\n  styleUrls: ['./select-library.component.scss']\n})\nexport class SelectLibraryComponent implements OnInit {\n\n  auth: boolean\n  br1Height: number = 0\n  br2Height: number = 0\n\n  constructor(public transport: TransportService, private router: Router) { \n  }\n\n  ngOnInit(): void {\n    if (this.transport.accessToken) this.auth = true;\n    else this.auth = false;\n\n    let br1 = document.querySelectorAll('.br1')\n    for (let i = 0; i < br1.length; i++) {\n      if (br1[i].clientHeight > this.br1Height) this.br1Height = br1[i].clientHeight\n    }\n    for (let i = 0; i < br1.length; i++) {\n      br1[i].setAttribute('style', 'height: ' + this.br1Height + 'px;')\n    }\n    let br2 = document.querySelectorAll('.br2')\n    for (let i = 0; i < br2.length; i++) {\n      if (br2[i].clientHeight > this.br2Height) this.br2Height = br2[i].clientHeight\n    }\n    for (let i = 0; i < br2.length; i++) {\n      br2[i].setAttribute('style', 'height: ' + this.br2Height + 'px !important;')\n    }\n  }\n\n  goLibrary(library: string) {\n    this.router.navigate([library]);\n  }\n}\n","<section class=\"block_form\">\n    <div>\n        <div class=\"row head_result\">\n            <div class=\"col-4 blue_item\">\n                <h1>Перейти в библиотеку</h1>\n            </div>\n            <!-- <div class=\"col-4 back_btn\"><a class=\"cursor_pointer\" (click)=\"goBack($event)\">Назад</a></div>\n            <div class=\"col-4 right\"><button *ngIf=\"!outcome.current_user_library && authenticated\" (click)=\"addToLibrary()\" style=\"width: auto;\" class=\"add_button open_accessadd add_tolib\"><img src=\"/newpion/static/pionfront/assets/img/check_white.png\"><span>Добавить в мою библиотеку</span></button></div> -->\n        </div>\n        <div class=\"container container-libs\">\n            <div class=\"row\">\n                <div class=\"col-12\">\n                    Материалы библиотеки разделены на четыре части: логические модели, социальные результаты, инструменты и кейсы.\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-6 text-justify\">\n                    <p>\n                        В Библиотеке логических моделей и деревьев результатов собраны файлы с логическими моделями и деревьями результатов программ, которые реализуют отечественные организации, работающие в сфере защиты детства.  Каждая программа сопровождается краткой справочной информацией: какая организация реализует(реализовала) программу, в какие сроки, с какими целевыми группами, на достижение каких социальных результатов ориентирована программа, проходила ли программа (практика) верификацию и какие уровни доказанности были присвоены.\n                    </p>\n                </div>\n                <div class=\"col-6 text-justify\">\n                    <p>\n                        В Библиотеку социальных результатов включены результаты, на достижение которых чаще всего ориентированы проекты и программы отечественных организаций, работающих в сфере защиты детства.   Для каждого социального результата указано: общая и частные формулировки, показатели, с помощью которых измеряется достижение социального результата, методы и инструменты, которые используются на практике для измерения показателей.  Познакомиться  с  заинтересовавшим инструментом, можно не выходя из библиотеки.\n                    </p>\n                </div>\n                \n            </div>\n            <div class=\"row\">\n                <div class=\"col-6 text-justify\">\n                    <div (click)=\"goLibrary('library')\" class=\"button cursor_pointer libbutton\">\n                        <button class=\"add_button br1\">Библиотека логических моделей и деревьев результатов</button>\n                    </div>\n                </div>\n                <div class=\"col-6 text-justify\">\n                    <div (click)=\"goLibrary('outcomes')\" class=\"button cursor_pointer libbutton\">\n                        <button class=\"add_button br1\">Библиотека социальных результатов</button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-6 text-justify\">\n                    <p>\n                        В Библиотеке инструментов собраны инструменты,  которые используют отечественные организации, работающие в сфере защиты детства, для измерения непосредственных и социальных результатов своих программ. Каждый инструмент сопровождается краткой справочной информацией: для какой целевой группы разработан инструмент (кто именно является источником информации),  для измерения какого уровня результатов  и в каких практиках может быть использован,  к какому методу сбора данных относится, имеются ли сведения о его стандартизации, ограничения  применения. \n                    </p>\n                </div>\n                <div class=\"col-6 text-justify\">\n                    <p>\n                        В Библиотеку кейсов включены кейсы отечественных организаций, работающих в сфере защиты детства, которые активно развивают систему мониторинга и оценки. Из аннотации кейса можно узнать как о самой организации, так и об элементах системы мониторинга и оценки, представленных в  кейсе. Справочная информация об организации  содержит сведения об  ее целевых группах и типах практики, об основных социальных результатах, о том, проходила ли практика верификацию. К отдельным кейсам приложены отчеты об оценке.\n                    </p>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-6 text-justify\">\n                    <div (click)=\"goLibrary('tools')\" class=\"button cursor_pointer libbutton\">\n                        <button class=\"add_button br2\">Библиотека инструментов</button>\n                    </div>\n                </div>\n                <div class=\"col-6 text-justify\">\n                    <div (click)=\"goLibrary('cases')\" class=\"button cursor_pointer libbutton\">\n                        <button class=\"add_button br2\">Библиотека кейсов</button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-12\">\n                    <p>\n                        В каждом разделе можно настроить систему поиска по категориям и подкатегориям.\n                    </p>\n                    <p *ngIf=\"!auth\">\n                        Скачивать файлы и создавать личные библиотеки могут только зарегистрированные пользователи. <a routerLink=\"/auth/login\">Войдите</a> или <a routerLink=\"/auth/registration\">зарегистрируйтесь</a>.\n                    </p>\n                </div>\n            </div>\n        </div>\n    </div>\n</section>","import { EventEmitter, Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { environment } from 'src/environments/environment';\nimport { User } from '../models/user';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class TransportService {\n  \n  baseUrl = environment.baseUrl + \"newpion/api/\"\n\n  public get accessToken(): string {\n    return localStorage.getItem('accessToken');\n  }\n\n  public set accessToken(accessToken: string) {\n    if (!accessToken)\n      localStorage.removeItem('accessToken');\n    else\n      localStorage.setItem('accessToken', accessToken);\n  }\n\n  public get refreshToken(): string {\n    return localStorage.getItem('refreshToken');\n  }\n\n  public set refreshToken(refreshToken: string) {\n    if (!refreshToken)\n      localStorage.removeItem('refreshToken');\n    else\n      localStorage.setItem('refreshToken', refreshToken);\n  }\n\n  public getCookie(name) {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (let i = 0; i < cookies.length; i++) {\n            const cookie = cookies[i].trim();\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n  }\n\n  constructor(private http: HttpClient, private router: Router) { }\n\n  newUser: EventEmitter<boolean> = new EventEmitter()\n\n  public user: User\n\n  public sendToHeader(user) {\n    this.newUser.emit(user);\n  }\n\n  public getToken(login: string, password: string): Promise<any> {\n    //debugger;\n    var formData: any = new FormData();\n    formData.append(\"grant_type\", \"password\");\n    formData.append(\"username\", login);\n    formData.append(\"password\", password);\n    formData.append(\"client_id\", \"zHpEmzeZtngUwlu6v8sDhW8fuGdwi9sYLIem6NJ7\");\n    formData.append(\"client_secret\", 'EEQxthdrmA1bUl4yWbbMgpgkyaVzec4aqBFUdF5k4toXlntqgenX7iRhP6ofICrx7HyS9NaWwtUfpmS9kViLiaoVAOLDS5PUdb8qCBD7BQ1DVf0gOmB65jfIUouceyiH');\n\n    var result = this.http.post(this.baseUrl + \"o/token/\", formData, {\n      headers: { \n        'Authorization': \"Basic \" + btoa(\"zHpEmzeZtngUwlu6v8sDhW8fuGdwi9sYLIem6NJ7:EEQxthdrmA1bUl4yWbbMgpgkyaVzec4aqBFUdF5k4toXlntqgenX7iRhP6ofICrx7HyS9NaWwtUfpmS9kViLiaoVAOLDS5PUdb8qCBD7BQ1DVf0gOmB65jfIUouceyiH\") }\n    });\n\n    return new Promise<void>((resolve, reject) => \n      result.subscribe((responseData:any) => {\n        this.accessToken = responseData.access_token;\n        this.refreshToken = responseData.refresh_token;\n        resolve();\n      }, (error: HttpErrorResponse) => {\n        reject(error);\n      }));\n  }\n\n  private updateToken(): Promise<any> {\n    if (!this.refreshToken) {\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    var formData: any = new FormData();\n    formData.append(\"grant_type\", \"refresh_token\");\n    formData.append(\"refresh_token\", this.refreshToken);\n    formData.append(\"client_id\", \"zHpEmzeZtngUwlu6v8sDhW8fuGdwi9sYLIem6NJ7\");\n    formData.append(\"client_secret\", \"EEQxthdrmA1bUl4yWbbMgpgkyaVzec4aqBFUdF5k4toXlntqgenX7iRhP6ofICrx7HyS9NaWwtUfpmS9kViLiaoVAOLDS5PUdb8qCBD7BQ1DVf0gOmB65jfIUouceyiH\");\n\n    var result = this.http.post(this.baseUrl+\"o/token/\", formData);\n\n    return new Promise((resolve, reject) =>\n      result.subscribe((responseData:any) => {\n        resolve(responseData);\n      },\n      (error: HttpErrorResponse) => {\n        //debugger;\n        this.accessToken = null;\n        this.refreshToken = null;\n      \n        this.router.navigate(['/auth/login']);\n        reject(error);\n      }));\n  }\n\n  public post(type: string, request: any, anonymous: boolean = false):Promise<any> {\n    if (!this.refreshToken && !anonymous) {\n      //debugger;\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    // const csrftoken = this.getCookie('csrftoken');\n\n    var result = this.http.post(this.baseUrl + type, request, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    return new Promise((resolve, reject) =>\n      result.subscribe((responseData:any) => {\n        resolve(responseData);\n      },\n      (error: HttpErrorResponse) => {\n        //debugger;\n        if (error.status == 401) {\n          this.updateToken().then((data) => {\n            this.accessToken = data.access_token;\n            this.refreshToken = data.refresh_token;\n\n            var secondaryResult = this.http.post(this.baseUrl+type, request, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n            secondaryResult.subscribe((responseData:any) => {\n              resolve(responseData);\n            },\n            (error: HttpErrorResponse) => {\n              this.router.navigate(['/auth/login']);\n              reject(error);\n            });\n          });\n        }\n        else {\n          reject(error);\n        }\n      }));\n  }\n\n  public put(type: string, id: string, request: any):Promise<any> {\n    if (!this.refreshToken) {\n      //debugger;\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    // const csrftoken = this.getCookie('csrftoken');\n\n    var result = this.http.put(this.baseUrl + type + id + \"/\", request, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    //debugger;\n    \n    return new Promise((resolve, reject) =>\n          result.subscribe((responseData:any) => {\n            resolve(responseData);\n          },\n          (error: HttpErrorResponse) => {\n            //debugger;\n            if (error.status == 401) {\n              this.updateToken().then((data) => {\n                this.accessToken = data.access_token;\n                this.refreshToken = data.refresh_token;\n\n                var secondaryResult = this.http.put(this.baseUrl+type + id + \"/\", request, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n                secondaryResult.subscribe((responseData:any) => {\n                  resolve(responseData);\n                },\n                (error: HttpErrorResponse) => {\n                  this.router.navigate(['/auth/login']);\n                  reject(error);\n                });\n              });\n            }\n            else {\n              reject(error);\n            }\n          }));\n  }\n\n  public patch(type: string, id: string, request: any):Promise<any> {\n    if (!this.refreshToken) {\n      //debugger;\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    // const csrftoken = this.getCookie('csrftoken');\n\n    var result = this.http.patch(this.baseUrl + type + id + \"/\", request, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    //debugger;\n    \n    return new Promise((resolve, reject) =>\n          result.subscribe((responseData:any) => {\n            resolve(responseData);\n          },\n          (error: HttpErrorResponse) => {\n            //debugger;\n            if (error.status == 401) {\n              this.updateToken().then((data) => {\n                this.accessToken = data.access_token;\n                this.refreshToken = data.refresh_token;\n\n                var secondaryResult = this.http.patch(this.baseUrl+type + id + \"/\", request, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n                secondaryResult.subscribe((responseData:any) => {\n                  resolve(responseData);\n                },\n                (error: HttpErrorResponse) => {\n                  this.router.navigate(['/auth/login']);\n                  reject(error);\n                });\n              });\n            }\n            else {\n              reject(error);\n            }\n          }));\n  }\n\n  public get(type: string, anonymous: boolean = false):Promise<any> {\n    if (!this.refreshToken && !anonymous) {\n      //debugger;\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    var result = this.http.get(this.baseUrl+type, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    return new Promise((resolve, reject) =>\n      result.subscribe((responseData:any) => {\n        resolve(responseData);\n      },\n      (error: HttpErrorResponse) => {\n        //debugger;\n        if (error.status == 401) {\n          this.updateToken().then((data) => {\n            this.accessToken = data.access_token;\n            this.refreshToken = data.refresh_token;\n\n            var secondaryResult = this.http.get(this.baseUrl+type, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n            secondaryResult.subscribe((responseData:any) => {\n              resolve(responseData);\n            },\n            (error: HttpErrorResponse) => {\n              this.router.navigate(['/auth/login']);\n              reject(error);\n            });\n          });\n        }\n        else {\n          reject(error);\n        }\n      }));\n  }\n\n  public getOld(type: string):Promise<any> {\n\n    var result = this.http.get(type, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    return new Promise((resolve, reject) =>\n          result.subscribe((responseData:any) => {\n            resolve(responseData);\n          },\n          (error: HttpErrorResponse) => {\n            //debugger;\n            if (error.status == 401) {\n              this.updateToken().then((data) => {\n                this.accessToken = data.access_token;\n                this.refreshToken = data.refresh_token;\n\n                var secondaryResult = this.http.get(this.baseUrl+type, {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n                secondaryResult.subscribe((responseData:any) => {\n                  resolve(responseData);\n                },\n                (error: HttpErrorResponse) => {\n                  this.router.navigate(['/auth/login']);\n                  reject(error);\n                });\n              });\n            }\n            else {\n              reject(error);\n            }\n          }));\n  }\n\n  public getExact(type: string, index: string, anonymous: boolean = false):Promise<any> {\n    if (!this.refreshToken && !anonymous) {\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    var result = this.http.get(this.baseUrl+type+'/' + index + '/', {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    return new Promise((resolve, reject) =>\n          result.subscribe((responseData:any) => {\n            resolve(responseData);\n          },\n          (error: HttpErrorResponse) => {\n            //debugger;\n            if (error.status == 401) {\n              this.updateToken().then((data) => {\n                this.accessToken = data.access_token;\n                this.refreshToken = data.refresh_token;\n\n                var secondaryResult = this.http.get(this.baseUrl+type+'/' + index + '/', {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n                secondaryResult.subscribe((responseData:any) => {\n                  resolve(responseData);\n                },\n                (error: HttpErrorResponse) => {\n                  this.router.navigate(['/auth/login']);\n                  reject(error);\n                });\n              });\n            }\n            else {\n              reject(error);\n            }\n          }));\n  }\n\n  public delete(type: string, index: string):Promise<any> {\n    if (!this.refreshToken) {\n      this.router.navigate(['/auth/login']);\n      return;\n    }\n\n    var result = this.http.delete(this.baseUrl+type+'/' + index + '/', {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n    return new Promise((resolve, reject) =>\n          result.subscribe((responseData:any) => {\n            resolve(responseData);\n          },\n          (error: HttpErrorResponse) => {\n            //debugger;\n            if (error.status == 401) {\n              this.updateToken().then((data) => {\n                this.accessToken = data.access_token;\n                this.refreshToken = data.refresh_token;\n\n                var secondaryResult = this.http.delete(this.baseUrl + type+'/' + index + '/', {headers: {\"Authorization\": \"Bearer \" + this.accessToken}});\n\n                secondaryResult.subscribe((responseData:any) => {\n                  resolve(responseData);\n                },\n                (error: HttpErrorResponse) => {\n                  this.router.navigate(['/auth/login']);\n                  reject(error);\n                });\n              });\n            }\n            else {\n              reject(error);\n            }\n          }));\n  }\n}\n","import { Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-show-modal',\n  templateUrl: './show-modal.component.html',\n  styleUrls: ['./show-modal.component.scss']\n})\nexport class ShowModalComponent implements OnInit, OnDestroy {\n\n  @Input() error: boolean\n  @Output() close = new EventEmitter<boolean>()\n\n  interval: any\n\n  constructor() {}\n\n  ngOnInit(): void {\n    this.interval = setTimeout(() => this.closeModal(), 3000)\n  }\n\n  closeModal() {\n    this.close.emit(true)\n  }\n\n  ngOnDestroy(): void {\n    clearTimeout(this.interval);\n  }\n}\n","<div *ngIf=\"!error\" class=\"alert alert-success costum-class\" role=\"alert\">\n    <strong>Cохранено!</strong>\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\" (click)=\"closeModal()\">\n        <span aria-hidden=\"true\">&times;</span>\n    </button>\n</div>\n\n<div *ngIf=\"error\" class=\"alert alert-danger costum-class\" role=\"alert\">\n    <strong>Ошибка!</strong>\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\" (click)=\"closeModal()\">\n        <span aria-hidden=\"true\">&times;</span>\n    </button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { LogicalModel } from '../models/logicalModel';\nimport { TransportService } from '../services/transport.service';\n\n@Component({\n  selector: 'app-test',\n  templateUrl: './test.component.html',\n  styleUrls: ['./test.component.scss']\n})\nexport class TestComponent implements OnInit {\n\n  logicalModels: LogicalModel[]\n  authenticated: boolean\n\n  constructor(private transport: TransportService) { }\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n\n    \n    this.transport.getOld(\"https://pion.org.ru/newpion/api/logical-models/\").then((logicalModels) => {\n      this.logicalModels = logicalModels.results;\n      console.log(this.logicalModels)\n      // for (let model of this.logicalModels) {\n      //   this.transport.patch('logical-models/', String(model.id), {model_file: model.model_file, result_tree_file: model.result_tree_file}).then(res => {\n      //     console.log('ok')\n      //   }).catch(e => console.log(e))\n      // }\n    }).catch(error => {\n      console.log(error)\n    });\n  }\n\n}\n","<p>test works!</p>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormArray, FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Method } from '../models/method';\nimport { Outcome } from '../models/outcome';\nimport { OutcomeLevel } from '../models/outcomelevel';\nimport { Practice } from '../models/practice';\nimport { Target } from '../models/target';\nimport { ThematicGroup } from '../models/thematicgroup';\nimport { Tool } from '../models/tool';\nimport { ToolTag } from '../models/tooltags';\nimport { TransportService } from '../services/transport.service';\n\n@Component({\n  selector: 'app-tools',\n  templateUrl: './tools.component.html',\n  styleUrls: ['./tools.component.scss']\n})\nexport class ToolsComponent implements OnInit {\n\n  constructor(public transport: TransportService, \n    public fb: FormBuilder,\n    private activateRoute: ActivatedRoute,\n    public router: Router) { }\n\n  status: string = 'ЗАГРУЗКА...'\n  toLoad = 8\n  displayMyLibrary = false\n  authenticated: boolean\n  targets: Target[];\n  tools: Tool[];\n  allTools: Tool[];\n  myTools: Tool[];\n  allMyTools: Tool[];\n  practices: Practice[]\n  thematicGroups: ThematicGroup[]\n  outcomes: Outcome[]\n  outcomeLevels: OutcomeLevel[]\n  methods: Method[]\n  createToolForm: FormGroup\n  formPage: number = 0\n  file: File\n  otherMethod = false\n  displayDetails: boolean\n  currentTool: Tool\n  toolTags: ToolTag[]\n\n  displayAddPersonal: boolean\n  displayRemovePersonal: boolean\n\n  public filterForm = this.fb.group({\n    targetFilters: new FormArray([]),\n    practiceFilters: new FormArray([]),\n    outcomeFilters: new FormArray([]),\n    olFilters: new FormArray([]),\n    methodFilters: new FormArray([]),\n    tgFilters: new FormArray([])\n  });\n\n  public myFilterForm = this.fb.group({\n    targetFilters: new FormArray([]),\n    practiceFilters: new FormArray([]),\n    outcomeFilters: new FormArray([]),\n    olFilters: new FormArray([]),\n    methodFilters: new FormArray([]),\n    tgFilters: new FormArray([])\n  });\n\n  public filterRoot = this.fb.group({\n    target: new FormControl(false),\n    practice: new FormControl(false),\n    outcome: new FormControl(false),\n    ol:  new FormControl(false),\n    tg: new FormControl(false),\n    method: new FormControl(false)\n  });\n\n  public myFilterRoot = this.fb.group({\n    target: new FormControl(false),\n    practice: new FormControl(false),\n    outcome: new FormControl(false),\n    ol: new FormControl(false),\n    tg: new FormControl(false),\n    method: new FormControl(false)\n  });\n  @ViewChild('file_input') file_input\n\n  ngOnInit(): void {\n    if (this.transport.accessToken != null && this.transport.accessToken != undefined && this.transport.refreshToken != null && this.transport.refreshToken != undefined)\n      this.authenticated = true;\n\n      this.activateRoute.queryParamMap.subscribe(queryParams => {\n        let id = queryParams.get('id');\n        if (id) this.transport.get(\"tools/\"+id+\"/\").then(tool => {\n          if (this.allTools) {\n            tool = this.allTools.find(t => t.id == tool.id)\n          } else if (this.methods) {\n            tool.method_ref = [tool.method_ref]\n            if (tool.method_ref && tool.method_ref.length && typeof tool.method_ref[0].parent_ref) {\n              let parent = this.methods.find(el => el.id == tool.method_ref[0].parent_ref)\n              if (parent) tool.method_ref.splice(0, 0, parent)\n            }\n          }\n          this.openDetails(tool)\n        }).catch(e => console.log(e))\n      })\n\n      this.transport.get(\"targets/\", !this.authenticated).then((targetsData) => {\n        const targets = targetsData.results;\n        const children = targets.filter(m => typeof m.parent_ref == 'number').reverse()\n        for (let target of children) {\n          let child_index = targets.indexOf(targets.find(m => m.id == target.id))\n          targets.splice(child_index, 1)\n          let parent_index = targets.indexOf(targets.find(m => m.id == target.parent_ref))\n          targets[parent_index].has_children = true\n          targets.splice(parent_index + 1, 0, target)\n        }\n        this.targets = targets\n        this.toLoad -= 1;\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n  \n      this.transport.get(\"practices/\", !this.authenticated).then((practicesData) => {\n        this.practices = practicesData.results;    \n        this.toLoad -= 1\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n\n      this.transport.get(\"tool-tags/\", !this.authenticated).then((data) => {\n        this.toolTags = data.results;    \n        this.toLoad -= 1\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n  \n      this.transport.get(\"thematic-groups/\", !this.authenticated).then((thematicGroupsData) => {\n        this.thematicGroups = thematicGroupsData.results;    \n        this.toLoad -= 1\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n\n      this.transport.get(\"outcome-levels/\", !this.authenticated).then((outcomeLevelsData) => {\n        this.outcomeLevels = outcomeLevelsData.results;    \n        this.toLoad -= 1\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n  \n      this.transport.get(\"methods/\", !this.authenticated).then((methodsData) => {\n        const methods = methodsData.results;\n        const children = methods.filter(m => typeof m.parent_ref == 'number').reverse()\n        for (let method of children) {\n          let child_index = methods.indexOf(methods.find(m => m.id == method.id))\n          methods.splice(child_index, 1)\n          let parent_index = methods.indexOf(methods.find(m => m.id == method.parent_ref))\n          methods[parent_index].has_children = true\n          methods.splice(parent_index + 1, 0, method)\n        }\n        this.methods = methods\n        this.transport.get(\"tools/\", !this.authenticated).then((toolsData) => {\n          this.allTools = toolsData.results;\n          for (let tool of this.allTools) {\n            tool.method_ref = [tool.method_ref]\n            if (tool.method_ref && tool.method_ref.length && typeof tool.method_ref[0].parent_ref == 'number') {\n              let parent = this.methods.find(el => el.id == tool.method_ref[0].parent_ref)\n              if (parent) tool.method_ref.splice(0, 0, parent)\n            }\n          }\n          this.tools = this.allTools\n          this.sortTools() \n          this.toLoad -= 1;\n        }).catch(error => {\n          console.log(error)\n          this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n        });\n        this.toLoad -= 1;\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n      this.transport.get(\"outcomes/\", !this.authenticated).then((outcomesData) => {\n        this.outcomes = outcomesData.results;\n        this.toLoad -= 1\n      }).catch(error => {\n        console.log(error)\n        this.status = \"ПРОИЗОШЛА ОШИБКА. ПОПРОБУЙТЕ ОБНОВИТЬ СТАНИЦУ ИЛИ ВЕРНИТЕСЬ ПОЗЖЕ\"\n      });\n  } \n  sortTools() {\n    this.allMyTools = [];\n    for (var item in this.allTools) {\n      if (this.allTools[item].current_user_library)\n        this.allMyTools.push(this.allTools[item]);\n      }\n    this.myTools = this.allMyTools; \n  }\n  addToLibrary() {\n    this.transport.post(\"tools/\" + this.currentTool.id + \"/add_to_library/\", {}).then((addToLibraryResult) => {\n      this.tools.find(c => c.id == this.currentTool.id).current_user_library = true;\n      this.sortTools() \n    }, (error) => {});\n    this.closeAddPersonal()\n  }\n  removeFromLibrary() {\n    this.transport.post(\"tools/\" + this.currentTool.id + \"/remove_from_library/\", {}).then((addToLibraryResult) => {\n      this.tools.find(c => c.id == this.currentTool.id).current_user_library = false;\n      this.sortTools() \n    }, (error) => {});\n    this.closeAddPersonal()\n  }\n  closeAddPersonal() {\n    this.displayAddPersonal = false;\n    this.displayRemovePersonal = false;\n  }\n  openAddPersonal(model: Tool) {\n    if (!model.current_user_library && this.authenticated) {\n      this.currentTool= model;\n      this.displayAddPersonal = true;\n    }\n    if (model.current_user_library && this.authenticated) {\n      this.currentTool = model;\n      this.displayRemovePersonal = true;\n    }\n  }\n  openDetails(tool: Tool) {\n    this.router.navigate([], {queryParams: {id: tool.id}})\n    this.currentTool = tool\n    this.displayDetails = true\n  }\n  closeDetails() {\n    this.router.navigate([])\n    this.displayDetails = false\n    this.currentTool = null\n  }\n  addForm(event) {\n    event.preventDefault()\n\n    const tFormControls = () => {\n      let arr: FormControl[] = []\n      for (let target of this.targets) arr.push(new FormControl(false))\n      return arr\n    }\n\n    const ttFormControls = () => {\n      let arr: FormControl[] = []\n      for (let tag of this.toolTags) arr.push(new FormControl(false))\n      return arr\n    }\n\n    const oFormControls = () => {\n      let arr: FormControl[] = []\n      for (let outcome of this.outcomes) arr.push(new FormControl(false))\n      return arr\n    }\n\n    this.createToolForm = new FormGroup({\n      name: new FormControl('', Validators.required), //\n      info: new FormControl('', Validators.required), //\n      tool_tag_refs: new FormArray(ttFormControls()),\n      practice_ref: new FormControl('', Validators.required), //\n      target_refs: new FormArray(tFormControls()), //\n      thematic_group_ref: new FormControl('', Validators.required),//\n      method_ref: new FormControl(''),\n      method_new: new FormControl(''),\n      outcome_level_ref: new FormControl('', Validators.required),\n      outcome_refs: new FormArray(oFormControls()),\n      url: new FormControl(''),\n      isNew: new FormControl(true)\n    })\n\n    this.formPage = 1\n  }\n\n  editForm(event) {\n    event.preventDefault()\n\n    const tFormControls = () => {\n      let arr: FormControl[] = []\n      for (let target of this.targets) arr.push(new FormControl(this.currentTool.target_refs.find(el => +el.id == +target.id) ? true : false))\n      return arr\n    }\n    const ttFormControls = () => {\n      let arr: FormControl[] = []\n      for (let tag of this.toolTags) arr.push(new FormControl(this.currentTool.tool_tag_refs.find(el => +el.id == +tag.id) ? true : false))\n      return arr\n    }\n    const oFormControls = () => {\n      let arr: FormControl[] = []\n      for (let outcome of this.outcomes) arr.push(new FormControl(this.currentTool.outcome_refs.find(el => +el.id == +outcome.id) ? true : false))\n      return arr\n    }\n\n    let method_id = Array.isArray(this.currentTool.method_ref) ? this.currentTool.method_ref[this.currentTool.method_ref.length - 1].id : this.currentTool.method_ref.id\n    if (!this.methods.find(el => el.id == method_id)) {\n      method_id = this.methods.find(el => el.parent_ref == this.currentTool.method_ref[this.currentTool.method_ref.length - 1].parent_ref && el.name.trim().toLocaleLowerCase() == 'другое').id\n      this.otherMethod = true\n    }\n\n    this.createToolForm = new FormGroup({\n      name: new FormControl(this.currentTool.name, Validators.required), //\n      info: new FormControl(this.currentTool.info, Validators.required), //\n      tool_tag_refs: new FormArray(ttFormControls()),\n      practice_ref: new FormControl(this.currentTool.practice_ref.id, Validators.required), //\n      target_refs: new FormArray(tFormControls()), //\n      thematic_group_ref: new FormControl(this.currentTool.thematic_group_ref.id, Validators.required),//\n      method_ref: new FormControl(method_id, Validators.required),\n      method_new: new FormControl(!this.methods.find(el => el.id == method_id) ? this.currentTool.method_ref[this.currentTool.method_ref.length - 1].name : ''),\n      outcome_level_ref: new FormControl(this.currentTool.outcome_level_ref.id, Validators.required),\n      outcome_refs: new FormArray(oFormControls()),\n      url: new FormControl(this.currentTool.url),\n      isNew: new FormControl(false)\n    })\n    this.closeAddPersonal()\n    this.formPage = 1\n  }\n\n  addToAllLibrary(event) {\n    event.preventDefault()\n    this.transport.post(\"tools/\" + this.currentTool.id + \"/switchData_library/\", {}).then(\n    (addToLibraryResult) => {\n      alert('Запрос успешно отправлен!')\n      this.closeForm()\n    }, \n    (error) => {\n      console.log(error)\n      alert('Ошибка. Не удалось отправить запрос')\n      this.closeForm()\n    })\n  }\n  createMethod(event) {  \n    if (!this.createToolForm.value.method_new) this.onSubmit(event, null)\n    else {\n      event.preventDefault() \n      let method = this.methods.find(m => m.id == this.createToolForm.value.method_ref)\n      let data = {\n        name: this.createToolForm.value.method_new,\n        add_public: false,\n        parent_ref: method.parent_ref\n      }\n      this.transport.post(\"methods/\", data).then((res) => {\n        this.onSubmit(event, res)\n        \n      }).catch(error => {\n        console.log(error)\n      }); \n    }\n  }\n  onSubmit(event, newMethod?: Method) {\n    event.preventDefault()   \n    const values = {...this.createToolForm.value}\n    const boolToObjT = () => {\n      let resNum: any[] = []\n      let valArr = this.createToolForm.value.target_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i] && !this.targets[i].parent_ref) resNum.push(+this.targets[i].id)\n        else if (valArr[i] && this.targets[i].parent_ref) {\n          const parent_index = this.targets.indexOf(this.targets.find(item => item.id == this.targets[i].parent_ref))\n          if (valArr[parent_index]) resNum.push(+this.targets[i].id)\n        }\n      }\n      return resNum\n    }\n\n    const boolToObjO = () => {\n      let resNum: any[] = []\n      let valArr = this.createToolForm.value.outcome_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.outcomes[i].id)\n      }\n      return resNum\n    }\n    const boolToObjTT = () => {\n      let resNum: any[] = []\n      let valArr = this.createToolForm.value.tool_tag_refs\n      for (let i = 0; i < valArr.length; i++) {\n        if (valArr[i]) resNum.push(this.toolTags[i].id)\n      }\n      return resNum\n    }\n    values.target_refs = boolToObjT()\n    values.thematic_group_ref =  +this.createToolForm.value.thematic_group_ref\n    values.practice_ref =  +this.createToolForm.value.practice_ref\n    values.method_ref =  newMethod ? +newMethod.id : +this.createToolForm.value.method_ref\n    values.outcome_level_ref =  +this.createToolForm.value.outcome_level_ref\n    values.outcome_refs =  boolToObjO()\n    values.tool_tag_refs = boolToObjTT()\n    delete values.method_new\n    delete values.isNew\n\n    if (this.createToolForm.value.isNew) this.post(values)\n    if (!this.createToolForm.value.isNew) this.update(values)\n  }\n  post(values) {\n    this.transport.post(\"tools/\", values).then((tool) => {\n      tool.method_ref = [tool.method_ref]\n      if (tool.method_ref && tool.method_ref.length && tool.method_ref[0].parent_ref) {\n        let parent = this.methods.find(el => el.id == tool.method_ref[0].parent_ref)\n        if (parent) tool.method_ref.splice(0, 0, parent)\n      }\n      if (this.file) {\n        let fd = new FormData()\n        fd.append('tool_file', this.file, this.file.name)\n        this.transport.patch(\"tools/\", tool.id, fd).then((toolWithFile) => {\n          this.file = null\n          let index = this.allTools.indexOf(this.allTools.find(el => el.id == tool.id))\n          tool = {...tool, ...toolWithFile}\n          if (index) {\n            this.allTools[index] = tool\n            this.currentTool = tool\n          }\n        }).catch(error => {\n          console.log(error)\n          alert(\"Инсрумент сохранён, ошибка при загрузке файла\")\n        });\n      } \n      this.allTools.push(tool)\n      this.currentTool = tool\n      this.addToLibrary()\n      this.formPage = 2   \n    }).catch(error => {\n      console.log(error)\n      this.closeForm()\n    });   \n  }\n  update(values) {\n    let saveArr = []\n    this.currentTool.method_ref = this.currentTool.method_ref[this.currentTool.method_ref.length - 1]\n    for (let field in values) {\n      if (['tool_tag_refs', 'outcome_refs', 'target_refs'].includes(field)) {\n        if (this.currentTool[field].length != values[field].length) saveArr.push(field)\n        else for (let item of this.currentTool[field]) {\n          if (!values[field].includes(+item.id)) {\n            saveArr.push(field); \n            break\n          }\n        }\n      } \n      else if (['practice_ref', 'thematic_group_ref', 'method_ref', 'outcome_level_ref'].includes(field)) {\n        if (+this.currentTool[field].id != +values[field]) saveArr.push(field)\n      } \n      else if (this.currentTool[field] != values[field]) saveArr.push(field)\n    }\n    \n    for (let field in values) \n      if (!saveArr.includes(field)) values[field]=null\n\n    this.transport.post(\"tool-change-requests/\"+ this.currentTool.id + '/upload_data/', values).then((res) => {\n      if (res.message == 'edit') {\n        this.currentTool = {...this.currentTool, ...res.result}\n        this.currentTool.method_ref = [this.currentTool.method_ref]\n        if (this.currentTool.method_ref && this.currentTool.method_ref.length && this.currentTool.method_ref[0].parent_ref) {\n          let parent = this.methods.find(el => el.id == this.currentTool.method_ref[0].parent_ref)\n          if (parent) this.currentTool.method_ref.splice(0, 0, parent)\n        }\n        let index = this.allTools.indexOf(this.allTools.find(el => el.id == this.currentTool.id))\n        if (index) this.allTools[index] = this.currentTool\n        if (this.file) {\n          let fd = new FormData()\n          fd.append('tool_file', this.file, this.file.name)\n          this.transport.patch(\"tools/\", String(this.currentTool.id), fd).then((resFile) => {\n            this.file = null\n            this.currentTool = {...this.currentTool, ...resFile}\n            let index = this.allTools.indexOf(this.allTools.find(el => el.id == this.currentTool.id))\n            if (index) this.allTools[index] = this.currentTool\n          }).catch(error => {\n            this.file = null\n            console.log(error)\n            alert(\"Инсрумент сохранён, ошибка при загрузке файла\")\n          });\n        }\n        this.formPage = 2\n\n      } else if (res.message == 'request') {\n        this.currentTool.method_ref = [this.currentTool.method_ref]\n        if (this.currentTool.method_ref && this.currentTool.method_ref.length && this.currentTool.method_ref[0].parent_ref) {\n          let parent = this.methods.find(el => el.id == this.currentTool.method_ref[0].parent_ref)\n          if (parent) this.currentTool.method_ref.splice(0, 0, parent)\n        }\n        if (!this.file) alert(\"Запрос на редактирование успешно отправлен\")\n        else if (this.file) {\n          let fd = new FormData()\n          fd.append('tool_file', this.file, this.file.name)\n          this.transport.patch(\"tool-change-requests/\", String(this.currentTool.id), fd).then((resFile) => {\n            this.file = null\n            alert(\"Запрос на редактирование успешно отправлен\")\n          }).catch(error => {\n            this.file = null\n            console.log(error)\n            alert(\"Запрос на редактирование успешно отправлен, ошибка при загрузке файла\")\n          });\n        }\n        this.closeForm()\n      } \n    }).catch(error => {\n      console.log(error)\n      alert(\"Произошла неизвестная ошибка\")\n      this.closeForm()\n    });   \n  }\n\n  closeForm() {\n    this.createToolForm.reset()\n    this.formPage = 0\n  }\n\n  changeMethod() {\n    if (this.createToolForm.value.method_ref) {\n      const item = this.methods.find(m => m.id == +this.createToolForm.value.method_ref)\n      if (item && item.name && item.name.toLocaleLowerCase().trim() == 'другое') {\n        this.otherMethod = true\n        return\n      }\n    }\n    this.createToolForm.patchValue({method_new: ''})\n    this.otherMethod = false\n  }\n\n  selectMyLibrary(my: boolean) {\n    this.displayMyLibrary = my\n    this.tools = this.allTools\n    this.filterForm.reset()\n    this.myFilterForm.reset()\n    this.sortTools()\n  }\n\n  onCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.filterForm.get(checkList) as FormArray;\n\n    if (event.target.checked) {\n      formArray.push(new FormControl(event.target.value));\n\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      } else if (checkList == 'methodFilters') {\n        const index = this.methods.indexOf(this.methods.find(item => item.id == event.target.value))\n        if (!this.methods[index].parent_ref) this.methods[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.methods.find(item => item.id == this.methods[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      }\n    }\n    /* unselected */\n    else{\n      // find the unselected element\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checked = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      } else if (checkList == 'methodFilters') {\n        const index = this.methods.indexOf(this.methods.find(item => item.id == event.target.value))\n        if (!this.methods[index].parent_ref) {                        //удаляем, нет родителя\n          this.methods[index].checked = false\n          let children = this.methods.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.methods.filter(item => item.parent_ref == this.methods[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.methods[index].parent_ref)));\n        }\n      }\n    }\n    this.reviewTools();\n  }\n\n  onMyCheckChange(checkList, event) {\n    event.preventDefault()\n    const formArray: FormArray = this.myFilterForm.get(checkList) as FormArray;\n\n    if (event.target.checked){\n      // Add a new control in the arrayForm\n      formArray.push(new FormControl(event.target.value));\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) this.targets[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.targets.find(item => item.id == this.targets[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      } else if (checkList == 'methodFilters') {\n        const index = this.methods.indexOf(this.methods.find(item => item.id == event.target.value))\n        if (!this.methods[index].parent_ref) this.methods[index].checked = true                       //добавляем, нет родителя\n        else {\n          const parent = this.methods.find(item => item.id == this.methods[index].parent_ref)           //добавляем, есть родитель\n          let parent_index \n          formArray.controls.forEach((ctrl: FormControl, i: number) => { \n            if (ctrl.value == String(parent.id)) parent_index = i\n          })\n          if (typeof parent_index == 'number') formArray.removeAt(parent_index);\n        }\n      }\n    }\n    else{\n      formArray.controls.forEach((ctrl: FormControl, i: number) => {\n        if (ctrl.value == event.target.value) {\n          formArray.removeAt(i);\n          return;\n        }  \n      });\n      if (checkList == 'targetFilters') {\n        const index = this.targets.indexOf(this.targets.find(item => item.id == event.target.value))\n        if (!this.targets[index].parent_ref) {                        //удаляем, нет родителя\n          this.targets[index].checked = false\n          let children = this.targets.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.targets.filter(item => item.parent_ref == this.targets[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.targets[index].parent_ref)));\n        }\n      } else if (checkList == 'methodFilters') {\n        const index = this.methods.indexOf(this.methods.find(item => item.id == event.target.value))\n        if (!this.methods[index].parent_ref) {                        //удаляем, нет родителя\n          this.methods[index].checked = false\n          let children = this.methods.filter(item => item.parent_ref == event.target.value)\n          let indexes = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => ctrl.value == child.id)) indexes.push(i)\n          })\n          for (let i = indexes.length - 1; i >= 0; i--) formArray.removeAt(indexes[i]);\n        } else {                                                          //удаляем, родитель есть\n          let children = this.methods.filter(item => item.parent_ref == this.methods[index].parent_ref)\n          let siblings = []\n          formArray.controls.forEach((ctrl: FormControl, i: number) => {\n            if (children.find(child => child.id == ctrl.value)) siblings.push(i)\n          });\n          if (!siblings.length) formArray.push(new FormControl(String(this.methods[index].parent_ref)));\n        }\n      }\n    }\n    this.reviewMyTools();\n  }\n\n  reviewTools() {\n    const targetFiltersArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n    const outcomeFiltersArray: FormArray = this.filterForm.get('outcomeFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n    const methodFiltersArray: FormArray = this.filterForm.get('methodFilters') as FormArray;\n    const olFiltersArray: FormArray = this.filterForm.get('olFilters') as FormArray;\n\n    this.tools = this.allTools;\n\n    if (targetFiltersArray.value.length > 0)\n        this.tools = this.tools.filter((el:Tool) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n\n    if (practiceFiltersArray.value.length > 0)\n        this.tools = this.tools.filter((el:Tool) => {\n          return el.practice_ref && practiceFiltersArray.value.includes(String(el.practice_ref.id))\n        });\n\n    if (outcomeFiltersArray.value.length > 0)\n        this.tools = this.tools.filter((el:Tool) => {\n          return el.outcome_refs.some((el:Outcome) => {return outcomeFiltersArray.value.includes(String(el.id))}); \n        });\n    if (methodFiltersArray.value.length > 0)\n      this.tools = this.tools.filter((el:Tool) => {\n        return el.method_ref.some((el:Method) => {return methodFiltersArray.value.includes(String(el.id))}); \n      });\n\n    if (tgFiltersArray.value.length > 0)\n        this.tools = this.tools.filter((el:Tool) => {\n          return el.thematic_group_ref && tgFiltersArray.value.includes(String(el.thematic_group_ref.id))\n        });\n\n    if (olFiltersArray.value.length > 0)\n        this.tools = this.tools.filter((el:Tool) => {\n          return el.outcome_level_ref && olFiltersArray.value.includes(String(el.outcome_level_ref.id))\n        });\n      \n  }\n\n  reviewMyTools() {\n    const targetFiltersArray: FormArray = this.myFilterForm.get('targetFilters') as FormArray;\n    const practiceFiltersArray: FormArray = this.myFilterForm.get('practiceFilters') as FormArray;\n    const outcomeFiltersArray: FormArray = this.myFilterForm.get('outcomeFilters') as FormArray;\n    const tgFiltersArray: FormArray = this.myFilterForm.get('tgFilters') as FormArray;\n    const methodFiltersArray: FormArray = this.myFilterForm.get('methodFilters') as FormArray;\n    const olFiltersArray: FormArray = this.myFilterForm.get('olFilters') as FormArray;\n\n    this.myTools = this.allMyTools;\n\n    if (targetFiltersArray.value.length > 0)\n        this.myTools = this.myTools.filter((el:Tool) => {\n          return el.target_refs.some((trg:Target) => {return targetFiltersArray.value.includes(String(trg.id))});\n        });\n\n    if (practiceFiltersArray.value.length > 0)\n        this.myTools = this.myTools.filter((el:Tool) => {\n          return el.practice_ref && practiceFiltersArray.value.includes(String(el.practice_ref.id))\n        });\n\n    if (outcomeFiltersArray.value.length > 0)\n        this.myTools = this.myTools.filter((el:Tool) => {\n          return el.outcome_refs.some((el:Outcome) => {return outcomeFiltersArray.value.includes(String(el.id))});\n        });\n    if (methodFiltersArray.value.length > 0)\n      this.myTools = this.myTools.filter((el:Tool) => {\n        return el.method_ref && methodFiltersArray.value.includes(String(el.method_ref.id))\n      });\n\n    if (tgFiltersArray.value.length > 0)\n        this.myTools = this.myTools.filter((el:Tool) => {\n          return el.thematic_group_ref && tgFiltersArray.value.includes(String(el.thematic_group_ref.id))\n        });\n\n    if (olFiltersArray.value.length > 0)\n        this.myTools = this.myTools.filter((el:Tool) => {\n          return el.outcome_level_ref && olFiltersArray.value.includes(String(el.outcome_level_ref.id))\n        });\n  }\n\n  myCounter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.myTools.filter((el:Tool) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.myTools.filter((el:Tool) => {\n        return el.practice_ref && filterValue.id ==el.practice_ref.id\n      }).length;\n    } else if (filterName == \"outcome\") {\n      return this.myTools.filter((el:Tool) => {\n        return el.outcome_refs.some((el:Outcome) => {return el.id == filterValue.id});\n      }).length;\n    }else if (filterName == \"method\") {\n      return this.myTools.filter((el:Tool) => {\n        return el.method_ref.some((m: Method) => {return m.id == filterValue.id || !this.methods.find(method => method.id == filterValue.id) && filterValue.name.trim().toLocaleLowerCase() == \"другое\" &&  el.method_ref.find(p => filterValue.parent_ref == p.parent_ref)}); \n      }).length;\n    } else if (filterName == \"outcome_level\") {\n      return this.myTools.filter((el:Tool) => {\n        return el.outcome_level_ref && filterValue.id ==el.outcome_level_ref.id\n      }).length;\n    }else if (filterName == \"thematic_group\") {\n      return this.myTools.filter((el:Tool) => {\n        return el.thematic_group_ref && filterValue.id ==el.thematic_group_ref.id\n      }).length;\n    }\n  }\n\n  counter(filterName: string, filterValue) {\n    if (filterName == \"target\") {\n      return this.tools.filter((el:Tool) => {\n        return el.target_refs.some((trg:Target) => {return trg.id == filterValue.id});\n      }).length;\n    } else if (filterName == \"practice\") {\n      return this.tools.filter((el:Tool) => {\n        return el.practice_ref && filterValue.id == el.practice_ref.id\n      }).length;\n    } else if (filterName == \"outcome\") {\n      return this.tools.filter((el:Tool) => {\n        return el.outcome_refs.some((el:Outcome) => {return el.id == filterValue.id});\n      }).length;\n    }else if (filterName == \"method\") {\n      return this.tools.filter((el:Tool) => {\n        return el.method_ref.some((m: Method) => {return m.id == filterValue.id || !this.methods.find(method => method.id == filterValue.id) && filterValue.name.trim().toLocaleLowerCase() == \"другое\" &&  el.method_ref.find(p => filterValue.parent_ref == p.parent_ref)}); \n      }).length;\n    } else if (filterName == \"outcome_level\") {\n      return this.tools.filter((el:Tool) => {\n        return el.outcome_level_ref && filterValue.id == el.outcome_level_ref.id\n      }).length;\n    }else if (filterName == \"thematic_group\") {\n      return this.tools.filter((el:Tool) => {\n        return el.thematic_group_ref && filterValue.id == el.thematic_group_ref.id\n      }).length;\n    } \n  }\n\n  changeMyRoot() {\n    if (!this.myFilterRoot.value.target) {\n      for (let i = 0; i < this.targets.length; i++) this.targets[i].checkedMy = false\n      const formArray: FormArray = this.myFilterForm.get('targetFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.method) {\n      for (let i = 0; i < this.methods.length; i++) this.methods[i].checkedMy = false\n      const formArray: FormArray = this.myFilterForm.get('methodFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.practice) {\n      const formArray: FormArray = this.myFilterForm.get('practiceFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.outcome) {\n      const formArray: FormArray = this.myFilterForm.get('outcomeFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.tg) {\n      const formArray: FormArray = this.myFilterForm.get('tgFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.myFilterRoot.value.ol) {\n      const formArray: FormArray = this.myFilterForm.get('olFilters') as FormArray;\n      formArray.clear()\n    }\n    this.reviewMyTools()\n  }\n\n  changeRoot() {\n    if (!this.filterRoot.value.target) {\n      for (let i = 0; i < this.targets.length; i++) this.targets[i].checked = false\n      const formArray: FormArray = this.filterForm.get('targetFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.method) {\n      for (let i = 0; i < this.methods.length; i++) this.methods[i].checked = false\n      const formArray: FormArray = this.filterForm.get('methodFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.outcome) {\n      const formArray: FormArray = this.filterForm.get('outcomeFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.tg) {\n      const formArray: FormArray = this.filterForm.get('tgFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.ol) {\n      const formArray: FormArray = this.filterForm.get('olFilters') as FormArray;\n      formArray.clear()\n    }\n    if (!this.filterRoot.value.practice) {\n      const formArray: FormArray = this.filterForm.get('practiceFilters') as FormArray;\n      formArray.clear()\n    }\n    this.reviewTools()\n  }\n\n  findTarget(target) {\n    return !!this.currentTool.target_refs.find(el => el.id == target.id)\n  }\n\n  downloadFile(filePath: string) {\n    let link = document.createElement(\"a\");\n    link.target = \"_blank\"\n    link.download = \"filename\";\n    link.href = filePath;\n    link.click();\n    link.remove();\n  }\n\n  fileUpload(event) {\n    this.file = event.target.files[0]\n  }\n\n  triggerFile() {\n    this.file_input.nativeElement.click()\n  }\n}\n","<section class=\"block_form\">\n    <div>\n        <div class=\"row blank_li\">\n            <div class=\"col-5\" [ngClass]=\"{'deactive': displayMyLibrary}\" name=\"block_lib\"\n                (click)=\"selectMyLibrary(false)\">Библиотека инструментов</div>\n            <div *ngIf=\"authenticated\" class=\"col-5\" [ngClass]=\"{'deactive': !displayMyLibrary}\" name=\"block_my\"\n                (click)=\"selectMyLibrary(true)\">Моя библиотека инструментов</div>\n            <div class=\"col-2 add_block\" *ngIf=\"authenticated && toLoad <= 0\" (click)=\"addForm($event)\">\n              Добавить\n            </div>\n        </div>\n\n        <ng-container *ngIf=\"toLoad <= 0; else load\">\n            <div class=\"content_block block_my lib\" *ngIf=\"displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                        <form [formGroup]=\"myFilterRoot\">\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Тематическая группа:</b>\n                            <input type=\"checkbox\" formControlName=\"tg\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.tg\">\n                            <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{myCounter('thematic_group', tg)}})\n                                <input type=\"checkbox\" [value]=\"tg.id\"\n                                    (change)=\"onMyCheckChange('tgFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Целевые группы:</b>\n                            <input type=\"checkbox\" formControlName=\"target\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.target\">\n                            <ng-container *ngFor=\"let target of targets\">\n                                <label class=\"container_checked\" *ngIf=\"!target.parent_ref\">{{target.name}}({{myCounter('target', target)}})\n                                    <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onMyCheckChange('targetFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"target.checkedMy\">\n                                    <div *ngFor=\"let child of targets\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{myCounter('target', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onMyCheckChange('targetFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Практика:</b>\n                            <input type=\"checkbox\" formControlName=\"practice\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.practice\">\n                            <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{myCounter('practice', practice)}})\n                                <input type=\"checkbox\" [value]=\"practice.id\"\n                                    (change)=\"onMyCheckChange('practiceFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Метод:</b>\n                            <input type=\"checkbox\" formControlName=\"method\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.method\">\n                            <ng-container *ngFor=\"let method of methods\">\n                                <label class=\"container_checked\" *ngIf=\"!method.parent_ref\">{{method.name}}({{myCounter('method', method)}})\n                                    <input type=\"checkbox\" [value]=\"method.id\" (change)=\"onMyCheckChange('methodFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"method.checkedMy\">\n                                    <div *ngFor=\"let child of methods\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == method.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{myCounter('method', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onMyCheckChange('methodFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Уровень результата:</b>\n                            <input type=\"checkbox\" formControlName=\"ol\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.ol\">\n                            <label *ngFor=\"let ol of outcomeLevels\" class=\"container_checked\">{{ol.name}}({{myCounter('outcome_level', ol)}})\n                                <input type=\"checkbox\" [value]=\"ol.id\"\n                                    (change)=\"onMyCheckChange('olFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Социальные результаты:</b>\n                            <input type=\"checkbox\" formControlName=\"outcome\" (change)=\"changeMyRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"myFilterRoot.value.outcome\">\n                            <label *ngFor=\"let outcome of outcomes\" class=\"container_checked\">{{outcome.name}}({{myCounter('outcome', outcome)}})\n                                <input type=\"checkbox\" [value]=\"outcome.id\"\n                                    (change)=\"onMyCheckChange('outcomeFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                        </form>\n                    </div>\n                    <div class=\"col-7 block_method_search\">\n                        <h2>инструменты:</h2>\n\n                        <div class=\"item_seatchMethod\" *ngFor=\"let tool of myTools\">\n                            <div class=\"name_block open_accessadd\" (click)=\"openAddPersonal(tool)\"\n                            [ngClass]=\"{'check': transport.user && (!tool.createdby || tool.createdby.id != transport.user.id) && tool.current_user_library, \n                            'checkMy': tool.createdby && transport.user && tool.createdby.id == transport.user.id && tool.current_user_library,\n                            'uncheck': !tool.current_user_library && (!tool.createdby || !transport.user || tool.createdby.id != transport.user.id), \n                            'uncheckMy': tool.createdby && transport.user && !tool.current_user_library && tool.createdby.id == transport.user.id}\">\n                                <p>{{tool.name}}</p>\n                                <span *ngFor=\"let tag of tool.tool_tag_refs; index as i\">\n                                    <span style=\"color: grey; font-weight: 200;\">\n                                        {{i ==(tool.tool_tag_refs.length - 1) ? tag.name : (tag.name + ' | ')}}\n                                    </span>\n                                </span>\n                            </div>\n                            <div class=\"more_info\" (click)=\"openDetails(tool)\">\n                                <p class=\"center\"><img\n                                        src=\"/newpion/static/pionfront/assets/img/info_mini.png\" >Подробнее</p>\n                            </div>\n                        </div>\n\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"content_block block_lib\" *ngIf=\"!displayMyLibrary\">\n                <div class=\"row\">\n                    <div class=\"col-5 border_right\">\n                    <form [formGroup]=\"filterRoot\">\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Тематическая группа:</b>\n                            <input type=\"checkbox\" formControlName=\"tg\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.tg\">\n                            <label *ngFor=\"let tg of thematicGroups\" class=\"container_checked\">{{tg.name}}({{counter('thematic_group', tg)}})\n                                <input type=\"checkbox\" [value]=\"tg.id\"\n                                    (change)=\"onCheckChange('tgFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Целевые группы:</b>\n                            <input type=\"checkbox\" formControlName=\"target\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.target\">\n                            <ng-container *ngFor=\"let target of targets\">\n                                <label class=\"container_checked\" *ngIf=\"!target.parent_ref\">{{target.name}}({{counter('target', target)}})\n                                    <input type=\"checkbox\" [value]=\"target.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"target.checked\">\n                                    <div *ngFor=\"let child of targets\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == target.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{counter('target', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onCheckChange('targetFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Практика:</b>\n                            <input type=\"checkbox\" formControlName=\"practice\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.practice\">\n                            <label *ngFor=\"let practice of practices\" class=\"container_checked\">{{practice.name}}({{counter('practice', practice)}})\n                                <input type=\"checkbox\" [value]=\"practice.id\"\n                                    (change)=\"onCheckChange('practiceFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Метод:</b>\n                            <input type=\"checkbox\" formControlName=\"method\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.method\">\n                            <ng-container *ngFor=\"let method of methods\">\n                                <label class=\"container_checked\" *ngIf=\"!method.parent_ref\">{{method.name}}({{counter('method', method)}})\n                                    <input type=\"checkbox\" [value]=\"method.id\" (change)=\"onCheckChange('methodFilters', $event)\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                                <div *ngIf=\"method.checked\">\n                                    <div *ngFor=\"let child of methods\" class=\"col\">\n                                        <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == method.id\">\n                                            <label class=\"container_checked\">{{child.name}}({{counter('method', child)}})\n                                                <input type=\"checkbox\" [value]=\"child.id\" (change)=\"onCheckChange('methodFilters', $event)\">\n                                                <span class=\"checkmark\"></span>\n                                            </label>\n                                        </div>\n                                    </div>\n                                </div>\n                            </ng-container>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Уровень результата:</b>\n                            <input type=\"checkbox\" formControlName=\"ol\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.ol\">\n                            <label *ngFor=\"let ol of outcomeLevels\" class=\"container_checked\">{{ol.name}}({{counter('outcome_level', ol)}})\n                                <input type=\"checkbox\" [value]=\"ol.id\"\n                                    (change)=\"onCheckChange('olFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n\n                        <br>\n                        <label class=\"container_checked\">\n                            <b>Социальные результаты:</b>\n                            <input type=\"checkbox\" formControlName=\"outcome\" (change)=\"changeRoot()\">\n                            <span class=\"checkmark\"></span>\n                        </label>\n                        <ng-container *ngIf=\"filterRoot.value.outcome\">\n                            <label *ngFor=\"let outcome of outcomes\" class=\"container_checked\">{{outcome.name}}({{counter('outcome', outcome)}})\n                                <input type=\"checkbox\" [value]=\"outcome.id\"\n                                    (change)=\"onCheckChange('outcomeFilters', $event)\">\n                                <span class=\"checkmark\"></span>\n                            </label>\n                        </ng-container>\n                    </form>\n\n                    </div>\n                    <div class=\"col-7 block_method_search\">\n                        <!-- <input class=\"search_input\" placeholder=\"Поиск по ключевым словам\" ctype=\"text\" name=\"\"> -->\n                        <h2>инструменты:</h2>\n\n                        <div class=\"item_seatchMethod\" *ngFor=\"let tool of tools\">\n                            <div class=\"name_block open_accessadd\" (click)=\"openAddPersonal(tool)\"\n                            [ngClass]=\"{'check': transport.user && (!tool.createdby || tool.createdby.id != transport.user.id) && tool.current_user_library, \n                            'checkMy': tool.createdby && transport.user && tool.createdby.id == transport.user.id && tool.current_user_library,\n                            'uncheck': !tool.current_user_library && (!tool.createdby || !transport.user || tool.createdby.id != transport.user.id), \n                            'uncheckMy': tool.createdby && transport.user && !tool.current_user_library && tool.createdby.id == transport.user.id}\">\n                                <p>{{tool.name}}</p>\n                                <span *ngFor=\"let tag of tool.tool_tag_refs; index as i\">\n                                    <span style=\"color: grey; font-weight: 200;\">\n                                        {{i ==(tool.tool_tag_refs.length - 1) ? tag.name : (tag.name + ' | ')}}\n                                    </span>\n                                </span>\n                            </div>\n                            <div class=\"more_info\" (click)=\"openDetails(tool)\">\n                                <p class=\"center\"><img\n                                        src=\"/newpion/static/pionfront/assets/img/info_mini.png\">Подробнее</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n\n        <ng-template #load>\n            <div class=\"content_block\">\n                <h4 class=\"center\">{{status}}</h4>\n            </div>\n        </ng-template>\n    </div>\n</section>\n\n<div class=\"popap_kontst dark_block blue_head big_form\" *ngIf=\"formPage == 1\">\n    <div>\n        <form [formGroup]=\"createToolForm\">\n            <div class=\"head\">\n                <p class=\"close_btn\">\n                    <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n                </p>\n                <p class=\"center font_500\">{{createToolForm.value.isNew ? 'Добавление нового' : 'Редактирование'}} инструмента</p>\n            </div>\n            <div class=\"text_block\">\n\n                    <p class=\"line_descSel\">Название инструмента:</p>\n                    <textarea class=\"text_item\" formControlName=\"name\"></textarea>\n\n                    <p class=\"line_descSel\">Аннотация:</p>\n                    <textarea class=\"text_item\" formControlName=\"info\"></textarea>\n\n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Теги краткого описания:</p>\n                        <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                    </div>\n                    <div class=\"check_block\" style=\"text-align: left;\">\n                        <div class=\"row\" formArrayName=\"tool_tag_refs\">\n                            <div class=\"col-md-12\">\n                                <label *ngFor=\"let tag of toolTags; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                    {{tag.name}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n                \n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тематическая группа <span>(1)</span>:</p>\n                        <!-- <div class=\"desc_item3\"> Тематическая группа - нужен текст от Ольги </div> -->\n                    </div>\n\n                \n                    <select class=\"big_sellect\" formControlName=\"thematic_group_ref\"> \n                        <option value=\"\" disabled>Выберите тематическую группу</option>\n                        <option *ngFor=\"let group of thematicGroups\" [value]=\"group.id\">{{group.name}}</option>\n                    </select>\n                    \n\n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Целевые группы <span>(2)</span>:</p>\n                        <!-- <div class=\"desc_item3\"> Целевая группа - нужен текст от Ольги </div> -->\n                    </div>\n                    <div class=\"check_block\">\n                        <div class=\"row\" formArrayName=\"target_refs\" style=\"text-align: left;\">\n                            <div class=\"col-12\">\n                                <ng-container *ngFor=\"let target of targets; index as i\"> \n                                    <label class=\"container_checked\" style=\"text-align: left;\" *ngIf=\"!target.parent_ref\">\n                                        {{target.name}}\n                                        <input type=\"checkbox\" [formControlName]=\"i\">\n                                        <span class=\"checkmark\"></span>\n                                    </label>\n                                    <div *ngIf=\"createToolForm.value.target_refs[i] && !targets[i].parent_ref\">\n                                        <div *ngFor=\"let child of targets; index as j\" class=\"col\">\n                                            <div style=\"padding-left: 3rem;\" *ngIf=\"child.parent_ref == targets[i].id\">\n                                                <label class=\"container_checked\" style=\"text-align: left;\">\n                                                    {{child.name}}\n                                                    <input type=\"checkbox\" [formControlName]=\"j\">\n                                                    <span class=\"checkmark\"></span>\n                                                </label>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </ng-container>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Тип практики <span>(3)</span>:</p>\n                        <!-- <div class=\"desc_item3\"> Тип практики - нужен текст от Ольги </div> -->\n                    </div>\n\n                    \n                    <select class=\"big_sellect\" formControlName=\"practice_ref\"> \n                        <option value=\"\" disabled>Выберите тип практики</option>\n                        <option *ngFor=\"let practice of practices\" [value]=\"practice.id\">{{practice.name}}</option>\n                    </select>\n\n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Метод <span>(4)</span>:</p>\n                        <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                    </div>\n\n                    <select class=\"big_sellect\" formControlName=\"method_ref\" (change)=\"changeMethod()\"> \n                        <option value=\"\" disabled>Выберите метод</option>\n                        <option *ngFor=\"let method of methods\" [value]=\"method.id\" [disabled]=\"method.has_children\">{{!method.has_children && method.parent_ref? '➤ ' : ''}}{{method.name}}</option>\n                    </select>\n\n                    <ng-container *ngIf=\"otherMethod\">\n                        <p class=\"line_descSel\">Укажите другое:</p>\n                        <textarea class=\"text_item\" formControlName=\"method_new\"></textarea>\n                    </ng-container>\n\n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Уровень результата <span>(5)</span>:</p>\n                        <!-- <div class=\"desc_item3\">нужен текст от Ольги </div> -->\n                    </div>\n\n                    <select class=\"big_sellect\" formControlName=\"outcome_level_ref\"> \n                        <option value=\"\" disabled>Выберите уровень результата</option>\n                        <option *ngFor=\"let outcome_level of outcomeLevels\" [value]=\"outcome_level.id\">{{outcome_level.name}}</option>\n                    </select>\n\n                    <div class=\"item_wDesc\">\n                        <p class=\"line_descSel\" style=\" margin-bottom: 0px !important;\">Социальный результат <span>(6)</span>:</p>\n                        <!-- <div class=\"desc_item3\"> нужен текст от Ольги </div> -->\n                    </div>\n                    <div class=\"check_block\" style=\"text-align: left;\">\n                        <div class=\"row\" formArrayName=\"outcome_refs\">\n                            <div class=\"col-md-12\">\n                                <label *ngFor=\"let outcome of outcomes; index as i\" class=\"container_checked\" style=\"text-align: left;\"> \n                                    {{outcome.name}}\n                                    <input type=\"checkbox\" [formControlName]=\"i\">\n                                    <span class=\"checkmark\"></span>\n                                </label>\n                            </div>\n                        </div>\n                    </div>\n\n                    <p class=\"line_descSel\">Cсылка на инструмент:</p>\n                    <textarea class=\"text_item\" formControlName=\"url\"></textarea>\n\n                    <div class=\"row class_btns\">\n                        <div class=\"col-12\">\n                            <input type=\"file\" style=\"display: none;\" #file_input (change)=\"fileUpload($event)\">\n                            <button (click)=\"triggerFile()\" \n                            [ngClass]=\"{'selected_file': file || (currentTool && currentTool.tool_file), 'no_file': !file && !(currentTool && currentTool.tool_file)}\"\n                            class=\"center\">Загрузить инструмент</button>\n                        </div>\n                    </div>\n\n                    <button class=\"add_button\" style=\"width: auto; margin-bottom: 20px;\" (click)=\"createMethod($event)\" [disabled]=\"createToolForm.disabled || createToolForm.invalid\">{{createToolForm.value.isNew ? 'Добавить' : 'Обновить'}}</button>\n            </div>\n        </form>\n    </div>\n</div>\n\n<div class=\"popap_kontst dark_block blue_head\" *ngIf=\"formPage == 2\">\n    <div>\n        <div class=\"head\">\n            <p class=\"close_btn\">\n                <img src=\"/newpion/static/pionfront/assets/img/close_btn.png\" (click)=\"closeForm()\">\n            </p>\n            <p class=\"center font_500\">Инструмент</p>\n        </div>\n        <div class=\"text_block\">\n            <form class=\"ng-untouched ng-pristine ng-invalid block_sendfor\">\n                <div class=\"midle_text\">\n                    <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n                    <p>Инструмент успешно добавлен. Опубликовать в общей библиотеке?</p>\n                </div>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"addToAllLibrary($event)\">Да</button>\n                <button class=\"add_button\" style=\"width: auto;\" (click)=\"closeForm()\">Нет</button>\n            </form>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_projInfo dark_block blue_head\" *ngIf=\"displayDetails\">\n    <div>\n        <div class=\"head\">\n            <p (click)=\"closeDetails()\" class=\"close_btn\"><img\n                    src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n            <p class=\"center font_500\">Инструмент</p>\n        </div>\n        <div class=\"text_block\">\n            <p>Название инструмента:<br><strong><span class=\"font_500\">{{currentTool.name}}</span></strong></p>\n            <p>Аннотация:<br><strong><span class=\"font_500\">{{currentTool.info}}</span></strong></p>\n            <p>Теги краткого описания:<br>\n                <span *ngFor=\"let tag of currentTool.tool_tag_refs\">\n                <span class=\"font_500\">\n                    ➤ {{tag.name}}\n                <br></span>\n                </span></p>\n            <p>Тематическая группа:<br><span class=\"font_500\" *ngIf=\"currentTool.thematic_group_ref\">\n                {{currentTool.thematic_group_ref.name}}\n            </span></p>\n            <p>Целевая группа:<br>\n                <span *ngFor=\"let target of targets\">\n                <span class=\"font_500\" *ngIf=\"findTarget(target)\">\n                    {{target.parent_ref || target.parent_ref == 0 ? '➤ ': ''}}{{target.name}}\n                <br></span>\n                </span></p>\n            <p>Тип практики:<span *ngIf=\"currentTool.practice_ref\"><br><span\n                        class=\"font_500\">{{currentTool.practice_ref.name}}</span></span></p>\n            <p>Метод:\n                <span *ngIf=\"currentTool.method_ref && currentTool.method_ref[0]\"><br>\n                    <span class=\"font_500\">{{currentTool.method_ref[0].name}}</span> <br>\n                    <span *ngIf=\"currentTool.method_ref[1]\" class=\"font_500\">➤ {{currentTool.method_ref[1].name}}</span>\n                </span>\n                <span *ngIf=\"currentTool.method_ref && currentTool.method_ref.name\"><br>\n                    <span class=\"font_500\">{{currentTool.method_ref.name}}</span> \n                </span>\n            </p>\n            <p>Уровень результата:<span *ngIf=\"currentTool.outcome_level_ref\"><br><span\n                class=\"font_500\">{{currentTool.outcome_level_ref.name}}</span></span></p>\n\n            <p class=\"no_bottom\">Социальный результат:</p>\n            <ul class=\"results\">\n                <li *ngFor=\"let outcome of currentTool.outcome_refs\">{{outcome.name}}</li>\n            </ul>\n            <div class=\"row\" *ngIf=\"currentTool.tool_file && authenticated\">\n                <div class=\"col-12\"><button (click)=\"downloadFile(currentTool.tool_file)\" class=\"add_button\"><img\n                            src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">Открыть инструмент</button></div>\n            </div>\n\n            <div class=\"row\" *ngIf=\"currentTool.url\">\n                <div class=\"col-12\"><button (click)=\"downloadFile(currentTool.url)\" class=\"add_button\"><img\n                            src=\"/newpion/static/pionfront/assets/img/cloud_save.png\">Открыть ссылку на инструмент</button></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class=\"popap_accessadd dark_block\" *ngIf=\"displayAddPersonal\">\n    <div>\n        <p (click)=\"closeAddPersonal()\" class=\"close_btn\"><img\n                src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>Включить в личную библиотеку инструментов{{currentTool.createdby && currentTool.createdby.id == transport.user.id ? ' или редактировать' : ''}}?</p>\n            <button (click)=\"addToLibrary()\" style=\"width: auto;\" class=\"add_button\">Включить</button>\n            <button *ngIf=\"currentTool.createdby && currentTool.createdby.id == transport.user.id\" (click)=\"editForm($event)\" style=\"width: auto;\" class=\"add_button\">Редактировать</button>\n        </div>\n    </div>\n</div>\n<div class=\"popap_accessadd dark_block\" *ngIf=\"displayRemovePersonal\">\n    <div>\n        <p (click)=\"closeAddPersonal()\" class=\"close_btn\"><img\n                src=\"/newpion/static/pionfront/assets/img/close_btn.png\"></p>\n        <div class=\"text_block\">\n            <img src=\"/newpion/static/pionfront/assets/img/info.png\">\n            <p>Исключить из личной библиотеки инструментов{{currentTool.createdby && currentTool.createdby.id == transport.user.id ? ' или редактировать' : ''}}?</p>\n            <button (click)=\"removeFromLibrary()\" style=\"width: auto;\" class=\"add_button\">Исключить</button>\n            <button *ngIf=\"currentTool.createdby && currentTool.createdby.id == transport.user.id\" (click)=\"editForm($event)\" style=\"width: auto;\" class=\"add_button\">Редактировать</button>\n        </div>\n    </div>\n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  baseUrl: 'https://pion.org.ru/'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"]}